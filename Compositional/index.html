<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/style.css"><title>Programming Language Foundations in Agda – Compositional</title></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav"><span class="menu-icon"><svg viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Compositional.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Compositional: The denotational semantics is compositional</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Compositional-119" class="Keyword">module</a> <a id="plfa_plfa-part3-Compositional-126" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Compositional-151" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the denotational semantics is compositional, which means we fill in the ellipses in the following equations.</p><pre><code>ℰ (` x) ≃ ...
ℰ (ƛ M) ≃ ... ℰ M ...
ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>Such equations would imply that the denotational semantics could be instead defined as a recursive function. Indeed, we end this chapter with such a definition and prove that it is equivalent to ℰ.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Compositional-620" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-625" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-632" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Compositional-645" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-651" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-652" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Compositional-655" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-657" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#166" class="Record">Σ</a><a id="plfa_plfa-part3-Compositional-658" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-660" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Compositional-668" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-670" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Compositional-671" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-673" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1788" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Compositional-681" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-683" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="plfa_plfa-part3-Compositional-688" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-690" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="plfa_plfa-part3-Compositional-695" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-699" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Compositional-708" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-709" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Compositional-713" class="Symbol">to</a> <a id="plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Compositional-721" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-723" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-728" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-735" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.html" class="Module">Data.Sum</a> <a id="plfa_plfa-part3-Compositional-744" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-750" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-751" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#728" class="Datatype Operator">_⊎_</a><a id="plfa_plfa-part3-Compositional-754" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-756" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a><a id="plfa_plfa-part3-Compositional-760" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-762" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a><a id="plfa_plfa-part3-Compositional-766" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-768" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-773" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-780" href="https://agda.github.io/agda-stdlib/v1.3/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part3-Compositional-790" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-796" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-797" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="plfa_plfa-part3-Compositional-798" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-800" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="plfa_plfa-part3-Compositional-802" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-804" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-809" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-816" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
  <a id="plfa_plfa-part3-Compositional-837" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-843" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-844" href="../Untyped/#plfa_plfa-part2-Untyped-3093" class="Datatype">Context</a><a id="plfa_plfa-part3-Compositional-851" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-853" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Compositional-856" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-858" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-859" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-861" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Compositional-864" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-866" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Compositional-869" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-871" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Compositional-873" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-875" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Compositional-877" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-879" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Compositional-882" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-884" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-889" class="Keyword">import</a> <a id="plfa_plfa-part3-Compositional-896" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
  <a id="plfa_plfa-part3-Compositional-922" class="Keyword">using</a> <a id="plfa_plfa-part3-Compositional-928" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-929" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-934" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-936" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">_↦_</a><a id="plfa_plfa-part3-Compositional-939" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-941" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Compositional-945" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-947" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">_⊔_</a><a id="plfa_plfa-part3-Compositional-950" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-952" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-953" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-955" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Compositional-958" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-960" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Compositional-965" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-976" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-981" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-983" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a><a id="plfa_plfa-part3-Compositional-988" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-990" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a><a id="plfa_plfa-part3-Compositional-998" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1000" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a><a id="plfa_plfa-part3-Compositional-1009" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1011" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a><a id="plfa_plfa-part3-Compositional-1020" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1031" href="../Denotational/#plfa_plfa-part3-Denotational-4799" class="InductiveConstructor">⊑-dist</a><a id="plfa_plfa-part3-Compositional-1037" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1039" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-1045" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1047" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Compositional-1054" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1056" href="../Denotational/#plfa_plfa-part3-Denotational-6112" class="Function">⊔↦⊔-dist</a><a id="plfa_plfa-part3-Compositional-1064" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1075" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-1078" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1080" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Compositional-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1089" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-1095" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1097" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-1104" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1106" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Compositional-1113" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1115" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Compositional-1118" class="Symbol">;</a>
         <a id="plfa_plfa-part3-Compositional-1129" href="../Denotational/#plfa_plfa-part3-Denotational-26108" class="Function">up-env</a><a id="plfa_plfa-part3-Compositional-1135" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1137" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a><a id="plfa_plfa-part3-Compositional-1138" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1140" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Compositional-1143" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1145" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a><a id="plfa_plfa-part3-Compositional-1150" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1152" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a><a id="plfa_plfa-part3-Compositional-1162" class="Symbol">;</a> <a id="plfa_plfa-part3-Compositional-1164" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a><a id="plfa_plfa-part3-Compositional-1167" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-1169" class="Keyword">open</a> <a id="plfa_plfa-part3-Compositional-1174" href="../Denotational/#plfa_plfa-part3-Denotational-19001" class="Module">plfa.part3.Denotational.≃-Reasoning</a>
</pre><h2 id="equation-for-lambda-abstraction">Equation for lambda abstraction</h2><p>Regarding the first equation</p><pre><code>ℰ (ƛ M) ≃ ... ℰ M ...</code></pre><p>we need to define a function that maps a <code>Denotation (Γ , ★)</code> to a <code>Denotation Γ</code>. This function, let us name it <code>ℱ</code>, should mimic the non-recursive part of the semantics when applied to a lambda term. In particular, we need to consider the rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>. So <code>ℱ</code> has three parameters, the denotation <code>D</code> of the subterm <code>M</code>, an environment <code>γ</code>, and a value <code>v</code>. If we define <code>ℱ</code> by recursion on the value <code>v</code>, then it matches up nicely with the three rules <code>↦-intro</code>, <code>⊥-intro</code>, and <code>⊔-intro</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ"></a><a id="plfa_plfa-part3-Compositional-1840" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1842" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-1844" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-1846" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-1847" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-1849" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1851" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1862" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1863" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-1865" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-1867" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-1868" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1870" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-1872" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-1883" href="../Compositional/#plfa_plfa-part3-Compositional-1846" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-1885" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1887" href="../Compositional/#plfa_plfa-part3-Compositional-1887" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1889" href="../Compositional/#plfa_plfa-part3-Compositional-1889" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1891" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1892" href="../Compositional/#plfa_plfa-part3-Compositional-1892" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-1894" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-1896" href="../Compositional/#plfa_plfa-part3-Compositional-1896" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-1897" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1899" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1901" href="../Compositional/#plfa_plfa-part3-Compositional-1887" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1903" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1904" href="../Compositional/#plfa_plfa-part3-Compositional-1889" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1906" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-1909" href="../Compositional/#plfa_plfa-part3-Compositional-1892" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1910" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1912" href="../Compositional/#plfa_plfa-part3-Compositional-1896" class="Bound">w</a>
<a id="plfa_plfa-part3-Compositional-1914" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1916" href="../Compositional/#plfa_plfa-part3-Compositional-1916" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1918" href="../Compositional/#plfa_plfa-part3-Compositional-1918" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1920" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-1922" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1924" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#164" class="Record">⊤</a>
<a id="plfa_plfa-part3-Compositional-1926" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1928" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1930" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1932" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1933" href="../Compositional/#plfa_plfa-part3-Compositional-1933" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-1935" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-1937" href="../Compositional/#plfa_plfa-part3-Compositional-1937" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1938" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1940" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-1942" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1943" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1945" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1947" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1949" href="../Compositional/#plfa_plfa-part3-Compositional-1933" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-1950" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-1952" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-1954" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-1955" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-1957" href="../Compositional/#plfa_plfa-part3-Compositional-1928" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-1959" href="../Compositional/#plfa_plfa-part3-Compositional-1930" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-1961" href="../Compositional/#plfa_plfa-part3-Compositional-1937" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-1962" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>ℱ</code> function starts to look like the <code>curry</code> operation familiar to functional programmers. It turns a function that expects a tuple of length <code>n + 1</code> (the environment <code>Γ , ★</code>) into a function that expects a tuple of length <code>n</code> and returns a function of one parameter.</p><p>Using this <code>ℱ</code>, we hope to prove that</p><pre><code>ℰ (ƛ N) ≃ ℱ (ℰ N)</code></pre><p>The function <code>ℱ</code> is preserved when going from a larger value <code>v</code> to a smaller value <code>u</code>. The proof is a straightforward induction on the derivation of <code>u ⊑ v</code>, using the <code>up-env</code> lemma in the case for the <code>⊑-fun</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-sub-ℱ"></a><a id="plfa_plfa-part3-Compositional-2560" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2566" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2568" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-2570" href="../Compositional/#plfa_plfa-part3-Compositional-2570" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-2571" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2573" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-2575" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-2577" href="../Compositional/#plfa_plfa-part3-Compositional-2570" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-2579" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2581" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-2583" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-2585" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-2586" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-2588" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2590" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-2592" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-2593" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-2597" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2599" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2601" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2602" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2604" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2605" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2607" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2609" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-2613" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2615" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-2617" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-2619" href="../Compositional/#plfa_plfa-part3-Compositional-2590" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-2625" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-2640" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-2642" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-2644" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2645" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-2647" href="../Compositional/#plfa_plfa-part3-Compositional-2573" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-2648" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2650" href="../Compositional/#plfa_plfa-part3-Compositional-2588" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-2652" href="../Compositional/#plfa_plfa-part3-Compositional-2592" class="Bound">u</a>
<a id="plfa_plfa-part3-Compositional-2654" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2660" href="../Compositional/#plfa_plfa-part3-Compositional-2660" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2662" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a> <a id="plfa_plfa-part3-Compositional-2668" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2670" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-2673" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2679" href="../Compositional/#plfa_plfa-part3-Compositional-2679" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2681" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2682" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-2688" href="../Compositional/#plfa_plfa-part3-Compositional-2688" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2691" href="../Compositional/#plfa_plfa-part3-Compositional-2691" class="Bound">lt′</a><a id="plfa_plfa-part3-Compositional-2694" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2696" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2698" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-2702" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2703" href="../Denotational/#plfa_plfa-part3-Denotational-26108" class="Function">up-env</a> <a id="plfa_plfa-part3-Compositional-2710" href="../Compositional/#plfa_plfa-part3-Compositional-2679" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2712" href="../Compositional/#plfa_plfa-part3-Compositional-2688" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2714" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2716" href="../Compositional/#plfa_plfa-part3-Compositional-2691" class="Bound">lt′</a>
<a id="plfa_plfa-part3-Compositional-2720" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2726" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2728" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2729" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-2738" href="../Compositional/#plfa_plfa-part3-Compositional-2738" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2741" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">lt₁</a><a id="plfa_plfa-part3-Compositional-2744" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2746" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2748" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2750" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2756" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2758" href="../Compositional/#plfa_plfa-part3-Compositional-2738" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-2761" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2763" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2769" href="../Compositional/#plfa_plfa-part3-Compositional-2726" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2771" href="../Compositional/#plfa_plfa-part3-Compositional-2741" class="Bound">lt₁</a> <a id="plfa_plfa-part3-Compositional-2775" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-2777" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2783" href="../Compositional/#plfa_plfa-part3-Compositional-2783" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2785" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2786" href="../Denotational/#plfa_plfa-part3-Denotational-4479" class="InductiveConstructor">⊑-conj-R1</a> <a id="plfa_plfa-part3-Compositional-2796" href="../Compositional/#plfa_plfa-part3-Compositional-2796" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2798" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2800" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2802" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2808" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2809" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-2815" href="../Compositional/#plfa_plfa-part3-Compositional-2783" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2816" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2818" href="../Compositional/#plfa_plfa-part3-Compositional-2796" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2821" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2827" href="../Compositional/#plfa_plfa-part3-Compositional-2827" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2829" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2830" href="../Denotational/#plfa_plfa-part3-Denotational-4552" class="InductiveConstructor">⊑-conj-R2</a> <a id="plfa_plfa-part3-Compositional-2840" href="../Compositional/#plfa_plfa-part3-Compositional-2840" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-2842" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2844" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2846" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2852" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2853" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-2859" href="../Compositional/#plfa_plfa-part3-Compositional-2827" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-2860" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2862" href="../Compositional/#plfa_plfa-part3-Compositional-2840" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-2865" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2871" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2872" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-2874" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2876" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2879" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2881" href="../Compositional/#plfa_plfa-part3-Compositional-2881" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2884" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2886" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2889" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2891" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2893" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-2895" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-2896" href="../Compositional/#plfa_plfa-part3-Compositional-2876" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-2899" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-2901" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2902" href="../Compositional/#plfa_plfa-part3-Compositional-2881" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-2905" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-2907" href="../Compositional/#plfa_plfa-part3-Compositional-2891" class="Bound">v₃</a><a id="plfa_plfa-part3-Compositional-2909" class="Symbol">)}</a> <a id="plfa_plfa-part3-Compositional-2912" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-2914" href="../Compositional/#plfa_plfa-part3-Compositional-2914" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2917" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-2919" href="../Compositional/#plfa_plfa-part3-Compositional-2919" class="Bound">N3</a> <a id="plfa_plfa-part3-Compositional-2922" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-2924" href="../Denotational/#plfa_plfa-part3-Denotational-4799" class="InductiveConstructor">⊑-dist</a> <a id="plfa_plfa-part3-Compositional-2931" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-2936" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-2944" href="../Compositional/#plfa_plfa-part3-Compositional-2914" class="Bound">N2</a> <a id="plfa_plfa-part3-Compositional-2947" href="../Compositional/#plfa_plfa-part3-Compositional-2919" class="Bound">N3</a>
<a id="plfa_plfa-part3-Compositional-2950" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2956" href="../Compositional/#plfa_plfa-part3-Compositional-2956" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2958" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2959" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-2967" href="../Compositional/#plfa_plfa-part3-Compositional-2967" class="Bound">x₁</a> <a id="plfa_plfa-part3-Compositional-2970" href="../Compositional/#plfa_plfa-part3-Compositional-2970" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-2972" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2974" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-2976" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2982" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-2983" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-2989" href="../Compositional/#plfa_plfa-part3-Compositional-2956" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-2991" href="../Compositional/#plfa_plfa-part3-Compositional-2970" class="Bound">x₂</a><a id="plfa_plfa-part3-Compositional-2993" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-2995" href="../Compositional/#plfa_plfa-part3-Compositional-2967" class="Bound">x₁</a>
</pre><p>With this subsumption property in hand, we can prove the forward direction of the semantic equation for lambda. The proof is by induction on the semantics, using <code>sub-ℱ</code> in the case for the <code>sub</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰƛ→ℱℰ"></a><a id="plfa_plfa-part3-Compositional-3393" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3399" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3401" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3403" href="../Compositional/#plfa_plfa-part3-Compositional-3403" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3404" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3406" href="../Compositional/#plfa_plfa-part3-Compositional-3406" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3408" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3410" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3414" href="../Compositional/#plfa_plfa-part3-Compositional-3403" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3415" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3417" href="../Compositional/#plfa_plfa-part3-Compositional-3417" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3419" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3421" href="../Compositional/#plfa_plfa-part3-Compositional-3403" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3423" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3425" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3427" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3429" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3430" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3432" href="../Compositional/#plfa_plfa-part3-Compositional-3432" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-3434" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3436" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3441" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3445" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3447" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3449" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3450" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3452" href="../Compositional/#plfa_plfa-part3-Compositional-3417" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3453" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3455" href="../Compositional/#plfa_plfa-part3-Compositional-3406" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3457" href="../Compositional/#plfa_plfa-part3-Compositional-3432" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-3463" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-3478" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3480" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-3482" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3483" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-3485" href="../Compositional/#plfa_plfa-part3-Compositional-3417" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-3486" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3488" href="../Compositional/#plfa_plfa-part3-Compositional-3406" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3490" href="../Compositional/#plfa_plfa-part3-Compositional-3432" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-3492" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3498" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3499" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-3507" href="../Compositional/#plfa_plfa-part3-Compositional-3507" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3508" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3510" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3512" href="../Compositional/#plfa_plfa-part3-Compositional-3507" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-3514" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3520" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-3528" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3530" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part3-Compositional-3533" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3539" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3540" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-3548" href="../Compositional/#plfa_plfa-part3-Compositional-3548" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3551" href="../Compositional/#plfa_plfa-part3-Compositional-3551" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-3553" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3555" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3557" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-3559" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3565" href="../Compositional/#plfa_plfa-part3-Compositional-3548" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-3568" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3570" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3576" href="../Compositional/#plfa_plfa-part3-Compositional-3551" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-3579" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-3581" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3587" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3588" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-3592" href="../Compositional/#plfa_plfa-part3-Compositional-3592" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3594" href="../Compositional/#plfa_plfa-part3-Compositional-3594" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-3596" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3598" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3600" href="../Compositional/#plfa_plfa-part3-Compositional-2560" class="Function">sub-ℱ</a> <a id="plfa_plfa-part3-Compositional-3606" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3607" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-3613" href="../Compositional/#plfa_plfa-part3-Compositional-3592" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-3614" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3616" href="../Compositional/#plfa_plfa-part3-Compositional-3594" class="Bound">lt</a>
</pre><p>The “inversion lemma” for lambda abstraction is a special case of the above. The inversion lemma is useful in proving that denotations are preserved by reduction.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lambda-inversion"></a><a id="plfa_plfa-part3-Compositional-3796" href="../Compositional/#plfa_plfa-part3-Compositional-3796" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Compositional-3813" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3815" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-3817" href="../Compositional/#plfa_plfa-part3-Compositional-3817" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3818" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3820" href="../Compositional/#plfa_plfa-part3-Compositional-3820" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3822" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3824" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-3828" href="../Compositional/#plfa_plfa-part3-Compositional-3817" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-3829" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3831" href="../Compositional/#plfa_plfa-part3-Compositional-3831" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3833" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3835" href="../Compositional/#plfa_plfa-part3-Compositional-3817" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-3837" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-3839" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-3841" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3843" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-3844" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3846" href="../Compositional/#plfa_plfa-part3-Compositional-3846" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3849" href="../Compositional/#plfa_plfa-part3-Compositional-3849" class="Bound">v₂</a> <a id="plfa_plfa-part3-Compositional-3852" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-3854" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-3859" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-3863" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3865" href="../Compositional/#plfa_plfa-part3-Compositional-3820" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3867" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3869" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-3871" href="../Compositional/#plfa_plfa-part3-Compositional-3831" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3873" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3875" href="../Compositional/#plfa_plfa-part3-Compositional-3846" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3878" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3880" href="../Compositional/#plfa_plfa-part3-Compositional-3849" class="Bound">v₂</a>
    <a id="plfa_plfa-part3-Compositional-3887" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-3907" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-3909" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-3910" href="../Compositional/#plfa_plfa-part3-Compositional-3820" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-3912" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-3915" href="../Compositional/#plfa_plfa-part3-Compositional-3846" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3917" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-3919" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-3921" href="../Compositional/#plfa_plfa-part3-Compositional-3831" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-3923" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Compositional-3925" href="../Compositional/#plfa_plfa-part3-Compositional-3849" class="Bound">v₂</a>
<a id="plfa_plfa-part3-Compositional-3928" href="../Compositional/#plfa_plfa-part3-Compositional-3796" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Compositional-3944" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3945" class="Argument">v₁</a> <a id="plfa_plfa-part3-Compositional-3948" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3950" href="../Compositional/#plfa_plfa-part3-Compositional-3950" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-3952" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-3954" class="Argument">v₂</a> <a id="plfa_plfa-part3-Compositional-3957" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3959" href="../Compositional/#plfa_plfa-part3-Compositional-3959" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3961" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3963" href="../Compositional/#plfa_plfa-part3-Compositional-3963" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-3965" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3967" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a><a id="plfa_plfa-part3-Compositional-3972" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-3973" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-3975" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-3977" href="../Compositional/#plfa_plfa-part3-Compositional-3950" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-3980" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-3982" href="../Compositional/#plfa_plfa-part3-Compositional-3959" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-3984" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-3986" href="../Compositional/#plfa_plfa-part3-Compositional-3963" class="Bound">d</a>
</pre><p>The backward direction of the semantic equation for lambda is even easier to prove than the forward direction. We proceed by induction on the value v.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱℰ→ℰƛ"></a><a id="plfa_plfa-part3-Compositional-4153" href="../Compositional/#plfa_plfa-part3-Compositional-4153" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4159" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4161" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4163" href="../Compositional/#plfa_plfa-part3-Compositional-4163" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4164" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4166" href="../Compositional/#plfa_plfa-part3-Compositional-4166" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4168" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4170" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-4174" href="../Compositional/#plfa_plfa-part3-Compositional-4163" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4175" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4177" href="../Compositional/#plfa_plfa-part3-Compositional-4177" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4179" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4181" href="../Compositional/#plfa_plfa-part3-Compositional-4163" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4183" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4185" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4187" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4189" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4190" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4192" href="../Compositional/#plfa_plfa-part3-Compositional-4192" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4194" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4196" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-4201" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4205" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4207" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4209" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4210" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4212" href="../Compositional/#plfa_plfa-part3-Compositional-4177" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4213" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4215" href="../Compositional/#plfa_plfa-part3-Compositional-4166" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4217" href="../Compositional/#plfa_plfa-part3-Compositional-4192" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-4223" class="Comment">------------</a>
  <a id="plfa_plfa-part3-Compositional-4238" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4240" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4242" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4243" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4245" href="../Compositional/#plfa_plfa-part3-Compositional-4177" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4246" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4248" href="../Compositional/#plfa_plfa-part3-Compositional-4166" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4250" href="../Compositional/#plfa_plfa-part3-Compositional-4192" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-4252" href="../Compositional/#plfa_plfa-part3-Compositional-4153" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4258" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4259" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4261" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4263" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-4264" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4266" href="../Compositional/#plfa_plfa-part3-Compositional-4266" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4268" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4270" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Compositional-4278" href="../Compositional/#plfa_plfa-part3-Compositional-4153" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4284" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4285" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4287" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4289" href="../Compositional/#plfa_plfa-part3-Compositional-4289" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4292" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-4294" href="../Compositional/#plfa_plfa-part3-Compositional-4294" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4296" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4298" href="../Compositional/#plfa_plfa-part3-Compositional-4298" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-4300" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4302" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Compositional-4310" href="../Compositional/#plfa_plfa-part3-Compositional-4298" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-4312" href="../Compositional/#plfa_plfa-part3-Compositional-4153" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4318" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-4319" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-4321" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4323" href="../Compositional/#plfa_plfa-part3-Compositional-4323" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-4326" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-4328" href="../Compositional/#plfa_plfa-part3-Compositional-4328" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-4330" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-4332" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4334" href="../Compositional/#plfa_plfa-part3-Compositional-4334" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-4337" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4339" href="../Compositional/#plfa_plfa-part3-Compositional-4339" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-4342" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-4344" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4346" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-4354" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4355" href="../Compositional/#plfa_plfa-part3-Compositional-4153" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4361" href="../Compositional/#plfa_plfa-part3-Compositional-4334" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-4363" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4365" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4366" href="../Compositional/#plfa_plfa-part3-Compositional-4153" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4372" href="../Compositional/#plfa_plfa-part3-Compositional-4339" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-4374" class="Symbol">)</a>
</pre><p>So indeed, the denotational semantics is compositional with respect to lambda abstraction, as witnessed by the function <code>ℱ</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-equiv"></a><a id="plfa_plfa-part3-Compositional-4515" href="../Compositional/#plfa_plfa-part3-Compositional-4515" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4525" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4527" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-4529" href="../Compositional/#plfa_plfa-part3-Compositional-4529" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-4530" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-4532" href="../Compositional/#plfa_plfa-part3-Compositional-4532" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-4534" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-4536" href="../Compositional/#plfa_plfa-part3-Compositional-4529" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-4538" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4540" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-4542" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-4544" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-4545" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-4549" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-4551" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4553" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4554" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-4556" href="../Compositional/#plfa_plfa-part3-Compositional-4532" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4557" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-4559" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-4561" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-4563" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-4564" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-4566" href="../Compositional/#plfa_plfa-part3-Compositional-4532" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-4567" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-4569" href="../Compositional/#plfa_plfa-part3-Compositional-4515" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-4579" href="../Compositional/#plfa_plfa-part3-Compositional-4579" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-4581" href="../Compositional/#plfa_plfa-part3-Compositional-4581" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-4583" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-4585" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-4587" href="../Compositional/#plfa_plfa-part3-Compositional-3393" class="Function">ℰƛ→ℱℰ</a> <a id="plfa_plfa-part3-Compositional-4593" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-4595" href="../Compositional/#plfa_plfa-part3-Compositional-4153" class="Function">ℱℰ→ℰƛ</a> <a id="plfa_plfa-part3-Compositional-4601" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="equation-for-function-application">Equation for function application</h2><p>Next we fill in the ellipses for the equation concerning function application.</p><pre><code>ℰ (M · N) ≃ ... ℰ M ... ℰ N ...</code></pre><p>For this we need to define a function that takes two denotations, both in context <code>Γ</code>, and produces another one in context <code>Γ</code>. This function, let us name it <code>●</code>, needs to mimic the non-recursive aspects of the semantics of an application <code>L · M</code>. We cannot proceed as easily as for <code>ℱ</code> and define the function by recursion on value <code>v</code> because, for example, the rule <code>↦-elim</code> applies to any value. Instead we shall define <code>●</code> in a way that directly deals with the <code>↦-elim</code> and <code>⊥-intro</code> rules but ignores <code>⊔-intro</code>. This makes the forward direction of the proof more difficult, and the case for <code>⊔-intro</code> demonstrates why the <code>⊑-dist</code> rule is important.</p><p>So we define the application of <code>D₁</code> to <code>D₂</code>, written <code>D₁ ● D₂</code>, to include any value <code>w</code> equivalent to <code>⊥</code>, for the <code>⊥-intro</code> rule, and to include any value <code>w</code> that is the output of an entry <code>v ↦ w</code> in <code>D₁</code>, provided the input <code>v</code> is in <code>D₂</code>, for the <code>↦-elim</code> rule.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-5698" class="Keyword">infixl</a> <a id="plfa_plfa-part3-Compositional-5705" class="Number">7</a> <a id="plfa_plfa-part3-Compositional-5707" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">_●_</a>

<a id="plfa_plfa-part3-Compositional-_●_"></a><a id="plfa_plfa-part3-Compositional-5712" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">_●_</a> <a id="plfa_plfa-part3-Compositional-5716" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-5718" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-5720" href="../Compositional/#plfa_plfa-part3-Compositional-5720" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-5721" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-5723" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5725" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5736" href="../Compositional/#plfa_plfa-part3-Compositional-5720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5738" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5740" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5751" href="../Compositional/#plfa_plfa-part3-Compositional-5720" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-5753" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-5755" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-5766" href="../Compositional/#plfa_plfa-part3-Compositional-5720" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-5768" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5769" href="../Compositional/#plfa_plfa-part3-Compositional-5769" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5772" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-5774" href="../Compositional/#plfa_plfa-part3-Compositional-5774" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-5776" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5778" href="../Compositional/#plfa_plfa-part3-Compositional-5778" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5780" href="../Compositional/#plfa_plfa-part3-Compositional-5780" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5782" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-5784" href="../Compositional/#plfa_plfa-part3-Compositional-5780" class="Bound">w</a> <a id="plfa_plfa-part3-Compositional-5786" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-5788" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a> <a id="plfa_plfa-part3-Compositional-5790" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="plfa_plfa-part3-Compositional-5792" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Compositional-5795" href="../Compositional/#plfa_plfa-part3-Compositional-5795" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5797" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Compositional-5799" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Compositional-5805" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a><a id="plfa_plfa-part3-Compositional-5806" class="Symbol">(</a> <a id="plfa_plfa-part3-Compositional-5808" href="../Compositional/#plfa_plfa-part3-Compositional-5769" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-5811" href="../Compositional/#plfa_plfa-part3-Compositional-5778" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5813" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-5814" href="../Compositional/#plfa_plfa-part3-Compositional-5795" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5816" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-5818" href="../Compositional/#plfa_plfa-part3-Compositional-5780" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-5819" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-5821" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Compositional-5823" href="../Compositional/#plfa_plfa-part3-Compositional-5774" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-5826" href="../Compositional/#plfa_plfa-part3-Compositional-5778" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-5828" href="../Compositional/#plfa_plfa-part3-Compositional-5795" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-5830" class="Symbol">)</a>
</pre><p>If one squints hard enough, the <code>_●_</code> operator starts to look like the <code>apply</code> operation familiar to functional programmers. It takes two parameters and applies the first to the second.</p><p>Next we consider the inversion lemma for application, which is also the forward direction of the semantic equation for application. We describe the proof below.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ·→●ℰ"></a><a id="plfa_plfa-part3-Compositional-6195" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6201" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6203" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-6205" href="../Compositional/#plfa_plfa-part3-Compositional-6205" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6206" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6208" href="../Compositional/#plfa_plfa-part3-Compositional-6208" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6210" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6212" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-6216" href="../Compositional/#plfa_plfa-part3-Compositional-6205" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6217" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6219" href="../Compositional/#plfa_plfa-part3-Compositional-6219" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6221" href="../Compositional/#plfa_plfa-part3-Compositional-6221" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-6223" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6225" href="../Compositional/#plfa_plfa-part3-Compositional-6205" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-6227" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-6229" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-6230" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6232" href="../Compositional/#plfa_plfa-part3-Compositional-6232" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-6234" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6236" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Compositional-6241" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-6245" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6247" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6249" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6250" href="../Compositional/#plfa_plfa-part3-Compositional-6219" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6252" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-6254" href="../Compositional/#plfa_plfa-part3-Compositional-6221" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6255" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6257" href="../Compositional/#plfa_plfa-part3-Compositional-6208" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6259" href="../Compositional/#plfa_plfa-part3-Compositional-6232" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-6265" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-6284" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-6286" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6287" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6289" href="../Compositional/#plfa_plfa-part3-Compositional-6219" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-6291" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-6293" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-6295" href="../Compositional/#plfa_plfa-part3-Compositional-6221" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6296" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6298" href="../Compositional/#plfa_plfa-part3-Compositional-6208" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-6300" href="../Compositional/#plfa_plfa-part3-Compositional-6232" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-6302" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6308" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6309" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Compositional-6315" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6316" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6318" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6320" href="../Compositional/#plfa_plfa-part3-Compositional-6320" class="Bound">v′</a><a id="plfa_plfa-part3-Compositional-6322" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6324" href="../Compositional/#plfa_plfa-part3-Compositional-6324" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6327" href="../Compositional/#plfa_plfa-part3-Compositional-6327" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6329" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6331" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6333" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6338" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6340" href="../Compositional/#plfa_plfa-part3-Compositional-6320" class="Bound">v′</a> <a id="plfa_plfa-part3-Compositional-6343" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6345" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6347" href="../Compositional/#plfa_plfa-part3-Compositional-6324" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6350" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6352" href="../Compositional/#plfa_plfa-part3-Compositional-6327" class="Bound">d₂</a> <a id="plfa_plfa-part3-Compositional-6355" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6357" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-6359" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6365" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6366" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6368" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6370" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-6371" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6373" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-6381" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6383" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6388" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a>
<a id="plfa_plfa-part3-Compositional-6394" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6400" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6401" href="../Compositional/#plfa_plfa-part3-Compositional-6401" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-6402" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6404" href="../Compositional/#plfa_plfa-part3-Compositional-6404" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-6405" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6407" href="../Compositional/#plfa_plfa-part3-Compositional-6407" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-6408" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6410" href="../Compositional/#plfa_plfa-part3-Compositional-6410" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-6411" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6413" href="../Compositional/#plfa_plfa-part3-Compositional-6413" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-6414" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6416" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6417" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Compositional-6424" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-6425" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-6427" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6429" href="../Compositional/#plfa_plfa-part3-Compositional-6429" class="Bound">v₁</a><a id="plfa_plfa-part3-Compositional-6431" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-6433" class="Argument">w</a> <a id="plfa_plfa-part3-Compositional-6435" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6437" href="../Compositional/#plfa_plfa-part3-Compositional-6437" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6439" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-6441" href="../Compositional/#plfa_plfa-part3-Compositional-6441" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6444" href="../Compositional/#plfa_plfa-part3-Compositional-6444" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-6446" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-6452" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-6457" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6463" href="../Compositional/#plfa_plfa-part3-Compositional-6441" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-6466" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6468" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-6474" href="../Compositional/#plfa_plfa-part3-Compositional-6444" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Compositional-6477" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6481" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6483" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6488" href="../Compositional/#plfa_plfa-part3-Compositional-6488" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6492" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6494" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6499" href="../Compositional/#plfa_plfa-part3-Compositional-6499" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6503" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6505" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6510" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6511" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6520" href="../Compositional/#plfa_plfa-part3-Compositional-6488" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6524" href="../Compositional/#plfa_plfa-part3-Compositional-6499" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-6527" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-6529" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6533" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6535" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6540" href="../Compositional/#plfa_plfa-part3-Compositional-6540" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6544" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6546" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6551" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6553" href="../Compositional/#plfa_plfa-part3-Compositional-6553" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6557" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6559" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6561" href="../Compositional/#plfa_plfa-part3-Compositional-6561" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6567" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6569" href="../Compositional/#plfa_plfa-part3-Compositional-6569" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6574" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6576" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6578" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6586" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6591" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6593" href="../Compositional/#plfa_plfa-part3-Compositional-6553" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6597" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6599" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6601" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6605" href="../Compositional/#plfa_plfa-part3-Compositional-6561" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6611" href="../Compositional/#plfa_plfa-part3-Compositional-6637" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6614" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6616" href="../Compositional/#plfa_plfa-part3-Compositional-6569" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6621" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6623" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6631" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6637" href="../Compositional/#plfa_plfa-part3-Compositional-6637" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6640" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6642" href="../Compositional/#plfa_plfa-part3-Compositional-6553" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6646" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6648" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6649" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6652" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6654" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6656" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6658" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6660" href="../Compositional/#plfa_plfa-part3-Compositional-6553" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6664" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6666" class="Bound">v₂</a>
            <a id="plfa_plfa-part3-Compositional-6681" href="../Compositional/#plfa_plfa-part3-Compositional-6637" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6684" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6686" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6687" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6693" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6700" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6701" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6710" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6711" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6719" href="../Compositional/#plfa_plfa-part3-Compositional-6540" class="Bound">lt1</a> <a id="plfa_plfa-part3-Compositional-6723" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6728" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6730" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Compositional-6736" class="Symbol">))</a>
<a id="plfa_plfa-part3-Compositional-6739" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6743" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6745" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6750" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6752" href="../Compositional/#plfa_plfa-part3-Compositional-6752" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6756" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6758" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6760" href="../Compositional/#plfa_plfa-part3-Compositional-6760" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6766" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6768" href="../Compositional/#plfa_plfa-part3-Compositional-6768" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6773" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6775" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6777" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6779" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-6784" href="../Compositional/#plfa_plfa-part3-Compositional-6784" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6788" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-6796" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6801" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6803" href="../Compositional/#plfa_plfa-part3-Compositional-6752" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6807" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6809" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6811" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-6815" href="../Compositional/#plfa_plfa-part3-Compositional-6760" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6821" href="../Compositional/#plfa_plfa-part3-Compositional-6847" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6824" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6826" href="../Compositional/#plfa_plfa-part3-Compositional-6768" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6831" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6833" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
      <a id="plfa_plfa-part3-Compositional-6841" class="Keyword">where</a> <a id="plfa_plfa-part3-Compositional-6847" href="../Compositional/#plfa_plfa-part3-Compositional-6847" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6850" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-6852" href="../Compositional/#plfa_plfa-part3-Compositional-6752" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6856" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6858" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6859" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-6862" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-6864" class="Bound">v₂</a><a id="plfa_plfa-part3-Compositional-6866" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-6868" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-6870" href="../Compositional/#plfa_plfa-part3-Compositional-6752" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6874" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-6876" class="Bound">v₁</a>
            <a id="plfa_plfa-part3-Compositional-6891" href="../Compositional/#plfa_plfa-part3-Compositional-6847" class="Function">lt</a> <a id="plfa_plfa-part3-Compositional-6894" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-6896" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6897" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-6903" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6910" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6911" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-6920" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-6927" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-6928" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-6936" href="../Compositional/#plfa_plfa-part3-Compositional-6784" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-6940" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a><a id="plfa_plfa-part3-Compositional-6945" class="Symbol">)))</a>
<a id="plfa_plfa-part3-Compositional-6949" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-6953" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6955" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6960" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6962" href="../Compositional/#plfa_plfa-part3-Compositional-6962" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-6966" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6968" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6970" href="../Compositional/#plfa_plfa-part3-Compositional-6970" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-6976" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-6978" href="../Compositional/#plfa_plfa-part3-Compositional-6978" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-6983" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6985" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-6987" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-6989" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-6994" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-6996" href="../Compositional/#plfa_plfa-part3-Compositional-6996" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-7001" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7003" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7005" href="../Compositional/#plfa_plfa-part3-Compositional-7005" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-7012" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7014" href="../Compositional/#plfa_plfa-part3-Compositional-7014" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-7020" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7022" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7024" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-7032" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-7036" href="../Compositional/#plfa_plfa-part3-Compositional-7036" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-7040" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7042" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-7050" href="../Compositional/#plfa_plfa-part3-Compositional-6970" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7056" href="../Compositional/#plfa_plfa-part3-Compositional-7005" class="Bound">L↓v12′</a> <a id="plfa_plfa-part3-Compositional-7063" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-7072" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-7076" href="../Compositional/#plfa_plfa-part3-Compositional-7076" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-7080" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7082" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-7090" href="../Compositional/#plfa_plfa-part3-Compositional-6978" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7095" href="../Compositional/#plfa_plfa-part3-Compositional-7014" class="Bound">M↓v3′</a> <a id="plfa_plfa-part3-Compositional-7101" class="Keyword">in</a>
      <a id="plfa_plfa-part3-Compositional-7110" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7115" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7117" href="../Compositional/#plfa_plfa-part3-Compositional-6962" class="Bound">v₁′</a> <a id="plfa_plfa-part3-Compositional-7121" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-7123" href="../Compositional/#plfa_plfa-part3-Compositional-6996" class="Bound">v₁′′</a> <a id="plfa_plfa-part3-Compositional-7128" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7130" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7132" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7136" href="../Compositional/#plfa_plfa-part3-Compositional-7036" class="Bound">L↓⊔</a> <a id="plfa_plfa-part3-Compositional-7140" href="../Denotational/#plfa_plfa-part3-Denotational-6112" class="Function">⊔↦⊔-dist</a> <a id="plfa_plfa-part3-Compositional-7149" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7151" href="../Compositional/#plfa_plfa-part3-Compositional-7076" class="Bound">M↓⊔</a> <a id="plfa_plfa-part3-Compositional-7155" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7157" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-7159" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7165" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-7166" href="../Compositional/#plfa_plfa-part3-Compositional-7166" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-7167" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7169" href="../Compositional/#plfa_plfa-part3-Compositional-7169" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-7170" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7172" href="../Compositional/#plfa_plfa-part3-Compositional-7172" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-7173" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7175" href="../Compositional/#plfa_plfa-part3-Compositional-7175" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-7176" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-7178" href="../Compositional/#plfa_plfa-part3-Compositional-7178" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-7179" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-7181" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7182" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7186" href="../Compositional/#plfa_plfa-part3-Compositional-7186" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-7188" href="../Compositional/#plfa_plfa-part3-Compositional-7188" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7190" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Compositional-7196" class="Keyword">with</a> <a id="plfa_plfa-part3-Compositional-7201" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-7207" href="../Compositional/#plfa_plfa-part3-Compositional-7186" class="Bound">d</a>
<a id="plfa_plfa-part3-Compositional-7209" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7213" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7215" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7220" href="../Compositional/#plfa_plfa-part3-Compositional-7220" class="Bound">lt2</a> <a id="plfa_plfa-part3-Compositional-7224" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-7226" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-7231" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7232" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-7240" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-7243" href="../Compositional/#plfa_plfa-part3-Compositional-7220" class="Bound">lt2</a><a id="plfa_plfa-part3-Compositional-7246" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-7248" class="Symbol">...</a> <a id="plfa_plfa-part3-Compositional-7252" class="Symbol">|</a> <a id="plfa_plfa-part3-Compositional-7254" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7259" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7261" href="../Compositional/#plfa_plfa-part3-Compositional-7261" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7264" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7266" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7268" href="../Compositional/#plfa_plfa-part3-Compositional-7268" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7274" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7276" href="../Compositional/#plfa_plfa-part3-Compositional-7276" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7281" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7283" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7285" class="Symbol">=</a>
      <a id="plfa_plfa-part3-Compositional-7293" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-7298" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7300" href="../Compositional/#plfa_plfa-part3-Compositional-7261" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-7303" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7305" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-7307" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-7311" href="../Compositional/#plfa_plfa-part3-Compositional-7268" class="Bound">L↓v12</a> <a id="plfa_plfa-part3-Compositional-7317" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-7318" href="../Denotational/#plfa_plfa-part3-Denotational-4696" class="InductiveConstructor">⊑-fun</a> <a id="plfa_plfa-part3-Compositional-7324" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a> <a id="plfa_plfa-part3-Compositional-7331" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-7333" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-7335" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-7337" href="../Compositional/#plfa_plfa-part3-Compositional-7276" class="Bound">M↓v3</a> <a id="plfa_plfa-part3-Compositional-7342" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-7344" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>We proceed by induction on the semantics.</p><ul><li><p>In case <code>↦-elim</code> we have <code>γ ⊢ L ↓ (v′ ↦ v)</code> and <code>γ ⊢ M ↓ v′</code>, which is all we need to show <code>(ℰ L ● ℰ M) γ v</code>.</p></li><li><p>In case <code>⊥-intro</code> we have <code>v = ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</p></li><li><p>In case <code>⊔-intro</code> we have <code>ℰ (L · M) γ v₁</code> and <code>ℰ (L · M) γ v₂</code> and need to show <code>(ℰ L ● ℰ M) γ (v₁ ⊔ v₂)</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code> and <code>(ℰ L ● ℰ M) γ v₂</code>. We have four subcases to consider.</p><ul><li><p>Suppose <code>v₁ ⊑ ⊥</code> and <code>v₂ ⊑ ⊥</code>. Then <code>v₁ ⊔ v₂ ⊑ ⊥</code>.</p></li><li><p>Suppose <code>v₁ ⊑ ⊥</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₂</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′ ↦ v₁</code>, <code>γ ⊢ M ↓ v₁′</code>, and <code>v₂ ⊑ ⊥</code>. We have <code>γ ⊢ L ↓ v₁′ ↦ (v₁ ⊔ v₂)</code> by rule <code>sub</code> because <code>v₁′ ↦ (v₁ ⊔ v₂) ⊑ v₁′ ↦ v₁</code>.</p></li><li><p>Suppose <code>γ ⊢ L ↓ v₁′′ ↦ v₁, γ ⊢ M ↓ v₁′′</code>, <code>γ ⊢ L ↓ v₁′ ↦ v₂</code>, and <code>γ ⊢ M ↓ v₁′</code>. This case is the most interesting. By two uses of the rule <code>⊔-intro</code> we have <code>γ ⊢ L ↓ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code> and <code>γ ⊢ M ↓ (v₁′ ⊔ v₁′′)</code>. But this does not yet match what we need for <code>ℰ L ● ℰ M</code> because the result of <code>L</code> must be an <code>↦</code> whose input entry is <code>v₁′ ⊔ v₁′′</code>. So we use the <code>sub</code> rule to obtain <code>γ ⊢ L ↓ (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂)</code>, using the <code>⊔↦⊔-dist</code> lemma (thanks to the <code>⊑-dist</code> rule) to show that</p><pre><code>  (v₁′ ⊔ v₁′′) ↦ (v₁ ⊔ v₂) ⊑ (v₁′ ↦ v₂) ⊔ (v₁′′ ↦ v₁)</code></pre><p>So we have proved what is needed for this case.</p></li></ul></li><li><p>In case <code>sub</code> we have <code>Γ ⊢ L · M ↓ v₁</code> and <code>v ⊑ v₁</code>. By the induction hypothesis, we have <code>(ℰ L ● ℰ M) γ v₁</code>. We have two subcases to consider.</p><ul><li>Suppose <code>v₁ ⊑ ⊥</code>. We conclude that <code>v ⊑ ⊥</code>.</li><li>Suppose <code>Γ ⊢ L ↓ v′ → v₁</code> and <code>Γ ⊢ M ↓ v′</code>. We conclude with <code>Γ ⊢ L ↓ v′ → v</code> by rule <code>sub</code>, because <code>v′ → v ⊑ v′ → v₁</code>.</li></ul></li></ul><p>The forward direction is proved by cases on the premise <code>(ℰ L ● ℰ M) γ v</code>. In case <code>v ⊑ ⊥</code>, we obtain <code>Γ ⊢ L · M ↓ ⊥</code> by rule <code>⊥-intro</code>. Otherwise, we conclude immediately by rule <code>↦-elim</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●ℰ→ℰ·"></a><a id="plfa_plfa-part3-Compositional-9414" href="../Compositional/#plfa_plfa-part3-Compositional-9414" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9420" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9422" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9424" href="../Compositional/#plfa_plfa-part3-Compositional-9424" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9425" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9427" href="../Compositional/#plfa_plfa-part3-Compositional-9427" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9429" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9431" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-9435" href="../Compositional/#plfa_plfa-part3-Compositional-9424" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9436" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9438" href="../Compositional/#plfa_plfa-part3-Compositional-9438" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9440" href="../Compositional/#plfa_plfa-part3-Compositional-9440" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9442" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9444" href="../Compositional/#plfa_plfa-part3-Compositional-9424" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9446" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9448" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9449" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9451" href="../Compositional/#plfa_plfa-part3-Compositional-9451" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9452" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9456" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9458" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9459" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9461" href="../Compositional/#plfa_plfa-part3-Compositional-9438" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9463" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9465" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9467" href="../Compositional/#plfa_plfa-part3-Compositional-9440" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9468" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9470" href="../Compositional/#plfa_plfa-part3-Compositional-9427" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9472" href="../Compositional/#plfa_plfa-part3-Compositional-9451" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-9478" class="Comment">----------------</a>
  <a id="plfa_plfa-part3-Compositional-9497" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9499" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9501" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9502" href="../Compositional/#plfa_plfa-part3-Compositional-9438" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9504" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9506" href="../Compositional/#plfa_plfa-part3-Compositional-9440" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9507" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9509" href="../Compositional/#plfa_plfa-part3-Compositional-9427" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9511" href="../Compositional/#plfa_plfa-part3-Compositional-9451" class="Bound">v</a>
<a id="plfa_plfa-part3-Compositional-9513" href="../Compositional/#plfa_plfa-part3-Compositional-9414" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9519" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9520" href="../Compositional/#plfa_plfa-part3-Compositional-9520" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9521" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9523" href="../Compositional/#plfa_plfa-part3-Compositional-9523" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9524" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9526" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9527" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-9532" href="../Compositional/#plfa_plfa-part3-Compositional-9532" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-9534" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9536" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9538" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-9542" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-9550" href="../Compositional/#plfa_plfa-part3-Compositional-9532" class="Bound">lt</a>
<a id="plfa_plfa-part3-Compositional-9553" href="../Compositional/#plfa_plfa-part3-Compositional-9414" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9559" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-9560" href="../Compositional/#plfa_plfa-part3-Compositional-9560" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-9561" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9563" href="../Compositional/#plfa_plfa-part3-Compositional-9563" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-9564" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-9566" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9567" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-9572" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9574" href="../Compositional/#plfa_plfa-part3-Compositional-9574" class="Bound">v₁</a> <a id="plfa_plfa-part3-Compositional-9577" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9579" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9581" href="../Compositional/#plfa_plfa-part3-Compositional-9581" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9584" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9586" href="../Compositional/#plfa_plfa-part3-Compositional-9586" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-9589" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-9591" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-9592" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9594" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9596" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Compositional-9603" href="../Compositional/#plfa_plfa-part3-Compositional-9581" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-9606" href="../Compositional/#plfa_plfa-part3-Compositional-9586" class="Bound">d2</a>
</pre><p>So we have proved that the semantics is compositional with respect to function application, as witnessed by the <code>●</code> function.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-equiv"></a><a id="plfa_plfa-part3-Compositional-9749" href="../Compositional/#plfa_plfa-part3-Compositional-9749" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9759" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9761" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-9763" href="../Compositional/#plfa_plfa-part3-Compositional-9763" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-9764" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-9766" href="../Compositional/#plfa_plfa-part3-Compositional-9766" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9768" href="../Compositional/#plfa_plfa-part3-Compositional-9768" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-9770" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-9772" href="../Compositional/#plfa_plfa-part3-Compositional-9763" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-9774" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-9776" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-9777" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-9781" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-9783" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9785" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9786" href="../Compositional/#plfa_plfa-part3-Compositional-9766" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-9788" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-9790" href="../Compositional/#plfa_plfa-part3-Compositional-9768" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9791" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9793" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-9795" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9796" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9798" href="../Compositional/#plfa_plfa-part3-Compositional-9766" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-9799" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-9801" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-9803" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-9804" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-9806" href="../Compositional/#plfa_plfa-part3-Compositional-9768" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-9807" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-9809" href="../Compositional/#plfa_plfa-part3-Compositional-9749" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-9819" href="../Compositional/#plfa_plfa-part3-Compositional-9819" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-9821" href="../Compositional/#plfa_plfa-part3-Compositional-9821" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-9823" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-9825" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-9827" href="../Compositional/#plfa_plfa-part3-Compositional-6195" class="Function">ℰ·→●ℰ</a> <a id="plfa_plfa-part3-Compositional-9833" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-9835" href="../Compositional/#plfa_plfa-part3-Compositional-9414" class="Function">●ℰ→ℰ·</a> <a id="plfa_plfa-part3-Compositional-9841" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>We also need an inversion lemma for variables. If <code>Γ ⊢ x ↓ v</code>, then <code>v ⊑ γ x</code>. The proof is a straightforward induction on the semantics.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-inv"></a><a id="plfa_plfa-part3-Compositional-9995" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10003" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10005" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-10007" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-10008" href="../Compositional/#plfa_plfa-part3-Compositional-10008" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-10010" href="../Compositional/#plfa_plfa-part3-Compositional-10010" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10012" href="../Compositional/#plfa_plfa-part3-Compositional-10012" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10013" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-10015" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-10016" href="../Compositional/#plfa_plfa-part3-Compositional-10016" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10018" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10020" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-10024" href="../Compositional/#plfa_plfa-part3-Compositional-10008" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-10025" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-10029" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10031" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-10033" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10034" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-10036" href="../Compositional/#plfa_plfa-part3-Compositional-10012" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10037" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10039" href="../Compositional/#plfa_plfa-part3-Compositional-10016" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10041" href="../Compositional/#plfa_plfa-part3-Compositional-10010" class="Bound">v</a>
    <a id="plfa_plfa-part3-Compositional-10047" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Compositional-10069" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10071" href="../Compositional/#plfa_plfa-part3-Compositional-10010" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10073" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-10075" href="../Compositional/#plfa_plfa-part3-Compositional-10016" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10077" href="../Compositional/#plfa_plfa-part3-Compositional-10012" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-10079" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10087" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10088" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Compositional-10091" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10093" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10095" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Compositional-10102" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10110" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10111" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Compositional-10119" href="../Compositional/#plfa_plfa-part3-Compositional-10119" class="Bound">d₁</a> <a id="plfa_plfa-part3-Compositional-10122" href="../Compositional/#plfa_plfa-part3-Compositional-10122" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-10124" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10126" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10128" href="../Denotational/#plfa_plfa-part3-Denotational-4395" class="InductiveConstructor">⊑-conj-L</a> <a id="plfa_plfa-part3-Compositional-10137" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10138" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10146" href="../Compositional/#plfa_plfa-part3-Compositional-10119" class="Bound">d₁</a><a id="plfa_plfa-part3-Compositional-10148" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10150" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10151" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10159" href="../Compositional/#plfa_plfa-part3-Compositional-10122" class="Bound">d₂</a><a id="plfa_plfa-part3-Compositional-10161" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10163" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10171" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10172" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-10176" href="../Compositional/#plfa_plfa-part3-Compositional-10176" class="Bound">d</a> <a id="plfa_plfa-part3-Compositional-10178" href="../Compositional/#plfa_plfa-part3-Compositional-10178" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10180" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10182" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10184" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Compositional-10192" href="../Compositional/#plfa_plfa-part3-Compositional-10178" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10195" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10196" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10204" href="../Compositional/#plfa_plfa-part3-Compositional-10176" class="Bound">d</a><a id="plfa_plfa-part3-Compositional-10205" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10207" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10215" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Compositional-10223" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10225" href="../Denotational/#plfa_plfa-part3-Denotational-4370" class="InductiveConstructor">⊑-bot</a>
</pre><p>To round-out the semantic equations, we establish the following one for variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-var-equiv"></a><a id="plfa_plfa-part3-Compositional-10328" href="../Compositional/#plfa_plfa-part3-Compositional-10328" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10338" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10340" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-10342" href="../Compositional/#plfa_plfa-part3-Compositional-10342" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-10343" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-10345" href="../Compositional/#plfa_plfa-part3-Compositional-10345" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-10347" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-10349" href="../Compositional/#plfa_plfa-part3-Compositional-10342" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-10351" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Compositional-10353" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-10354" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-10356" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10358" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-10360" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-10361" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-10363" href="../Compositional/#plfa_plfa-part3-Compositional-10345" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10364" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10366" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-10368" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10371" href="../Compositional/#plfa_plfa-part3-Compositional-10371" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10373" href="../Compositional/#plfa_plfa-part3-Compositional-10373" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10375" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10377" href="../Compositional/#plfa_plfa-part3-Compositional-10373" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10379" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-10381" href="../Compositional/#plfa_plfa-part3-Compositional-10371" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10383" href="../Compositional/#plfa_plfa-part3-Compositional-10345" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-10384" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-10386" href="../Compositional/#plfa_plfa-part3-Compositional-10328" class="Function">var-equiv</a> <a id="plfa_plfa-part3-Compositional-10396" href="../Compositional/#plfa_plfa-part3-Compositional-10396" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-10398" href="../Compositional/#plfa_plfa-part3-Compositional-10398" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-10400" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-10402" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-10404" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Compositional-10412" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-10414" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-10417" href="../Compositional/#plfa_plfa-part3-Compositional-10417" class="Bound">lt</a> <a id="plfa_plfa-part3-Compositional-10420" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-10422" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Compositional-10426" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Compositional-10430" href="../Compositional/#plfa_plfa-part3-Compositional-10417" class="Bound">lt</a><a id="plfa_plfa-part3-Compositional-10432" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-10434" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><h2 id="congruence">Congruence</h2><p>The main work of this chapter is complete: we have established semantic equations that show how the denotational semantics is compositional. In this section and the next we make use of these equations to prove some corollaries: that denotational equality is a <em>congruence</em> and to prove the <em>compositionality property</em>, which states that surrounding two denotationally-equal terms in the same context produces two programs that are denotationally equal.</p><p>We begin by showing that denotational equality is a congruence with respect to lambda abstraction: that <code>ℰ N ≃ ℰ N′</code> implies <code>ℰ (ƛ N) ≃ ℰ (ƛ N′)</code>. We shall use the <code>lam-equiv</code> equation to reduce this question to whether <code>ℱ</code> is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℱ-cong"></a><a id="plfa_plfa-part3-Compositional-11162" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-11169" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11171" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11173" href="../Compositional/#plfa_plfa-part3-Compositional-11173" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11174" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11176" href="../Compositional/#plfa_plfa-part3-Compositional-11176" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11178" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11181" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11183" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11194" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11195" href="../Compositional/#plfa_plfa-part3-Compositional-11173" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11197" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11199" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11200" class="Symbol">)}</a>
  <a id="plfa_plfa-part3-Compositional-11205" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11207" href="../Compositional/#plfa_plfa-part3-Compositional-11176" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11209" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11211" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Bound">D′</a>
    <a id="plfa_plfa-part3-Compositional-11218" class="Comment">-----------</a>
  <a id="plfa_plfa-part3-Compositional-11232" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11234" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11236" href="../Compositional/#plfa_plfa-part3-Compositional-11176" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11238" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11240" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11242" href="../Compositional/#plfa_plfa-part3-Compositional-11178" class="Bound">D′</a>
<a id="plfa_plfa-part3-Compositional-11245" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ-cong</a><a id="plfa_plfa-part3-Compositional-11251" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11252" href="../Compositional/#plfa_plfa-part3-Compositional-11252" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11253" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11255" href="../Compositional/#plfa_plfa-part3-Compositional-11255" class="Bound">D≃D′</a> <a id="plfa_plfa-part3-Compositional-11260" href="../Compositional/#plfa_plfa-part3-Compositional-11260" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11262" href="../Compositional/#plfa_plfa-part3-Compositional-11262" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11264" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11268" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11270" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11273" href="../Compositional/#plfa_plfa-part3-Compositional-11273" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11275" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11277" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11279" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11280" href="../Compositional/#plfa_plfa-part3-Compositional-11260" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11281" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11283" href="../Compositional/#plfa_plfa-part3-Compositional-11262" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11284" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11286" href="../Compositional/#plfa_plfa-part3-Compositional-11273" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11288" href="../Compositional/#plfa_plfa-part3-Compositional-11255" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11292" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11294" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11296" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-11299" href="../Compositional/#plfa_plfa-part3-Compositional-11299" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11301" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11303" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11305" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11306" href="../Compositional/#plfa_plfa-part3-Compositional-11260" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11307" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11309" href="../Compositional/#plfa_plfa-part3-Compositional-11262" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11310" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11312" href="../Compositional/#plfa_plfa-part3-Compositional-11299" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-11314" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11315" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-11321" href="../Compositional/#plfa_plfa-part3-Compositional-11255" class="Bound">D≃D′</a><a id="plfa_plfa-part3-Compositional-11325" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-11328" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-11332" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-11340" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11343" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11345" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11347" href="../Compositional/#plfa_plfa-part3-Compositional-11347" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11349" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11351" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-11355" href="../Compositional/#plfa_plfa-part3-Compositional-11252" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11356" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11358" href="../Compositional/#plfa_plfa-part3-Compositional-11358" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11359" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11361" href="../Compositional/#plfa_plfa-part3-Compositional-11361" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11363" href="../Compositional/#plfa_plfa-part3-Compositional-11363" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11366" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11368" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-11379" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11380" href="../Compositional/#plfa_plfa-part3-Compositional-11252" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11382" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11384" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11385" class="Symbol">)}</a>
    <a id="plfa_plfa-part3-Compositional-11392" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11394" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11396" href="../Compositional/#plfa_plfa-part3-Compositional-11361" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11398" href="../Compositional/#plfa_plfa-part3-Compositional-11347" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11400" href="../Compositional/#plfa_plfa-part3-Compositional-11358" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-11403" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-11406" href="../Compositional/#plfa_plfa-part3-Compositional-11361" class="Bound">D</a> <a id="plfa_plfa-part3-Compositional-11408" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11410" href="../Compositional/#plfa_plfa-part3-Compositional-11363" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11413" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11415" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-11417" href="../Compositional/#plfa_plfa-part3-Compositional-11363" class="Bound">D′</a> <a id="plfa_plfa-part3-Compositional-11420" href="../Compositional/#plfa_plfa-part3-Compositional-11347" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11422" href="../Compositional/#plfa_plfa-part3-Compositional-11358" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-11426" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11429" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11430" class="Argument">v</a> <a id="plfa_plfa-part3-Compositional-11432" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11434" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Compositional-11435" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11437" href="../Compositional/#plfa_plfa-part3-Compositional-11437" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11440" href="../Compositional/#plfa_plfa-part3-Compositional-11440" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11444" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11446" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
  <a id="plfa_plfa-part3-Compositional-11451" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11454" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11455" href="../Compositional/#plfa_plfa-part3-Compositional-11455" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11456" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11458" href="../Compositional/#plfa_plfa-part3-Compositional-11458" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-11460" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-11462" href="../Compositional/#plfa_plfa-part3-Compositional-11462" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11463" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11465" href="../Compositional/#plfa_plfa-part3-Compositional-11465" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11468" href="../Compositional/#plfa_plfa-part3-Compositional-11468" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11472" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11474" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11480" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11481" href="../Compositional/#plfa_plfa-part3-Compositional-11468" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11485" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11486" href="../Compositional/#plfa_plfa-part3-Compositional-11455" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-11488" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Compositional-11491" href="../Compositional/#plfa_plfa-part3-Compositional-11458" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-11492" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11494" href="../Compositional/#plfa_plfa-part3-Compositional-11462" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11495" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11497" href="../Compositional/#plfa_plfa-part3-Compositional-11465" class="Bound">fd</a>
  <a id="plfa_plfa-part3-Compositional-11502" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a> <a id="plfa_plfa-part3-Compositional-11505" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11506" href="../Compositional/#plfa_plfa-part3-Compositional-11506" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11507" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11509" href="../Compositional/#plfa_plfa-part3-Compositional-11509" class="Bound">u</a> <a id="plfa_plfa-part3-Compositional-11511" href="../Denotational/#plfa_plfa-part3-Denotational-4036" class="InductiveConstructor Operator">⊔</a> <a id="plfa_plfa-part3-Compositional-11513" href="../Compositional/#plfa_plfa-part3-Compositional-11513" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11514" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11516" href="../Compositional/#plfa_plfa-part3-Compositional-11516" class="Bound">fd</a> <a id="plfa_plfa-part3-Compositional-11519" href="../Compositional/#plfa_plfa-part3-Compositional-11519" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11523" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-11525" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-11527" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11529" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11530" href="../Compositional/#plfa_plfa-part3-Compositional-11506" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11531" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11533" href="../Compositional/#plfa_plfa-part3-Compositional-11509" class="Bound">u</a><a id="plfa_plfa-part3-Compositional-11534" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11536" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11537" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-11543" href="../Compositional/#plfa_plfa-part3-Compositional-11516" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11545" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11547" href="../Compositional/#plfa_plfa-part3-Compositional-11519" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11551" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11553" href="../Compositional/#plfa_plfa-part3-Compositional-11340" class="Function">ℱ≃</a><a id="plfa_plfa-part3-Compositional-11555" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11556" href="../Compositional/#plfa_plfa-part3-Compositional-11506" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-11557" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11559" href="../Compositional/#plfa_plfa-part3-Compositional-11513" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-11560" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11562" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11563" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="plfa_plfa-part3-Compositional-11569" href="../Compositional/#plfa_plfa-part3-Compositional-11516" class="Bound">fd</a><a id="plfa_plfa-part3-Compositional-11571" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11573" href="../Compositional/#plfa_plfa-part3-Compositional-11519" class="Bound">dd′</a> <a id="plfa_plfa-part3-Compositional-11577" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>The proof of <code>ℱ-cong</code> uses the lemma <code>ℱ≃</code> to handle both directions of the if-and-only-if. That lemma is proved by a straightforward induction on the value <code>v</code>.</p><p>We now prove that lambda abstraction is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-lam-cong"></a><a id="plfa_plfa-part3-Compositional-11840" href="../Compositional/#plfa_plfa-part3-Compositional-11840" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11849" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11851" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-11853" href="../Compositional/#plfa_plfa-part3-Compositional-11853" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11854" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11856" href="../Compositional/#plfa_plfa-part3-Compositional-11856" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11858" href="../Compositional/#plfa_plfa-part3-Compositional-11858" class="Bound">N′</a> <a id="plfa_plfa-part3-Compositional-11861" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-11863" href="../Compositional/#plfa_plfa-part3-Compositional-11853" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-11865" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-11867" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-11869" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-11871" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-11872" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-11876" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11878" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11880" href="../Compositional/#plfa_plfa-part3-Compositional-11856" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-11882" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11884" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11886" href="../Compositional/#plfa_plfa-part3-Compositional-11858" class="Bound">N′</a>
    <a id="plfa_plfa-part3-Compositional-11893" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Compositional-11913" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-11915" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11917" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11918" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11920" href="../Compositional/#plfa_plfa-part3-Compositional-11856" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11921" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-11923" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-11925" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11927" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11928" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11930" href="../Compositional/#plfa_plfa-part3-Compositional-11858" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11932" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-11934" href="../Compositional/#plfa_plfa-part3-Compositional-11840" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-11943" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-11944" href="../Compositional/#plfa_plfa-part3-Compositional-11944" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-11945" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11947" href="../Compositional/#plfa_plfa-part3-Compositional-11947" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11948" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-11950" href="../Compositional/#plfa_plfa-part3-Compositional-11950" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-11952" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-11954" href="../Compositional/#plfa_plfa-part3-Compositional-11954" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-11959" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-11963" href="../Denotational/#plfa_plfa-part3-Denotational-19093" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-11973" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-11975" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-11976" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-11978" href="../Compositional/#plfa_plfa-part3-Compositional-11947" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-11979" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-11983" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-11986" href="../Compositional/#plfa_plfa-part3-Compositional-4515" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-11996" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-12002" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-12004" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12005" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12007" href="../Compositional/#plfa_plfa-part3-Compositional-11947" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-12008" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-12012" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-12015" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-12022" href="../Compositional/#plfa_plfa-part3-Compositional-11954" class="Bound">N≃N′</a> <a id="plfa_plfa-part3-Compositional-12027" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-12033" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-12035" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12036" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12038" href="../Compositional/#plfa_plfa-part3-Compositional-11950" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-12040" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-12044" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-12047" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12053" href="../Compositional/#plfa_plfa-part3-Compositional-4515" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-12063" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-12069" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-12071" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12072" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-12074" href="../Compositional/#plfa_plfa-part3-Compositional-11950" class="Bound">N′</a><a id="plfa_plfa-part3-Compositional-12076" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-12080" href="../Denotational/#plfa_plfa-part3-Denotational-19431" class="Function Operator">☐</a>
</pre><p>Next we prove that denotational equality is a congruence for application: that <code>ℰ L ≃ ℰ L′</code> and <code>ℰ M ≃ ℰ M′</code> imply <code>ℰ (L · M) ≃ ℰ (L′ · M′)</code>. The <code>app-equiv</code> equation reduces this to the question of whether the <code>●</code> operator is a congruence.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-●-cong"></a><a id="plfa_plfa-part3-Compositional-12337" href="../Compositional/#plfa_plfa-part3-Compositional-12337" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12344" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12346" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12348" href="../Compositional/#plfa_plfa-part3-Compositional-12348" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12349" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12351" href="../Compositional/#plfa_plfa-part3-Compositional-12351" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12354" href="../Compositional/#plfa_plfa-part3-Compositional-12354" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12358" href="../Compositional/#plfa_plfa-part3-Compositional-12358" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12361" href="../Compositional/#plfa_plfa-part3-Compositional-12361" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12365" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12367" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12378" href="../Compositional/#plfa_plfa-part3-Compositional-12348" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12379" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-12383" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12385" href="../Compositional/#plfa_plfa-part3-Compositional-12351" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12388" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12390" href="../Compositional/#plfa_plfa-part3-Compositional-12354" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12394" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12396" href="../Compositional/#plfa_plfa-part3-Compositional-12358" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12399" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12401" href="../Compositional/#plfa_plfa-part3-Compositional-12361" class="Bound">D₂′</a>
  <a id="plfa_plfa-part3-Compositional-12407" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12409" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12410" href="../Compositional/#plfa_plfa-part3-Compositional-12351" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12413" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12415" href="../Compositional/#plfa_plfa-part3-Compositional-12358" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12417" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12419" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12421" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12422" href="../Compositional/#plfa_plfa-part3-Compositional-12354" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12426" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12428" href="../Compositional/#plfa_plfa-part3-Compositional-12361" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12431" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-12433" href="../Compositional/#plfa_plfa-part3-Compositional-12337" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-12440" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12441" href="../Compositional/#plfa_plfa-part3-Compositional-12441" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12442" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12444" href="../Compositional/#plfa_plfa-part3-Compositional-12444" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12447" href="../Compositional/#plfa_plfa-part3-Compositional-12447" class="Bound">d2</a> <a id="plfa_plfa-part3-Compositional-12450" href="../Compositional/#plfa_plfa-part3-Compositional-12450" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12452" href="../Compositional/#plfa_plfa-part3-Compositional-12452" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12454" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12456" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12458" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12461" href="../Compositional/#plfa_plfa-part3-Compositional-12461" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12463" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12465" href="../Compositional/#plfa_plfa-part3-Compositional-12551" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12468" href="../Compositional/#plfa_plfa-part3-Compositional-12461" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12470" href="../Compositional/#plfa_plfa-part3-Compositional-12444" class="Bound">d1</a> <a id="plfa_plfa-part3-Compositional-12473" href="../Compositional/#plfa_plfa-part3-Compositional-12447" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12475" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12477" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a>
                         <a id="plfa_plfa-part3-Compositional-12504" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-12507" href="../Compositional/#plfa_plfa-part3-Compositional-12507" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12509" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12511" href="../Compositional/#plfa_plfa-part3-Compositional-12551" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12514" href="../Compositional/#plfa_plfa-part3-Compositional-12507" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-12516" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12517" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12523" href="../Compositional/#plfa_plfa-part3-Compositional-12444" class="Bound">d1</a><a id="plfa_plfa-part3-Compositional-12525" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12527" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12528" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-12534" href="../Compositional/#plfa_plfa-part3-Compositional-12447" class="Bound">d2</a><a id="plfa_plfa-part3-Compositional-12536" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12539" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Compositional-12543" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-12551" href="../Compositional/#plfa_plfa-part3-Compositional-12551" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12554" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12556" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-12558" href="../Compositional/#plfa_plfa-part3-Compositional-12558" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12560" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12562" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Compositional-12566" href="../Compositional/#plfa_plfa-part3-Compositional-12441" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12567" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12569" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12570" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-12572" href="../Compositional/#plfa_plfa-part3-Compositional-12572" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12575" href="../Compositional/#plfa_plfa-part3-Compositional-12575" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12579" href="../Compositional/#plfa_plfa-part3-Compositional-12579" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12582" href="../Compositional/#plfa_plfa-part3-Compositional-12582" class="Bound">D₂′</a> <a id="plfa_plfa-part3-Compositional-12586" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-12588" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-12599" href="../Compositional/#plfa_plfa-part3-Compositional-12441" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-12600" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Compositional-12606" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12608" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12609" href="../Compositional/#plfa_plfa-part3-Compositional-12572" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12612" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12614" href="../Compositional/#plfa_plfa-part3-Compositional-12579" class="Bound">D₂</a><a id="plfa_plfa-part3-Compositional-12616" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12618" href="../Compositional/#plfa_plfa-part3-Compositional-12558" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12620" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">v</a>  <a id="plfa_plfa-part3-Compositional-12623" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12626" href="../Compositional/#plfa_plfa-part3-Compositional-12572" class="Bound">D₁</a> <a id="plfa_plfa-part3-Compositional-12629" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12631" href="../Compositional/#plfa_plfa-part3-Compositional-12575" class="Bound">D₁′</a>  <a id="plfa_plfa-part3-Compositional-12636" class="Symbol">→</a>  <a id="plfa_plfa-part3-Compositional-12639" href="../Compositional/#plfa_plfa-part3-Compositional-12579" class="Bound">D₂</a> <a id="plfa_plfa-part3-Compositional-12642" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-12644" href="../Compositional/#plfa_plfa-part3-Compositional-12582" class="Bound">D₂′</a>
    <a id="plfa_plfa-part3-Compositional-12652" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-12654" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12655" href="../Compositional/#plfa_plfa-part3-Compositional-12575" class="Bound">D₁′</a> <a id="plfa_plfa-part3-Compositional-12659" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-12661" href="../Compositional/#plfa_plfa-part3-Compositional-12582" class="Bound">D₂′</a><a id="plfa_plfa-part3-Compositional-12664" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12666" href="../Compositional/#plfa_plfa-part3-Compositional-12558" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12668" href="../Compositional/#plfa_plfa-part3-Compositional-12569" class="Bound">v</a>
  <a id="plfa_plfa-part3-Compositional-12672" href="../Compositional/#plfa_plfa-part3-Compositional-12551" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12675" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12676" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12681" href="../Compositional/#plfa_plfa-part3-Compositional-12681" class="Bound">v⊑⊥</a><a id="plfa_plfa-part3-Compositional-12684" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12686" href="../Compositional/#plfa_plfa-part3-Compositional-12686" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12690" href="../Compositional/#plfa_plfa-part3-Compositional-12690" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12694" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-12696" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="plfa_plfa-part3-Compositional-12701" href="../Compositional/#plfa_plfa-part3-Compositional-12681" class="Bound">v⊑⊥</a>
  <a id="plfa_plfa-part3-Compositional-12707" href="../Compositional/#plfa_plfa-part3-Compositional-12551" class="Function">●≃</a> <a id="plfa_plfa-part3-Compositional-12710" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12711" href="../Compositional/#plfa_plfa-part3-Compositional-12711" class="Bound">γ</a><a id="plfa_plfa-part3-Compositional-12712" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12714" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-12715" href="../Compositional/#plfa_plfa-part3-Compositional-12715" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12716" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-12718" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12719" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12724" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12726" href="../Compositional/#plfa_plfa-part3-Compositional-12726" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12728" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12730" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12732" href="../Compositional/#plfa_plfa-part3-Compositional-12732" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12737" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12739" href="../Compositional/#plfa_plfa-part3-Compositional-12739" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12742" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12744" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-12745" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12747" href="../Compositional/#plfa_plfa-part3-Compositional-12747" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12751" href="../Compositional/#plfa_plfa-part3-Compositional-12751" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12755" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Compositional-12761" href="https://agda.github.io/agda-stdlib/v1.3/Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="plfa_plfa-part3-Compositional-12766" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12768" href="../Compositional/#plfa_plfa-part3-Compositional-12726" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12770" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12772" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-12774" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12780" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12781" href="../Compositional/#plfa_plfa-part3-Compositional-12747" class="Bound">eq₁</a> <a id="plfa_plfa-part3-Compositional-12785" href="../Compositional/#plfa_plfa-part3-Compositional-12711" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12787" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12788" href="../Compositional/#plfa_plfa-part3-Compositional-12726" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-12790" href="../Denotational/#plfa_plfa-part3-Denotational-4006" class="InductiveConstructor Operator">↦</a> <a id="plfa_plfa-part3-Compositional-12792" href="../Compositional/#plfa_plfa-part3-Compositional-12715" class="Bound">w</a><a id="plfa_plfa-part3-Compositional-12793" class="Symbol">))</a> <a id="plfa_plfa-part3-Compositional-12796" href="../Compositional/#plfa_plfa-part3-Compositional-12732" class="Bound">Dv↦w</a> <a id="plfa_plfa-part3-Compositional-12801" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-12803" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part3-Compositional-12809" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-12810" href="../Compositional/#plfa_plfa-part3-Compositional-12751" class="Bound">eq₂</a> <a id="plfa_plfa-part3-Compositional-12814" href="../Compositional/#plfa_plfa-part3-Compositional-12711" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-12816" href="../Compositional/#plfa_plfa-part3-Compositional-12726" class="Bound">v</a><a id="plfa_plfa-part3-Compositional-12817" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-12819" href="../Compositional/#plfa_plfa-part3-Compositional-12739" class="Bound">Dv</a> <a id="plfa_plfa-part3-Compositional-12822" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Compositional-12824" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
</pre><p>Again, both directions of the if-and-only-if are proved via a lemma. This time the lemma is proved by cases on <code>(D₁ ● D₂) γ v</code>.</p><p>With the congruence of <code>●</code>, we can prove that application is a congruence by direct equational reasoning.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-app-cong"></a><a id="plfa_plfa-part3-Compositional-13075" href="../Compositional/#plfa_plfa-part3-Compositional-13075" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-13084" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13086" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13088" href="../Compositional/#plfa_plfa-part3-Compositional-13088" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13089" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13091" href="../Compositional/#plfa_plfa-part3-Compositional-13091" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13093" href="../Compositional/#plfa_plfa-part3-Compositional-13093" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13096" href="../Compositional/#plfa_plfa-part3-Compositional-13096" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-13098" href="../Compositional/#plfa_plfa-part3-Compositional-13098" class="Bound">M′</a> <a id="plfa_plfa-part3-Compositional-13101" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13103" href="../Compositional/#plfa_plfa-part3-Compositional-13088" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13105" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-13107" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13108" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-13112" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13114" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13116" href="../Compositional/#plfa_plfa-part3-Compositional-13091" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13118" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13120" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13122" href="../Compositional/#plfa_plfa-part3-Compositional-13093" class="Bound">L′</a>
  <a id="plfa_plfa-part3-Compositional-13127" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13129" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13131" href="../Compositional/#plfa_plfa-part3-Compositional-13096" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-13133" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13135" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13137" href="../Compositional/#plfa_plfa-part3-Compositional-13098" class="Bound">M′</a>
    <a id="plfa_plfa-part3-Compositional-13144" class="Comment">-------------------------</a>
  <a id="plfa_plfa-part3-Compositional-13172" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13174" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13176" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13177" href="../Compositional/#plfa_plfa-part3-Compositional-13091" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13179" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13181" href="../Compositional/#plfa_plfa-part3-Compositional-13096" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13182" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13184" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-13186" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13188" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13189" href="../Compositional/#plfa_plfa-part3-Compositional-13093" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13192" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13194" href="../Compositional/#plfa_plfa-part3-Compositional-13098" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13196" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-13198" href="../Compositional/#plfa_plfa-part3-Compositional-13075" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-13207" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-13208" href="../Compositional/#plfa_plfa-part3-Compositional-13208" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13209" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13211" href="../Compositional/#plfa_plfa-part3-Compositional-13211" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-13212" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13214" href="../Compositional/#plfa_plfa-part3-Compositional-13214" class="Bound">L′</a><a id="plfa_plfa-part3-Compositional-13216" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13218" href="../Compositional/#plfa_plfa-part3-Compositional-13218" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13219" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-13221" href="../Compositional/#plfa_plfa-part3-Compositional-13221" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13223" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13225" href="../Compositional/#plfa_plfa-part3-Compositional-13225" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13230" href="../Compositional/#plfa_plfa-part3-Compositional-13230" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13235" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-13239" href="../Denotational/#plfa_plfa-part3-Denotational-19093" class="Function Operator">start</a>
    <a id="plfa_plfa-part3-Compositional-13249" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13251" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13252" href="../Compositional/#plfa_plfa-part3-Compositional-13211" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13254" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13256" href="../Compositional/#plfa_plfa-part3-Compositional-13218" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-13257" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13261" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13264" href="../Compositional/#plfa_plfa-part3-Compositional-9749" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13274" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13280" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13282" href="../Compositional/#plfa_plfa-part3-Compositional-13211" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-13284" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13286" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13288" href="../Compositional/#plfa_plfa-part3-Compositional-13218" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-13292" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13295" href="../Compositional/#plfa_plfa-part3-Compositional-12337" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-13302" href="../Compositional/#plfa_plfa-part3-Compositional-13225" class="Bound">L≅L′</a> <a id="plfa_plfa-part3-Compositional-13307" href="../Compositional/#plfa_plfa-part3-Compositional-13230" class="Bound">M≅M′</a> <a id="plfa_plfa-part3-Compositional-13312" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13318" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13320" href="../Compositional/#plfa_plfa-part3-Compositional-13214" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13323" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-13325" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13327" href="../Compositional/#plfa_plfa-part3-Compositional-13221" class="Bound">M′</a>
  <a id="plfa_plfa-part3-Compositional-13332" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-13335" href="../Denotational/#plfa_plfa-part3-Denotational-17871" class="Function">≃-sym</a> <a id="plfa_plfa-part3-Compositional-13341" href="../Compositional/#plfa_plfa-part3-Compositional-9749" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-13351" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-13357" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-13359" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13360" href="../Compositional/#plfa_plfa-part3-Compositional-13214" class="Bound">L′</a> <a id="plfa_plfa-part3-Compositional-13363" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-13365" href="../Compositional/#plfa_plfa-part3-Compositional-13221" class="Bound">M′</a><a id="plfa_plfa-part3-Compositional-13367" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-13371" href="../Denotational/#plfa_plfa-part3-Denotational-19431" class="Function Operator">☐</a>
</pre><h2 id="compositionality">Compositionality</h2><p>The <em>compositionality property</em> states that surrounding two terms that are denotationally equal in the same context produces two programs that are denotationally equal. To make this precise, we define what we mean by “context” and “surround”.</p><p>A <em>context</em> is a program with one hole in it. The following data definition <code>Ctx</code> makes this idea explicit. We index the <code>Ctx</code> data type with two contexts for variables: one for the hole and one for terms that result from filling the hole.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-13893" class="Keyword">data</a> <a id="plfa_plfa-part3-Compositional-Ctx"></a><a id="plfa_plfa-part3-Compositional-13898" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13902" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13904" href="../Untyped/#plfa_plfa-part2-Untyped-3093" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13912" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13914" href="../Untyped/#plfa_plfa-part2-Untyped-3093" class="Datatype">Context</a> <a id="plfa_plfa-part3-Compositional-13922" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13924" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part3-Compositional-13928" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-hole"></a><a id="plfa_plfa-part3-Compositional-13936" href="../Compositional/#plfa_plfa-part3-Compositional-13936" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-13945" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-13947" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13949" href="../Compositional/#plfa_plfa-part3-Compositional-13949" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-13950" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13952" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13954" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13958" href="../Compositional/#plfa_plfa-part3-Compositional-13949" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13960" href="../Compositional/#plfa_plfa-part3-Compositional-13949" class="Bound">Γ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-lam"></a><a id="plfa_plfa-part3-Compositional-13964" href="../Compositional/#plfa_plfa-part3-Compositional-13964" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-13972" class="Symbol">:</a>  <a id="plfa_plfa-part3-Compositional-13975" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-13977" href="../Compositional/#plfa_plfa-part3-Compositional-13977" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13979" href="../Compositional/#plfa_plfa-part3-Compositional-13979" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-13980" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-13982" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-13984" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-13988" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13989" href="../Compositional/#plfa_plfa-part3-Compositional-13977" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-13991" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-13993" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-13994" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-13996" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-13997" href="../Compositional/#plfa_plfa-part3-Compositional-13979" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-13999" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14001" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14002" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14004" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14006" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14010" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-14011" href="../Compositional/#plfa_plfa-part3-Compositional-13977" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14013" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-14015" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-14016" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-14018" href="../Compositional/#plfa_plfa-part3-Compositional-13979" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-L"></a><a id="plfa_plfa-part3-Compositional-14022" href="../Compositional/#plfa_plfa-part3-Compositional-14022" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-14032" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14034" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14036" href="../Compositional/#plfa_plfa-part3-Compositional-14036" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14038" href="../Compositional/#plfa_plfa-part3-Compositional-14038" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-14039" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14041" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14043" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14047" href="../Compositional/#plfa_plfa-part3-Compositional-14036" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14049" href="../Compositional/#plfa_plfa-part3-Compositional-14038" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14051" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14053" href="../Compositional/#plfa_plfa-part3-Compositional-14038" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14055" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14057" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-14059" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14061" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14065" href="../Compositional/#plfa_plfa-part3-Compositional-14036" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14067" href="../Compositional/#plfa_plfa-part3-Compositional-14038" class="Bound">Δ</a>
  <a id="plfa_plfa-part3-Compositional-Ctx.ctx-app-R"></a><a id="plfa_plfa-part3-Compositional-14071" href="../Compositional/#plfa_plfa-part3-Compositional-14071" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-14081" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14083" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14085" href="../Compositional/#plfa_plfa-part3-Compositional-14085" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14087" href="../Compositional/#plfa_plfa-part3-Compositional-14087" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-14088" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-14090" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14092" href="../Compositional/#plfa_plfa-part3-Compositional-14087" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14094" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-14096" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-14098" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14100" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14104" href="../Compositional/#plfa_plfa-part3-Compositional-14085" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14106" href="../Compositional/#plfa_plfa-part3-Compositional-14087" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-14108" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-14110" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-14114" href="../Compositional/#plfa_plfa-part3-Compositional-14085" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-14116" href="../Compositional/#plfa_plfa-part3-Compositional-14087" class="Bound">Δ</a>
</pre><ul><li><p>The constructor <code>ctx-hole</code> represents the hole, and in this case the variable context for the hole is the same as the variable context for the term that results from filling the hole.</p></li><li><p>The constructor <code>ctx-lam</code> takes a <code>Ctx</code> and produces a larger one that adds a lambda abstraction at the top. The variable context of the hole stays the same, whereas we remove one variable from the context of the resulting term because it is bound by this lambda abstraction.</p></li><li><p>There are two constructions for application, <code>ctx-app-L</code> and <code>ctx-app-R</code>. The <code>ctx-app-L</code> is for when the hole is inside the left-hand term (the operator) and the later is when the hole is inside the right-hand term (the operand).</p></li></ul><p>The action of surrounding a term with a context is defined by the following <code>plug</code> function. It is defined by recursion on the context.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-plug"></a><a id="plfa_plfa-part3-Compositional-14986" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-14991" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-14993" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-14995" href="../Compositional/#plfa_plfa-part3-Compositional-14995" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-14996" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-14998" href="../Compositional/#plfa_plfa-part3-Compositional-14998" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-14999" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15001" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15003" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-15007" href="../Compositional/#plfa_plfa-part3-Compositional-14995" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15009" href="../Compositional/#plfa_plfa-part3-Compositional-14998" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-15011" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15013" href="../Compositional/#plfa_plfa-part3-Compositional-14995" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15015" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15017" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Compositional-15019" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15021" href="../Compositional/#plfa_plfa-part3-Compositional-14998" class="Bound">Δ</a> <a id="plfa_plfa-part3-Compositional-15023" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15025" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a>
<a id="plfa_plfa-part3-Compositional-15027" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15032" href="../Compositional/#plfa_plfa-part3-Compositional-13936" class="InductiveConstructor">ctx-hole</a> <a id="plfa_plfa-part3-Compositional-15041" href="../Compositional/#plfa_plfa-part3-Compositional-15041" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15043" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15045" href="../Compositional/#plfa_plfa-part3-Compositional-15041" class="Bound">M</a>
<a id="plfa_plfa-part3-Compositional-15047" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15052" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15053" href="../Compositional/#plfa_plfa-part3-Compositional-13964" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-15061" href="../Compositional/#plfa_plfa-part3-Compositional-15061" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-15062" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15064" href="../Compositional/#plfa_plfa-part3-Compositional-15064" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15066" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15068" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-15070" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15075" href="../Compositional/#plfa_plfa-part3-Compositional-15061" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15077" href="../Compositional/#plfa_plfa-part3-Compositional-15064" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-15079" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15084" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15085" href="../Compositional/#plfa_plfa-part3-Compositional-14022" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-15095" href="../Compositional/#plfa_plfa-part3-Compositional-15095" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15097" href="../Compositional/#plfa_plfa-part3-Compositional-15097" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15098" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15100" href="../Compositional/#plfa_plfa-part3-Compositional-15100" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-15102" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15104" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15105" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15110" href="../Compositional/#plfa_plfa-part3-Compositional-15095" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15112" href="../Compositional/#plfa_plfa-part3-Compositional-15100" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-15113" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15115" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-15117" href="../Compositional/#plfa_plfa-part3-Compositional-15097" class="Bound">N</a>
<a id="plfa_plfa-part3-Compositional-15119" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15124" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15125" href="../Compositional/#plfa_plfa-part3-Compositional-14071" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-15135" href="../Compositional/#plfa_plfa-part3-Compositional-15135" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-15137" href="../Compositional/#plfa_plfa-part3-Compositional-15137" class="Bound">C</a><a id="plfa_plfa-part3-Compositional-15138" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15140" href="../Compositional/#plfa_plfa-part3-Compositional-15140" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15142" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15144" href="../Compositional/#plfa_plfa-part3-Compositional-15135" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-15146" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-15148" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15149" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15154" href="../Compositional/#plfa_plfa-part3-Compositional-15137" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15156" href="../Compositional/#plfa_plfa-part3-Compositional-15140" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-15157" class="Symbol">)</a>
</pre><p>We are ready to state and prove the compositionality principle. Given two terms <code>M</code> and <code>N</code> that are denotationally equal, plugging them both into an arbitrary context <code>C</code> produces two programs that are denotationally equal.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-compositionality"></a><a id="plfa_plfa-part3-Compositional-15399" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15416" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15418" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-15420" href="../Compositional/#plfa_plfa-part3-Compositional-15420" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15422" href="../Compositional/#plfa_plfa-part3-Compositional-15422" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15423" class="Symbol">}{</a><a id="plfa_plfa-part3-Compositional-15425" href="../Compositional/#plfa_plfa-part3-Compositional-15425" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15427" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15429" href="../Compositional/#plfa_plfa-part3-Compositional-13898" class="Datatype">Ctx</a> <a id="plfa_plfa-part3-Compositional-15433" href="../Compositional/#plfa_plfa-part3-Compositional-15420" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15435" href="../Compositional/#plfa_plfa-part3-Compositional-15422" class="Bound">Δ</a><a id="plfa_plfa-part3-Compositional-15436" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15438" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15439" href="../Compositional/#plfa_plfa-part3-Compositional-15439" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15441" href="../Compositional/#plfa_plfa-part3-Compositional-15441" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-15443" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-15445" href="../Compositional/#plfa_plfa-part3-Compositional-15420" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-15447" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-15449" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-15450" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Compositional-15454" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15456" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15458" href="../Compositional/#plfa_plfa-part3-Compositional-15439" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-15460" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15462" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15464" href="../Compositional/#plfa_plfa-part3-Compositional-15441" class="Bound">N</a>
    <a id="plfa_plfa-part3-Compositional-15470" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Compositional-15500" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15502" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15504" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15505" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15510" href="../Compositional/#plfa_plfa-part3-Compositional-15425" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15512" href="../Compositional/#plfa_plfa-part3-Compositional-15439" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-15513" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15515" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-15517" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-15519" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15520" href="../Compositional/#plfa_plfa-part3-Compositional-14986" class="Function">plug</a> <a id="plfa_plfa-part3-Compositional-15525" href="../Compositional/#plfa_plfa-part3-Compositional-15425" class="Bound">C</a> <a id="plfa_plfa-part3-Compositional-15527" href="../Compositional/#plfa_plfa-part3-Compositional-15441" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-15528" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15530" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15547" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15548" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15550" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15552" href="../Compositional/#plfa_plfa-part3-Compositional-13936" class="InductiveConstructor">ctx-hole</a><a id="plfa_plfa-part3-Compositional-15560" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15562" href="../Compositional/#plfa_plfa-part3-Compositional-15562" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15566" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15570" href="../Compositional/#plfa_plfa-part3-Compositional-15562" class="Bound">M≃N</a>
<a id="plfa_plfa-part3-Compositional-15574" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15591" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15592" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15594" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15596" href="../Compositional/#plfa_plfa-part3-Compositional-13964" class="InductiveConstructor">ctx-lam</a> <a id="plfa_plfa-part3-Compositional-15604" href="../Compositional/#plfa_plfa-part3-Compositional-15604" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15606" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15608" href="../Compositional/#plfa_plfa-part3-Compositional-15608" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15612" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15616" href="../Compositional/#plfa_plfa-part3-Compositional-11840" class="Function">lam-cong</a> <a id="plfa_plfa-part3-Compositional-15625" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15626" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15643" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15644" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15646" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15648" href="../Compositional/#plfa_plfa-part3-Compositional-15604" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15650" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15652" href="../Compositional/#plfa_plfa-part3-Compositional-15608" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15655" class="Symbol">)</a>
<a id="plfa_plfa-part3-Compositional-15657" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15674" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15675" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15677" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15679" href="../Compositional/#plfa_plfa-part3-Compositional-14022" class="InductiveConstructor">ctx-app-L</a> <a id="plfa_plfa-part3-Compositional-15689" href="../Compositional/#plfa_plfa-part3-Compositional-15689" class="Bound">C′</a> <a id="plfa_plfa-part3-Compositional-15692" href="../Compositional/#plfa_plfa-part3-Compositional-15692" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-15693" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15695" href="../Compositional/#plfa_plfa-part3-Compositional-15695" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15699" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15703" href="../Compositional/#plfa_plfa-part3-Compositional-13075" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15712" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15713" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15730" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15731" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15733" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15735" href="../Compositional/#plfa_plfa-part3-Compositional-15689" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15737" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15739" href="../Compositional/#plfa_plfa-part3-Compositional-15695" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15742" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15744" class="Symbol">λ</a> <a id="plfa_plfa-part3-Compositional-15746" href="../Compositional/#plfa_plfa-part3-Compositional-15746" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15748" href="../Compositional/#plfa_plfa-part3-Compositional-15748" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15750" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15752" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15754" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15757" href="../Compositional/#plfa_plfa-part3-Compositional-15757" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15759" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15761" href="../Compositional/#plfa_plfa-part3-Compositional-15757" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15762" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15764" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15766" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15769" href="../Compositional/#plfa_plfa-part3-Compositional-15769" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15771" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15773" href="../Compositional/#plfa_plfa-part3-Compositional-15769" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15774" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15776" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Compositional-15778" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15795" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15796" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15798" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15800" href="../Compositional/#plfa_plfa-part3-Compositional-14071" class="InductiveConstructor">ctx-app-R</a> <a id="plfa_plfa-part3-Compositional-15810" href="../Compositional/#plfa_plfa-part3-Compositional-15810" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-15812" href="../Compositional/#plfa_plfa-part3-Compositional-15812" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15814" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15816" href="../Compositional/#plfa_plfa-part3-Compositional-15816" class="Bound">M≃N</a> <a id="plfa_plfa-part3-Compositional-15820" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-15824" href="../Compositional/#plfa_plfa-part3-Compositional-13075" class="Function">app-cong</a> <a id="plfa_plfa-part3-Compositional-15833" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15836" href="../Compositional/#plfa_plfa-part3-Compositional-15836" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-15838" href="../Compositional/#plfa_plfa-part3-Compositional-15838" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-15840" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15842" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Compositional-15844" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15847" href="../Compositional/#plfa_plfa-part3-Compositional-15847" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15849" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15851" href="../Compositional/#plfa_plfa-part3-Compositional-15847" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15852" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15854" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Compositional-15856" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Compositional-15859" href="../Compositional/#plfa_plfa-part3-Compositional-15859" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-15861" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-15863" href="../Compositional/#plfa_plfa-part3-Compositional-15859" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-15864" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15866" href="../Compositional/#plfa_plfa-part3-Compositional-716" class="InductiveConstructor Operator">⟩</a><a id="plfa_plfa-part3-Compositional-15867" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-15869" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-15870" href="../Compositional/#plfa_plfa-part3-Compositional-15399" class="Function">compositionality</a> <a id="plfa_plfa-part3-Compositional-15887" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-15888" class="Argument">C</a> <a id="plfa_plfa-part3-Compositional-15890" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-15892" href="../Compositional/#plfa_plfa-part3-Compositional-15812" class="Bound">C′</a><a id="plfa_plfa-part3-Compositional-15894" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-15896" href="../Compositional/#plfa_plfa-part3-Compositional-15816" class="Bound">M≃N</a><a id="plfa_plfa-part3-Compositional-15899" class="Symbol">)</a>
</pre><p>The proof is a straightforward induction on the context <code>C</code>, using the congruence properties <code>lam-cong</code> and <code>app-cong</code> that we established above.</p><h2 id="the-denotational-semantics-defined-as-a-function">The denotational semantics defined as a function</h2><p>Having established the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code>, one should be able to define the denotational semantics as a recursive function over the input term <code>M</code>. Indeed, we define the following function <code>⟦ M ⟧</code> that maps terms to denotations, using the auxiliary curry <code>ℱ</code> and apply <code>●</code> functions in the cases for lambda and application, respectively.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-⟦_⟧"></a><a id="plfa_plfa-part3-Compositional-16492" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦_⟧</a> <a id="plfa_plfa-part3-Compositional-16496" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16498" class="Symbol">∀{</a><a id="plfa_plfa-part3-Compositional-16500" href="../Compositional/#plfa_plfa-part3-Compositional-16500" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16501" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16503" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16505" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16506" href="../Compositional/#plfa_plfa-part3-Compositional-16506" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16508" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16510" href="../Compositional/#plfa_plfa-part3-Compositional-16500" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16512" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16514" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16515" class="Symbol">)</a> <a id="plfa_plfa-part3-Compositional-16517" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16519" href="../Denotational/#plfa_plfa-part3-Denotational-17192" class="Function">Denotation</a> <a id="plfa_plfa-part3-Compositional-16530" href="../Compositional/#plfa_plfa-part3-Compositional-16500" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Compositional-16532" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16534" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16536" href="../Compositional/#plfa_plfa-part3-Compositional-16536" class="Bound">x</a> <a id="plfa_plfa-part3-Compositional-16538" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16540" href="../Compositional/#plfa_plfa-part3-Compositional-16540" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16542" href="../Compositional/#plfa_plfa-part3-Compositional-16542" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16544" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16546" href="../Compositional/#plfa_plfa-part3-Compositional-16542" class="Bound">v</a> <a id="plfa_plfa-part3-Compositional-16548" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">⊑</a> <a id="plfa_plfa-part3-Compositional-16550" href="../Compositional/#plfa_plfa-part3-Compositional-16540" class="Bound">γ</a> <a id="plfa_plfa-part3-Compositional-16552" href="../Compositional/#plfa_plfa-part3-Compositional-16536" class="Bound">x</a>
<a id="plfa_plfa-part3-Compositional-16554" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16556" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16558" href="../Compositional/#plfa_plfa-part3-Compositional-16558" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16560" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16562" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16564" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16566" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16568" href="../Compositional/#plfa_plfa-part3-Compositional-16558" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-16570" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16572" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16574" href="../Compositional/#plfa_plfa-part3-Compositional-16574" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16576" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-16578" href="../Compositional/#plfa_plfa-part3-Compositional-16578" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16580" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16582" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16584" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16586" href="../Compositional/#plfa_plfa-part3-Compositional-16574" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-16588" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-16590" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-16592" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16594" href="../Compositional/#plfa_plfa-part3-Compositional-16578" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16596" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a>
</pre><p>The proof that <code>ℰ M</code> is denotationally equal to <code>⟦ M ⟧</code> is a straightforward induction, using the three equations <code>var-equiv</code>, <code>lam-equiv</code>, and <code>app-equiv</code> together with the congruence lemmas for <code>ℱ</code> and <code>●</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Compositional-ℰ≃⟦⟧"></a><a id="plfa_plfa-part3-Compositional-16821" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16826" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16828" class="Symbol">∀</a> <a id="plfa_plfa-part3-Compositional-16830" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16831" href="../Compositional/#plfa_plfa-part3-Compositional-16831" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16832" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16834" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16835" href="../Compositional/#plfa_plfa-part3-Compositional-16835" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16837" class="Symbol">:</a> <a id="plfa_plfa-part3-Compositional-16839" href="../Compositional/#plfa_plfa-part3-Compositional-16831" class="Bound">Γ</a> <a id="plfa_plfa-part3-Compositional-16841" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Compositional-16843" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Compositional-16844" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16846" class="Symbol">→</a> <a id="plfa_plfa-part3-Compositional-16848" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16850" href="../Compositional/#plfa_plfa-part3-Compositional-16835" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16852" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Compositional-16854" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-16856" href="../Compositional/#plfa_plfa-part3-Compositional-16835" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-16858" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a>
<a id="plfa_plfa-part3-Compositional-16860" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16865" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16866" href="../Compositional/#plfa_plfa-part3-Compositional-16866" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16867" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16869" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16870" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Compositional-16872" href="../Compositional/#plfa_plfa-part3-Compositional-16872" class="Bound">x</a><a id="plfa_plfa-part3-Compositional-16873" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16875" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16877" href="../Compositional/#plfa_plfa-part3-Compositional-10328" class="Function">var-equiv</a>
<a id="plfa_plfa-part3-Compositional-16887" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16892" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16893" href="../Compositional/#plfa_plfa-part3-Compositional-16893" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-16894" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16896" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16897" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16899" href="../Compositional/#plfa_plfa-part3-Compositional-16899" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16900" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16902" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Compositional-16906" class="Keyword">let</a> <a id="plfa_plfa-part3-Compositional-16910" href="../Compositional/#plfa_plfa-part3-Compositional-16910" class="Bound">ih</a> <a id="plfa_plfa-part3-Compositional-16913" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16915" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16920" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16921" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16923" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16925" href="../Compositional/#plfa_plfa-part3-Compositional-16899" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16926" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-16928" class="Keyword">in</a>
    <a id="plfa_plfa-part3-Compositional-16935" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16937" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16938" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-16940" href="../Compositional/#plfa_plfa-part3-Compositional-16899" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16941" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16945" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16948" href="../Compositional/#plfa_plfa-part3-Compositional-4515" class="Function">lam-equiv</a> <a id="plfa_plfa-part3-Compositional-16958" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-16964" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-16966" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16967" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-16969" href="../Compositional/#plfa_plfa-part3-Compositional-16899" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16970" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-16974" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-16977" href="../Compositional/#plfa_plfa-part3-Compositional-11162" class="Function">ℱ-cong</a> <a id="plfa_plfa-part3-Compositional-16984" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-16985" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-16990" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-16991" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-16993" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-16995" href="../Compositional/#plfa_plfa-part3-Compositional-16899" class="Bound">N</a><a id="plfa_plfa-part3-Compositional-16996" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-16999" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
    <a id="plfa_plfa-part3-Compositional-17005" href="../Compositional/#plfa_plfa-part3-Compositional-1840" class="Function">ℱ</a> <a id="plfa_plfa-part3-Compositional-17007" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-17009" href="../Compositional/#plfa_plfa-part3-Compositional-16899" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-17011" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-17015" href="../Denotational/#plfa_plfa-part3-Denotational-19324" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-17023" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-17025" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Compositional-17027" href="../Compositional/#plfa_plfa-part3-Compositional-16899" class="Bound">N</a> <a id="plfa_plfa-part3-Compositional-17029" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-17033" href="../Denotational/#plfa_plfa-part3-Denotational-19431" class="Function Operator">☐</a>
<a id="plfa_plfa-part3-Compositional-17035" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-17040" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-17041" href="../Compositional/#plfa_plfa-part3-Compositional-17041" class="Bound">Γ</a><a id="plfa_plfa-part3-Compositional-17042" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17044" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-17045" href="../Compositional/#plfa_plfa-part3-Compositional-17045" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-17047" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-17049" href="../Compositional/#plfa_plfa-part3-Compositional-17049" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-17050" class="Symbol">}</a> <a id="plfa_plfa-part3-Compositional-17052" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Compositional-17057" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-17059" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17060" href="../Compositional/#plfa_plfa-part3-Compositional-17045" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-17062" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-17064" href="../Compositional/#plfa_plfa-part3-Compositional-17049" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-17065" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Compositional-17069" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-17072" href="../Compositional/#plfa_plfa-part3-Compositional-9749" class="Function">app-equiv</a> <a id="plfa_plfa-part3-Compositional-17082" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-17087" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-17089" href="../Compositional/#plfa_plfa-part3-Compositional-17045" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-17091" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-17093" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Compositional-17095" href="../Compositional/#plfa_plfa-part3-Compositional-17049" class="Bound">M</a>
  <a id="plfa_plfa-part3-Compositional-17099" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">≃⟨</a> <a id="plfa_plfa-part3-Compositional-17102" href="../Compositional/#plfa_plfa-part3-Compositional-12337" class="Function">●-cong</a> <a id="plfa_plfa-part3-Compositional-17109" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17110" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-17115" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-17116" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-17118" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-17120" href="../Compositional/#plfa_plfa-part3-Compositional-17045" class="Bound">L</a><a id="plfa_plfa-part3-Compositional-17121" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-17124" class="Symbol">(</a><a id="plfa_plfa-part3-Compositional-17125" href="../Compositional/#plfa_plfa-part3-Compositional-16821" class="Function">ℰ≃⟦⟧</a> <a id="plfa_plfa-part3-Compositional-17130" class="Symbol">{</a><a id="plfa_plfa-part3-Compositional-17131" class="Argument">M</a> <a id="plfa_plfa-part3-Compositional-17133" class="Symbol">=</a> <a id="plfa_plfa-part3-Compositional-17135" href="../Compositional/#plfa_plfa-part3-Compositional-17049" class="Bound">M</a><a id="plfa_plfa-part3-Compositional-17136" class="Symbol">})</a> <a id="plfa_plfa-part3-Compositional-17139" href="../Denotational/#plfa_plfa-part3-Denotational-19184" class="Function Operator">⟩</a>
   <a id="plfa_plfa-part3-Compositional-17144" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-17146" href="../Compositional/#plfa_plfa-part3-Compositional-17045" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-17148" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a> <a id="plfa_plfa-part3-Compositional-17150" href="../Compositional/#plfa_plfa-part3-Compositional-5712" class="Function Operator">●</a> <a id="plfa_plfa-part3-Compositional-17152" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-17154" href="../Compositional/#plfa_plfa-part3-Compositional-17049" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-17156" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-17160" href="../Denotational/#plfa_plfa-part3-Denotational-19324" class="Function Operator">≃⟨⟩</a>
    <a id="plfa_plfa-part3-Compositional-17168" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟦</a> <a id="plfa_plfa-part3-Compositional-17170" href="../Compositional/#plfa_plfa-part3-Compositional-17045" class="Bound">L</a> <a id="plfa_plfa-part3-Compositional-17172" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Compositional-17174" href="../Compositional/#plfa_plfa-part3-Compositional-17049" class="Bound">M</a> <a id="plfa_plfa-part3-Compositional-17176" href="../Compositional/#plfa_plfa-part3-Compositional-16492" class="Function Operator">⟧</a>
  <a id="plfa_plfa-part3-Compositional-17180" href="../Denotational/#plfa_plfa-part3-Denotational-19431" class="Function Operator">☐</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>ℱ  U+2131  SCRIPT CAPITAL F (\McF)
●  U+2131  BLACK CIRCLE (\cib)</code></pre></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Denotational/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Compositional.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Soundness/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works">me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#twitter"></use></svg>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#twitter"></use></svg>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>