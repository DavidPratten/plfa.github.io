<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/style.css"><title>Programming Language Foundations in Agda – Subtyping</title></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav"><span class="menu-icon"><svg viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Subtyping.lagda.md">Source</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Subtyping: Records</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-75" class="Keyword">module</a> <a id="plfa_plfa-part2-Subtyping-82" href="../Subtyping/#" class="Module">plfa.part2.Subtyping</a> <a id="plfa_plfa-part2-Subtyping-103" class="Keyword">where</a>
</pre><p>This chapter introduces <em>subtyping</em>, a concept that plays an important role in object-oriented languages. Subtyping enables code to be more reusable by allowing it to work on objects of many different types. Thus, subtyping provides a kind of polymorphism. In general, a type <code>A</code> can be a subtype of another type <code>B</code>, written <code>A &lt;: B</code>, when an object of type <code>A</code> has all the capabilities expected of something of type <code>B</code>. Or put another way, a type <code>A</code> can be a subtype of type <code>B</code> when it is safe to substitute something of type <code>A</code> into code that expects something of type <code>B</code>. This is know as the <em>Liskov Substitution Principle</em>. Given this semantic meaning of subtyping, a subtype relation should always be reflexive and transitive. When <code>A</code> is a subtype of <code>B</code>, that is, <code>A &lt;: B</code>, we may also refer to <code>B</code> as a supertype of <code>A</code>.</p><p>To formulate a type system for a language with subtyping, one simply adds the <em>subsumption rule</em>, which states that a term of type <code>A</code> can also have type <code>B</code> if <code>A</code> is a subtype of <code>B</code>.</p><pre><code>⊢&lt;: : ∀{Γ M A B}
  → Γ ⊢ M ⦂ A
→ A &lt;: B
    -----------
  → Γ ⊢ M ⦂ B</code></pre><p>In this chapter we study subtyping in the relatively simple context of records and record types. A <em>record</em> is a grouping of named values, called <em>fields</em>. For example, one could represent a point on the Cartesian plane with the following record.</p><pre><code>{ x = 4, y = 1 }</code></pre><p>A <em>record type</em> gives a type for each field. In the following, we specify that the fields <code>x</code> and <code>y</code> both have type <code>ℕ</code>.</p><pre><code>{ x : `ℕ,  y : `ℕ }</code></pre><p>One record type is a subtype of another if it has all of the fields of the supertype and if the types of those fields are subtypes of the corresponding fields in the supertype. So, for example, a point in three dimensions is a subtype of a point in two dimensions.</p><pre><code>{ x : `ℕ,  y : `ℕ, z : `ℕ } &lt;: { x : `ℕ,  y : `ℕ }</code></pre><p>The elimination form for records is field access (aka. projection), written <code>M # l</code>, and whose dynamic semantics is defined by the following reduction rule, which says that accessing the field <code>lⱼ</code> returns the value stored at that field.</p><pre><code>{l₁=v₁, ..., lⱼ=vⱼ, ..., lᵢ=vᵢ} # lⱼ —→  vⱼ</code></pre><p>In this chapter we add records and record types to the simply typed lambda calculus (STLC) and prove type safety. It is instructive to see how the proof of type safety changes to handle subtyping. Also, the presence of subtyping makes the choice between extrinsic and intrinsic typing more interesting by. If we wish to include the subsumption rule, then we cannot use intrinsically typed terms, as intrinsic terms only allow for syntax-directed rules, and subsumption is not syntax directed. A standard alternative to the subsumption rule is to instead use subtyping in the typing rules for the elimination forms, an approach called algorithmic typing. Here we choose to include the subsumption rule and extrinsic typing, but we give an exercise at the end of the chapter so the reader can explore algorithmic typing with intrinsic terms.</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-3122" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3127" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3134" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html" class="Module">Data.Empty</a> <a id="plfa_plfa-part2-Subtyping-3145" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3151" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3152" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#526" class="Datatype">⊥</a><a id="plfa_plfa-part2-Subtyping-3153" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3155" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a><a id="plfa_plfa-part2-Subtyping-3161" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3163" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3168" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3175" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.Irrelevant.html" class="Module">Data.Empty.Irrelevant</a> <a id="plfa_plfa-part2-Subtyping-3197" class="Keyword">renaming</a> <a id="plfa_plfa-part2-Subtyping-3206" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3207" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.Irrelevant.html#327" class="Function">⊥-elim</a> <a id="plfa_plfa-part2-Subtyping-3214" class="Symbol">to</a> <a id="plfa_plfa-part2-Subtyping-3217" class="Function">⊥-elimi</a><a id="plfa_plfa-part2-Subtyping-3224" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3226" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3231" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3238" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.html" class="Module">Data.Fin</a> <a id="plfa_plfa-part2-Subtyping-3247" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3253" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3254" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a><a id="plfa_plfa-part2-Subtyping-3257" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3259" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-3263" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3265" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a><a id="plfa_plfa-part2-Subtyping-3268" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3270" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3275" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3282" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.html" class="Module">Data.Nat</a> <a id="plfa_plfa-part2-Subtyping-3291" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3297" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3298" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part2-Subtyping-3299" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3301" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-3305" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3307" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="plfa_plfa-part2-Subtyping-3310" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3312" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#937" class="Datatype Operator">_≤_</a><a id="plfa_plfa-part2-Subtyping-3315" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3317" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a><a id="plfa_plfa-part2-Subtyping-3320" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3322" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1002" class="InductiveConstructor">s≤s</a><a id="plfa_plfa-part2-Subtyping-3325" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3327" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1047" class="Function Operator">_&lt;_</a><a id="plfa_plfa-part2-Subtyping-3330" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3332" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="plfa_plfa-part2-Subtyping-3335" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3337" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3342" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3349" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>
    <a id="plfa_plfa-part2-Subtyping-3373" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3379" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3380" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#16906" class="Function">m+n≤o⇒m≤o</a><a id="plfa_plfa-part2-Subtyping-3389" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3391" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#17041" class="Function">m+n≤o⇒n≤o</a><a id="plfa_plfa-part2-Subtyping-3400" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3402" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#6324" class="Function">n≤0⇒n≡0</a><a id="plfa_plfa-part2-Subtyping-3409" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3411" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3448" class="Function">≤-pred</a><a id="plfa_plfa-part2-Subtyping-3417" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3419" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3725" class="Function">≤-refl</a><a id="plfa_plfa-part2-Subtyping-3425" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3427" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3908" class="Function">≤-trans</a><a id="plfa_plfa-part2-Subtyping-3434" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3436" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#16464" class="Function">m≤m+n</a><a id="plfa_plfa-part2-Subtyping-3441" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3443" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#65767" class="Function">n≤m+n</a><a id="plfa_plfa-part2-Subtyping-3448" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3450" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3455" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3462" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part2-Subtyping-3475" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3481" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3482" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part2-Subtyping-3485" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3487" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="plfa_plfa-part2-Subtyping-3492" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3494" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="plfa_plfa-part2-Subtyping-3499" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3501" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part2-Subtyping-3509" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-3511" class="Keyword">renaming</a> <a id="plfa_plfa-part2-Subtyping-3520" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3521" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part2-Subtyping-3525" class="Symbol">to</a> <a id="plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part2-Subtyping-3533" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3535" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3540" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3547" href="https://agda.github.io/agda-stdlib/v1.3/Data.String.html" class="Module">Data.String</a> <a id="plfa_plfa-part2-Subtyping-3559" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3565" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3566" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.String.html#336" class="Postulate">String</a><a id="plfa_plfa-part2-Subtyping-3572" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3574" href="https://agda.github.io/agda-stdlib/v1.3/Data.String.Properties.html#2409" class="Function Operator">_≟_</a><a id="plfa_plfa-part2-Subtyping-3577" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3579" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3584" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3591" href="https://agda.github.io/agda-stdlib/v1.3/Data.Unit.html" class="Module">Data.Unit</a> <a id="plfa_plfa-part2-Subtyping-3601" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3607" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3608" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="plfa_plfa-part2-Subtyping-3609" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3611" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="plfa_plfa-part2-Subtyping-3613" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3615" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3620" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3627" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.html" class="Module">Data.Vec</a> <a id="plfa_plfa-part2-Subtyping-3636" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3642" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3643" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a><a id="plfa_plfa-part2-Subtyping-3646" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3648" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a><a id="plfa_plfa-part2-Subtyping-3650" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3652" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">_∷_</a><a id="plfa_plfa-part2-Subtyping-3655" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3657" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a><a id="plfa_plfa-part2-Subtyping-3663" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3665" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3670" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3677" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Propositional.html" class="Module">Data.Vec.Membership.Propositional</a> <a id="plfa_plfa-part2-Subtyping-3711" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3717" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3718" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Setoid.html#829" class="Function Operator">_∈_</a><a id="plfa_plfa-part2-Subtyping-3721" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3723" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3728" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3735" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.DecPropositional.html" class="Module">Data.Vec.Membership.DecPropositional</a> <a id="plfa_plfa-part2-Subtyping-3772" href="https://agda.github.io/agda-stdlib/v1.3/Data.String.Properties.html#2409" class="Function Operator">_≟_</a> <a id="plfa_plfa-part2-Subtyping-3776" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3782" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3783" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.DecSetoid.html#839" class="Function Operator">_∈?_</a><a id="plfa_plfa-part2-Subtyping-3787" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3789" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3794" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3801" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Propositional.Properties.html" class="Module">Data.Vec.Membership.Propositional.Properties</a> <a id="plfa_plfa-part2-Subtyping-3846" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3852" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3853" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Propositional.Properties.html#1175" class="Function">∈-lookup</a><a id="plfa_plfa-part2-Subtyping-3861" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3863" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3868" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3875" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Relation.Unary.Any.html" class="Module">Data.Vec.Relation.Unary.Any</a> <a id="plfa_plfa-part2-Subtyping-3903" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3909" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3910" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Relation.Unary.Any.html#1060" class="InductiveConstructor">here</a><a id="plfa_plfa-part2-Subtyping-3914" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3916" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Relation.Unary.Any.html#1127" class="InductiveConstructor">there</a><a id="plfa_plfa-part2-Subtyping-3921" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-3923" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-3930" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="plfa_plfa-part2-Subtyping-3968" class="Symbol">as</a> <a id="plfa_plfa-part2-Subtyping-3971" class="Module">Eq</a>
<a id="plfa_plfa-part2-Subtyping-3974" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-3979" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="plfa_plfa-part2-Subtyping-3982" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-3988" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-3989" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part2-Subtyping-3992" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-3994" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Subtyping-3998" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-4000" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a><a id="plfa_plfa-part2-Subtyping-4003" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-4005" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a><a id="plfa_plfa-part2-Subtyping-4010" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-4012" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a><a id="plfa_plfa-part2-Subtyping-4016" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-4018" class="Keyword">open</a> <a id="plfa_plfa-part2-Subtyping-4023" class="Keyword">import</a> <a id="plfa_plfa-part2-Subtyping-4030" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part2-Subtyping-4047" class="Keyword">using</a> <a id="plfa_plfa-part2-Subtyping-4053" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-4054" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a><a id="plfa_plfa-part2-Subtyping-4057" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-4059" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="plfa_plfa-part2-Subtyping-4062" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-4064" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="plfa_plfa-part2-Subtyping-4066" class="Symbol">;</a> <a id="plfa_plfa-part2-Subtyping-4068" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬_</a><a id="plfa_plfa-part2-Subtyping-4070" class="Symbol">)</a>
</pre><h2 id="syntax">Syntax</h2><p>The syntax includes that of the STLC with a few additions regarding records that we explain in the following sections.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-4216" class="Keyword">infixl</a> <a id="plfa_plfa-part2-Subtyping-4223" class="Number">5</a> <a id="plfa_plfa-part2-Subtyping-4225" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">_,_</a>
<a id="plfa_plfa-part2-Subtyping-4229" class="Keyword">infix</a> <a id="plfa_plfa-part2-Subtyping-4235" class="Number">4</a> <a id="plfa_plfa-part2-Subtyping-4237" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">_⊆_</a>
<a id="plfa_plfa-part2-Subtyping-4241" class="Keyword">infix</a> <a id="plfa_plfa-part2-Subtyping-4247" class="Number">5</a> <a id="plfa_plfa-part2-Subtyping-4249" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">_&lt;:_</a>
<a id="plfa_plfa-part2-Subtyping-4254" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Subtyping-4261" class="Number">4</a> <a id="plfa_plfa-part2-Subtyping-4263" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">_⊢_⦂_</a>
<a id="plfa_plfa-part2-Subtyping-4269" class="Keyword">infix</a> <a id="plfa_plfa-part2-Subtyping-4275" class="Number">4</a> <a id="plfa_plfa-part2-Subtyping-4277" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">_⊢*_⦂_</a>
<a id="plfa_plfa-part2-Subtyping-4284" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Subtyping-4291" class="Number">4</a> <a id="plfa_plfa-part2-Subtyping-4293" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">_∋_⦂_</a>
<a id="plfa_plfa-part2-Subtyping-4299" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Subtyping-4306" class="Number">4</a> <a id="plfa_plfa-part2-Subtyping-4308" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical_⦂_</a>

<a id="plfa_plfa-part2-Subtyping-4322" class="Keyword">infixr</a> <a id="plfa_plfa-part2-Subtyping-4329" class="Number">7</a> <a id="plfa_plfa-part2-Subtyping-4331" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">_⇒_</a>

<a id="plfa_plfa-part2-Subtyping-4336" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Subtyping-4343" class="Number">5</a> <a id="plfa_plfa-part2-Subtyping-4345" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ_</a>
<a id="plfa_plfa-part2-Subtyping-4348" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Subtyping-4355" class="Number">5</a> <a id="plfa_plfa-part2-Subtyping-4357" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ_</a>
<a id="plfa_plfa-part2-Subtyping-4360" class="Keyword">infixl</a> <a id="plfa_plfa-part2-Subtyping-4367" class="Number">7</a> <a id="plfa_plfa-part2-Subtyping-4369" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">_·_</a>
<a id="plfa_plfa-part2-Subtyping-4373" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Subtyping-4380" class="Number">8</a> <a id="plfa_plfa-part2-Subtyping-4382" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc_</a>
<a id="plfa_plfa-part2-Subtyping-4388" class="Keyword">infix</a>  <a id="plfa_plfa-part2-Subtyping-4395" class="Number">9</a> <a id="plfa_plfa-part2-Subtyping-4397" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`_</a>
<a id="plfa_plfa-part2-Subtyping-4400" class="Keyword">infixl</a> <a id="plfa_plfa-part2-Subtyping-4407" class="Number">7</a> <a id="plfa_plfa-part2-Subtyping-4409" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">_#_</a>
<a id="plfa_plfa-part2-Subtyping-4413" class="Keyword">infix</a> <a id="plfa_plfa-part2-Subtyping-4419" class="Number">5</a> <a id="plfa_plfa-part2-Subtyping-4421" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛_⦂_｝</a>
<a id="plfa_plfa-part2-Subtyping-4427" class="Keyword">infix</a> <a id="plfa_plfa-part2-Subtyping-4433" class="Number">5</a> <a id="plfa_plfa-part2-Subtyping-4435" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛_:=_｝</a>

<a id="plfa_plfa-part2-Subtyping-4443" class="Keyword">infix</a> <a id="plfa_plfa-part2-Subtyping-4449" class="Number">5</a> <a id="plfa_plfa-part2-Subtyping-4451" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">_[_]</a>
<a id="plfa_plfa-part2-Subtyping-4456" class="Keyword">infix</a> <a id="plfa_plfa-part2-Subtyping-4462" class="Number">2</a> <a id="plfa_plfa-part2-Subtyping-4464" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">_—→_</a>
</pre><h2 id="record-fields-and-their-properties">Record Fields and their Properties</h2><p>We represent field names as strings.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-Name"></a><a id="plfa_plfa-part2-Subtyping-4559" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-4564" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-4566" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Subtyping-4570" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-4575" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-4577" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.String.html#336" class="Postulate">String</a>
</pre><p>A record is traditionally written as follows</p><pre><code>{ l₁ = M₁, ..., lᵢ = Mᵢ }</code></pre><p>so a natural representation is a list of label-term pairs. However, we find it more convenient to represent records as a pair of vectors (Agda’s <code>Vec</code> type), one vector of fields and one vector of terms:</p><pre><code>l₁, ..., lᵢ
M₁, ..., Mᵢ</code></pre><p>This representation has the advantage that the traditional subscript notation <code>lᵢ</code> corresponds to indexing into a vector.</p><p>Likewise, a record type, traditionally written as</p><pre><code>{ l₁ : A₁, ..., lᵢ : Aᵢ }</code></pre><p>will be represented as a pair of vectors, one vector of fields and one vector of types.</p><pre><code>l₁, ..., lᵢ
A₁, ..., Aᵢ</code></pre>The field names of a record type must be distinct, which we define as follows.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-distinct"></a><a id="plfa_plfa-part2-Subtyping-5318" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-5327" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-5329" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-5331" href="../Subtyping/#plfa_plfa-part2-Subtyping-5331" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-5333" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-5335" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a><a id="plfa_plfa-part2-Subtyping-5338" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-5340" href="../Subtyping/#plfa_plfa-part2-Subtyping-5340" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-5341" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5343" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-5345" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-5349" href="../Subtyping/#plfa_plfa-part2-Subtyping-5331" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-5351" href="../Subtyping/#plfa_plfa-part2-Subtyping-5340" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-5353" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-5355" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Subtyping-5359" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-5368" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="plfa_plfa-part2-Subtyping-5371" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-5373" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#164" class="Record">⊤</a>
<a id="plfa_plfa-part2-Subtyping-5375" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-5384" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-5385" href="../Subtyping/#plfa_plfa-part2-Subtyping-5385" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-5387" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-5389" href="../Subtyping/#plfa_plfa-part2-Subtyping-5389" class="Bound">xs</a><a id="plfa_plfa-part2-Subtyping-5391" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-5393" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-5395" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="plfa_plfa-part2-Subtyping-5397" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-5398" href="../Subtyping/#plfa_plfa-part2-Subtyping-5385" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-5400" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Setoid.html#829" class="Function Operator">∈</a> <a id="plfa_plfa-part2-Subtyping-5402" href="../Subtyping/#plfa_plfa-part2-Subtyping-5389" class="Bound">xs</a><a id="plfa_plfa-part2-Subtyping-5404" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-5406" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part2-Subtyping-5408" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-5417" href="../Subtyping/#plfa_plfa-part2-Subtyping-5389" class="Bound">xs</a>
</pre>For vectors of distinct elements, lookup is injective.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-distinct-lookup-inj"></a><a id="plfa_plfa-part2-Subtyping-5488" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-5508" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-5510" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-5512" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5513" href="../Subtyping/#plfa_plfa-part2-Subtyping-5513" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-5514" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-5516" href="../Subtyping/#plfa_plfa-part2-Subtyping-5516" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-5519" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-5521" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-5525" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-5530" href="../Subtyping/#plfa_plfa-part2-Subtyping-5513" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-5531" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-5533" href="../Subtyping/#plfa_plfa-part2-Subtyping-5533" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-5535" href="../Subtyping/#plfa_plfa-part2-Subtyping-5535" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-5537" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-5539" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-5543" href="../Subtyping/#plfa_plfa-part2-Subtyping-5513" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-5544" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Subtyping-5549" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-5551" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-5560" href="../Subtyping/#plfa_plfa-part2-Subtyping-5516" class="Bound">ls</a>  <a id="plfa_plfa-part2-Subtyping-5564" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-5567" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-5574" href="../Subtyping/#plfa_plfa-part2-Subtyping-5516" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-5577" href="../Subtyping/#plfa_plfa-part2-Subtyping-5533" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-5579" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-5581" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-5588" href="../Subtyping/#plfa_plfa-part2-Subtyping-5516" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-5591" href="../Subtyping/#plfa_plfa-part2-Subtyping-5535" class="Bound">j</a>
   <a id="plfa_plfa-part2-Subtyping-5596" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-5598" href="../Subtyping/#plfa_plfa-part2-Subtyping-5533" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-5600" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-5602" href="../Subtyping/#plfa_plfa-part2-Subtyping-5535" class="Bound">j</a>
<a id="plfa_plfa-part2-Subtyping-5604" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-5624" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5625" class="Argument">ls</a> <a id="plfa_plfa-part2-Subtyping-5628" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-5630" href="../Subtyping/#plfa_plfa-part2-Subtyping-5630" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-5632" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-5634" href="../Subtyping/#plfa_plfa-part2-Subtyping-5634" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-5636" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5638" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5639" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-5643" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5645" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5646" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-5650" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5652" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-5654" href="../Subtyping/#plfa_plfa-part2-Subtyping-5654" class="Bound">x∉ls</a> <a id="plfa_plfa-part2-Subtyping-5659" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-5661" href="../Subtyping/#plfa_plfa-part2-Subtyping-5661" class="Bound">dls</a> <a id="plfa_plfa-part2-Subtyping-5665" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Subtyping-5667" href="../Subtyping/#plfa_plfa-part2-Subtyping-5667" class="Bound">lsij</a> <a id="plfa_plfa-part2-Subtyping-5672" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-5674" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Subtyping-5679" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-5699" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5700" class="Argument">ls</a> <a id="plfa_plfa-part2-Subtyping-5703" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-5705" href="../Subtyping/#plfa_plfa-part2-Subtyping-5705" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-5707" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-5709" href="../Subtyping/#plfa_plfa-part2-Subtyping-5709" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-5711" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5713" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5714" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-5718" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5720" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5721" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-5725" href="../Subtyping/#plfa_plfa-part2-Subtyping-5725" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-5726" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5728" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-5730" href="../Subtyping/#plfa_plfa-part2-Subtyping-5730" class="Bound">x∉ls</a> <a id="plfa_plfa-part2-Subtyping-5735" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-5737" href="../Subtyping/#plfa_plfa-part2-Subtyping-5737" class="Bound">dls</a> <a id="plfa_plfa-part2-Subtyping-5741" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Subtyping-5743" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Subtyping-5748" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-5754" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="plfa_plfa-part2-Subtyping-5761" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-5762" href="../Subtyping/#plfa_plfa-part2-Subtyping-5730" class="Bound">x∉ls</a> <a id="plfa_plfa-part2-Subtyping-5767" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-5768" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Propositional.Properties.html#1175" class="Function">∈-lookup</a> <a id="plfa_plfa-part2-Subtyping-5777" href="../Subtyping/#plfa_plfa-part2-Subtyping-5725" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-5779" href="../Subtyping/#plfa_plfa-part2-Subtyping-5709" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-5781" class="Symbol">))</a>
<a id="plfa_plfa-part2-Subtyping-5784" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-5804" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5805" class="Argument">ls</a> <a id="plfa_plfa-part2-Subtyping-5808" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-5810" href="../Subtyping/#plfa_plfa-part2-Subtyping-5810" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-5812" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-5814" href="../Subtyping/#plfa_plfa-part2-Subtyping-5814" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-5816" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5818" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5819" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-5823" href="../Subtyping/#plfa_plfa-part2-Subtyping-5823" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-5824" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5826" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5827" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-5831" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5833" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-5835" href="../Subtyping/#plfa_plfa-part2-Subtyping-5835" class="Bound">x∉ls</a> <a id="plfa_plfa-part2-Subtyping-5840" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-5842" href="../Subtyping/#plfa_plfa-part2-Subtyping-5842" class="Bound">dls</a> <a id="plfa_plfa-part2-Subtyping-5846" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Subtyping-5848" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Subtyping-5853" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-5859" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="plfa_plfa-part2-Subtyping-5866" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-5867" href="../Subtyping/#plfa_plfa-part2-Subtyping-5835" class="Bound">x∉ls</a> <a id="plfa_plfa-part2-Subtyping-5872" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-5873" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Propositional.Properties.html#1175" class="Function">∈-lookup</a> <a id="plfa_plfa-part2-Subtyping-5882" href="../Subtyping/#plfa_plfa-part2-Subtyping-5823" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-5884" href="../Subtyping/#plfa_plfa-part2-Subtyping-5814" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-5886" class="Symbol">))</a>
<a id="plfa_plfa-part2-Subtyping-5889" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-5909" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5910" class="Argument">ls</a> <a id="plfa_plfa-part2-Subtyping-5913" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-5915" href="../Subtyping/#plfa_plfa-part2-Subtyping-5915" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-5917" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-5919" href="../Subtyping/#plfa_plfa-part2-Subtyping-5919" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-5921" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5923" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5924" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-5928" href="../Subtyping/#plfa_plfa-part2-Subtyping-5928" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-5929" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5931" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-5932" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-5936" href="../Subtyping/#plfa_plfa-part2-Subtyping-5936" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-5937" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-5939" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-5941" href="../Subtyping/#plfa_plfa-part2-Subtyping-5941" class="Bound">x∉ls</a> <a id="plfa_plfa-part2-Subtyping-5946" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-5948" href="../Subtyping/#plfa_plfa-part2-Subtyping-5948" class="Bound">dls</a> <a id="plfa_plfa-part2-Subtyping-5952" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Subtyping-5954" href="../Subtyping/#plfa_plfa-part2-Subtyping-5954" class="Bound">lsij</a> <a id="plfa_plfa-part2-Subtyping-5959" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-5965" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a> <a id="plfa_plfa-part2-Subtyping-5970" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-5974" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-5975" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-5995" href="../Subtyping/#plfa_plfa-part2-Subtyping-5948" class="Bound">dls</a> <a id="plfa_plfa-part2-Subtyping-5999" href="../Subtyping/#plfa_plfa-part2-Subtyping-5954" class="Bound">lsij</a><a id="plfa_plfa-part2-Subtyping-6003" class="Symbol">)</a>
</pre>We shall need to convert from an irrelevant proof of distinctness to a relevant one. In general, the laundering of irrelevant proofs into relevant ones is easy to do when the predicate in question is decidable. The following is a decision procedure for whether a vector is distinct.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-distinct?"></a><a id="plfa_plfa-part2-Subtyping-6301" href="../Subtyping/#plfa_plfa-part2-Subtyping-6301" class="Function">distinct?</a> <a id="plfa_plfa-part2-Subtyping-6311" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-6313" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-6315" href="../Subtyping/#plfa_plfa-part2-Subtyping-6315" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-6316" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-6318" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-6320" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-6321" href="../Subtyping/#plfa_plfa-part2-Subtyping-6321" class="Bound">xs</a> <a id="plfa_plfa-part2-Subtyping-6324" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-6326" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-6330" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-6335" href="../Subtyping/#plfa_plfa-part2-Subtyping-6315" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-6336" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-6338" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-6340" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a> <a id="plfa_plfa-part2-Subtyping-6344" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-6345" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-6354" href="../Subtyping/#plfa_plfa-part2-Subtyping-6321" class="Bound">xs</a><a id="plfa_plfa-part2-Subtyping-6356" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-6358" href="../Subtyping/#plfa_plfa-part2-Subtyping-6301" class="Function">distinct?</a> <a id="plfa_plfa-part2-Subtyping-6368" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="plfa_plfa-part2-Subtyping-6371" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-6373" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part2-Subtyping-6377" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>
<a id="plfa_plfa-part2-Subtyping-6380" href="../Subtyping/#plfa_plfa-part2-Subtyping-6301" class="Function">distinct?</a> <a id="plfa_plfa-part2-Subtyping-6390" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-6391" href="../Subtyping/#plfa_plfa-part2-Subtyping-6391" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-6393" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-6395" href="../Subtyping/#plfa_plfa-part2-Subtyping-6395" class="Bound">xs</a><a id="plfa_plfa-part2-Subtyping-6397" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-6403" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-6408" href="../Subtyping/#plfa_plfa-part2-Subtyping-6391" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-6410" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.DecSetoid.html#839" class="Function Operator">∈?</a> <a id="plfa_plfa-part2-Subtyping-6413" href="../Subtyping/#plfa_plfa-part2-Subtyping-6395" class="Bound">xs</a>
<a id="plfa_plfa-part2-Subtyping-6416" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-6420" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-6422" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part2-Subtyping-6426" href="../Subtyping/#plfa_plfa-part2-Subtyping-6426" class="Bound">x∈xs</a> <a id="plfa_plfa-part2-Subtyping-6431" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-6433" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part2-Subtyping-6436" class="Symbol">λ</a> <a id="plfa_plfa-part2-Subtyping-6438" href="../Subtyping/#plfa_plfa-part2-Subtyping-6438" class="Bound">z</a> <a id="plfa_plfa-part2-Subtyping-6440" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-6442" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="plfa_plfa-part2-Subtyping-6448" href="../Subtyping/#plfa_plfa-part2-Subtyping-6438" class="Bound">z</a> <a id="plfa_plfa-part2-Subtyping-6450" href="../Subtyping/#plfa_plfa-part2-Subtyping-6426" class="Bound">x∈xs</a>
<a id="plfa_plfa-part2-Subtyping-6455" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-6459" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-6461" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part2-Subtyping-6464" href="../Subtyping/#plfa_plfa-part2-Subtyping-6464" class="Bound">x∉xs</a>
    <a id="plfa_plfa-part2-Subtyping-6474" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-6479" href="../Subtyping/#plfa_plfa-part2-Subtyping-6301" class="Function">distinct?</a> <a id="plfa_plfa-part2-Subtyping-6489" class="Bound">xs</a>
<a id="plfa_plfa-part2-Subtyping-6492" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-6496" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-6498" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part2-Subtyping-6502" href="../Subtyping/#plfa_plfa-part2-Subtyping-6502" class="Bound">dxs</a> <a id="plfa_plfa-part2-Subtyping-6506" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-6508" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part2-Subtyping-6512" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-6514" class="Bound">x∉xs</a> <a id="plfa_plfa-part2-Subtyping-6520" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-6522" href="../Subtyping/#plfa_plfa-part2-Subtyping-6502" class="Bound">dxs</a> <a id="plfa_plfa-part2-Subtyping-6526" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-Subtyping-6528" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-6532" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-6534" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part2-Subtyping-6537" href="../Subtyping/#plfa_plfa-part2-Subtyping-6537" class="Bound">¬dxs</a> <a id="plfa_plfa-part2-Subtyping-6542" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-6544" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part2-Subtyping-6547" class="Symbol">λ</a> <a id="plfa_plfa-part2-Subtyping-6549" href="../Subtyping/#plfa_plfa-part2-Subtyping-6549" class="Bound">z</a> <a id="plfa_plfa-part2-Subtyping-6551" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-6553" href="../Subtyping/#plfa_plfa-part2-Subtyping-6537" class="Bound">¬dxs</a> <a id="plfa_plfa-part2-Subtyping-6558" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-6559" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="plfa_plfa-part2-Subtyping-6565" href="../Subtyping/#plfa_plfa-part2-Subtyping-6549" class="Bound">z</a><a id="plfa_plfa-part2-Subtyping-6566" class="Symbol">)</a>
</pre>With this decision procedure in hand, we define the following function for laundering irrelevant proofs of distinctness into relevant ones.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-distinct-relevant"></a><a id="plfa_plfa-part2-Subtyping-6721" href="../Subtyping/#plfa_plfa-part2-Subtyping-6721" class="Function">distinct-relevant</a> <a id="plfa_plfa-part2-Subtyping-6739" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-6741" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-6743" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-6744" href="../Subtyping/#plfa_plfa-part2-Subtyping-6744" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-6745" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-6747" href="../Subtyping/#plfa_plfa-part2-Subtyping-6747" class="Bound">fs</a> <a id="plfa_plfa-part2-Subtyping-6750" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-6752" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-6756" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-6761" href="../Subtyping/#plfa_plfa-part2-Subtyping-6744" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-6762" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-6764" class="Symbol">.(</a><a id="plfa_plfa-part2-Subtyping-6766" href="../Subtyping/#plfa_plfa-part2-Subtyping-6766" class="Bound">d</a> <a id="plfa_plfa-part2-Subtyping-6768" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-6770" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-6779" href="../Subtyping/#plfa_plfa-part2-Subtyping-6747" class="Bound">fs</a><a id="plfa_plfa-part2-Subtyping-6781" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-6783" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-6785" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-6794" href="../Subtyping/#plfa_plfa-part2-Subtyping-6747" class="Bound">fs</a>
<a id="plfa_plfa-part2-Subtyping-6797" href="../Subtyping/#plfa_plfa-part2-Subtyping-6721" class="Function">distinct-relevant</a> <a id="plfa_plfa-part2-Subtyping-6815" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-6816" href="../Subtyping/#plfa_plfa-part2-Subtyping-6816" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-6817" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-6819" href="../Subtyping/#plfa_plfa-part2-Subtyping-6819" class="Bound">fs</a><a id="plfa_plfa-part2-Subtyping-6821" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-6823" href="../Subtyping/#plfa_plfa-part2-Subtyping-6823" class="Bound">d</a>
    <a id="plfa_plfa-part2-Subtyping-6829" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-6834" href="../Subtyping/#plfa_plfa-part2-Subtyping-6301" class="Function">distinct?</a> <a id="plfa_plfa-part2-Subtyping-6844" href="../Subtyping/#plfa_plfa-part2-Subtyping-6819" class="Bound">fs</a>
<a id="plfa_plfa-part2-Subtyping-6847" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-6851" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-6853" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part2-Subtyping-6857" href="../Subtyping/#plfa_plfa-part2-Subtyping-6857" class="Bound">dfs</a> <a id="plfa_plfa-part2-Subtyping-6861" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-6863" href="../Subtyping/#plfa_plfa-part2-Subtyping-6857" class="Bound">dfs</a>
<a id="plfa_plfa-part2-Subtyping-6867" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-6871" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-6873" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part2-Subtyping-6876" href="../Subtyping/#plfa_plfa-part2-Subtyping-6876" class="Bound">¬dfs</a> <a id="plfa_plfa-part2-Subtyping-6881" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-6883" href="../Subtyping/#plfa_plfa-part2-Subtyping-3217" class="Function">⊥-elimi</a> <a id="plfa_plfa-part2-Subtyping-6891" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-6892" href="../Subtyping/#plfa_plfa-part2-Subtyping-6876" class="Bound">¬dfs</a> <a id="plfa_plfa-part2-Subtyping-6897" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-6898" class="Symbol">)</a>
</pre>The fields of one record are a <em>subset</em> of the fields of another record if every field of the first is also a field of the second.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-_⊆_"></a><a id="plfa_plfa-part2-Subtyping-7044" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">_⊆_</a> <a id="plfa_plfa-part2-Subtyping-7048" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7050" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-7052" href="../Subtyping/#plfa_plfa-part2-Subtyping-7052" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-7054" href="../Subtyping/#plfa_plfa-part2-Subtyping-7054" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-7055" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-7057" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7059" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7063" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7068" href="../Subtyping/#plfa_plfa-part2-Subtyping-7052" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-7070" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7072" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7076" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7081" href="../Subtyping/#plfa_plfa-part2-Subtyping-7054" class="Bound">m</a> <a id="plfa_plfa-part2-Subtyping-7083" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7085" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Subtyping-7089" href="../Subtyping/#plfa_plfa-part2-Subtyping-7089" class="Bound">xs</a> <a id="plfa_plfa-part2-Subtyping-7092" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">⊆</a> <a id="plfa_plfa-part2-Subtyping-7094" href="../Subtyping/#plfa_plfa-part2-Subtyping-7094" class="Bound">ys</a> <a id="plfa_plfa-part2-Subtyping-7097" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-7099" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-7100" href="../Subtyping/#plfa_plfa-part2-Subtyping-7100" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7102" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7104" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a><a id="plfa_plfa-part2-Subtyping-7108" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-7110" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7112" href="../Subtyping/#plfa_plfa-part2-Subtyping-7100" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7114" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Setoid.html#829" class="Function Operator">∈</a> <a id="plfa_plfa-part2-Subtyping-7116" href="../Subtyping/#plfa_plfa-part2-Subtyping-7089" class="Bound">xs</a> <a id="plfa_plfa-part2-Subtyping-7119" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7121" href="../Subtyping/#plfa_plfa-part2-Subtyping-7100" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7123" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Setoid.html#829" class="Function Operator">∈</a> <a id="plfa_plfa-part2-Subtyping-7125" href="../Subtyping/#plfa_plfa-part2-Subtyping-7094" class="Bound">ys</a>
</pre>This subset relation is reflexive and transitive.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-⊆-refl"></a><a id="plfa_plfa-part2-Subtyping-7191" href="../Subtyping/#plfa_plfa-part2-Subtyping-7191" class="Function">⊆-refl</a> <a id="plfa_plfa-part2-Subtyping-7198" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7200" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-7202" href="../Subtyping/#plfa_plfa-part2-Subtyping-7202" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7203" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7205" href="../Subtyping/#plfa_plfa-part2-Subtyping-7205" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-7208" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7210" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7214" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7219" href="../Subtyping/#plfa_plfa-part2-Subtyping-7202" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7220" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-7222" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7224" href="../Subtyping/#plfa_plfa-part2-Subtyping-7205" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-7227" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">⊆</a> <a id="plfa_plfa-part2-Subtyping-7229" href="../Subtyping/#plfa_plfa-part2-Subtyping-7205" class="Bound">ls</a>
<a id="plfa_plfa-part2-Subtyping-7232" href="../Subtyping/#plfa_plfa-part2-Subtyping-7191" class="Function">⊆-refl</a> <a id="plfa_plfa-part2-Subtyping-7239" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-7240" href="../Subtyping/#plfa_plfa-part2-Subtyping-7240" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7241" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7243" href="../Subtyping/#plfa_plfa-part2-Subtyping-7243" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-7245" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-7247" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-7249" class="Symbol">λ</a> <a id="plfa_plfa-part2-Subtyping-7251" href="../Subtyping/#plfa_plfa-part2-Subtyping-7251" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7253" href="../Subtyping/#plfa_plfa-part2-Subtyping-7253" class="Bound">x∈ls</a> <a id="plfa_plfa-part2-Subtyping-7258" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7260" href="../Subtyping/#plfa_plfa-part2-Subtyping-7253" class="Bound">x∈ls</a>

<a id="plfa_plfa-part2-Subtyping-⊆-trans"></a><a id="plfa_plfa-part2-Subtyping-7266" href="../Subtyping/#plfa_plfa-part2-Subtyping-7266" class="Function">⊆-trans</a> <a id="plfa_plfa-part2-Subtyping-7274" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7276" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-7278" href="../Subtyping/#plfa_plfa-part2-Subtyping-7278" class="Bound">l</a> <a id="plfa_plfa-part2-Subtyping-7280" href="../Subtyping/#plfa_plfa-part2-Subtyping-7280" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-7282" href="../Subtyping/#plfa_plfa-part2-Subtyping-7282" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-7283" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7285" href="../Subtyping/#plfa_plfa-part2-Subtyping-7285" class="Bound">ns</a>  <a id="plfa_plfa-part2-Subtyping-7289" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7291" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7295" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7300" href="../Subtyping/#plfa_plfa-part2-Subtyping-7280" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7301" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7303" href="../Subtyping/#plfa_plfa-part2-Subtyping-7303" class="Bound">ms</a>  <a id="plfa_plfa-part2-Subtyping-7307" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7309" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7313" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7318" href="../Subtyping/#plfa_plfa-part2-Subtyping-7282" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-7319" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7321" href="../Subtyping/#plfa_plfa-part2-Subtyping-7321" class="Bound">ls</a>  <a id="plfa_plfa-part2-Subtyping-7325" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7327" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7331" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7336" href="../Subtyping/#plfa_plfa-part2-Subtyping-7278" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-7337" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Subtyping-7342" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7344" href="../Subtyping/#plfa_plfa-part2-Subtyping-7285" class="Bound">ns</a> <a id="plfa_plfa-part2-Subtyping-7347" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">⊆</a> <a id="plfa_plfa-part2-Subtyping-7349" href="../Subtyping/#plfa_plfa-part2-Subtyping-7303" class="Bound">ms</a>  <a id="plfa_plfa-part2-Subtyping-7353" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-7356" href="../Subtyping/#plfa_plfa-part2-Subtyping-7303" class="Bound">ms</a> <a id="plfa_plfa-part2-Subtyping-7359" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">⊆</a> <a id="plfa_plfa-part2-Subtyping-7361" href="../Subtyping/#plfa_plfa-part2-Subtyping-7321" class="Bound">ls</a>  <a id="plfa_plfa-part2-Subtyping-7365" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-7368" href="../Subtyping/#plfa_plfa-part2-Subtyping-7285" class="Bound">ns</a> <a id="plfa_plfa-part2-Subtyping-7371" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">⊆</a> <a id="plfa_plfa-part2-Subtyping-7373" href="../Subtyping/#plfa_plfa-part2-Subtyping-7321" class="Bound">ls</a>
<a id="plfa_plfa-part2-Subtyping-7376" href="../Subtyping/#plfa_plfa-part2-Subtyping-7266" class="Function">⊆-trans</a> <a id="plfa_plfa-part2-Subtyping-7384" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-7385" href="../Subtyping/#plfa_plfa-part2-Subtyping-7385" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-7386" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7388" href="../Subtyping/#plfa_plfa-part2-Subtyping-7388" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7389" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7391" href="../Subtyping/#plfa_plfa-part2-Subtyping-7391" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-7392" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7394" href="../Subtyping/#plfa_plfa-part2-Subtyping-7394" class="Bound">ns</a><a id="plfa_plfa-part2-Subtyping-7396" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7398" href="../Subtyping/#plfa_plfa-part2-Subtyping-7398" class="Bound">ms</a><a id="plfa_plfa-part2-Subtyping-7400" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7402" href="../Subtyping/#plfa_plfa-part2-Subtyping-7402" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-7404" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-7406" href="../Subtyping/#plfa_plfa-part2-Subtyping-7406" class="Bound">ns⊆ms</a> <a id="plfa_plfa-part2-Subtyping-7412" href="../Subtyping/#plfa_plfa-part2-Subtyping-7412" class="Bound">ms⊆ls</a> <a id="plfa_plfa-part2-Subtyping-7418" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-7420" class="Symbol">λ</a> <a id="plfa_plfa-part2-Subtyping-7422" href="../Subtyping/#plfa_plfa-part2-Subtyping-7422" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7424" href="../Subtyping/#plfa_plfa-part2-Subtyping-7424" class="Bound">z</a> <a id="plfa_plfa-part2-Subtyping-7426" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7428" href="../Subtyping/#plfa_plfa-part2-Subtyping-7412" class="Bound">ms⊆ls</a> <a id="plfa_plfa-part2-Subtyping-7434" href="../Subtyping/#plfa_plfa-part2-Subtyping-7422" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7436" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-7437" href="../Subtyping/#plfa_plfa-part2-Subtyping-7406" class="Bound">ns⊆ms</a> <a id="plfa_plfa-part2-Subtyping-7443" href="../Subtyping/#plfa_plfa-part2-Subtyping-7422" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7445" href="../Subtyping/#plfa_plfa-part2-Subtyping-7424" class="Bound">z</a><a id="plfa_plfa-part2-Subtyping-7446" class="Symbol">)</a>
</pre>If <code>y</code> is an element of vector <code>xs</code>, then <code>y</code> is at some index <code>i</code> of the vector.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-lookup-∈"></a><a id="plfa_plfa-part2-Subtyping-7543" href="../Subtyping/#plfa_plfa-part2-Subtyping-7543" class="Function">lookup-∈</a> <a id="plfa_plfa-part2-Subtyping-7552" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7554" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-7556" href="../Subtyping/#plfa_plfa-part2-Subtyping-7556" class="Bound">ℓ</a><a id="plfa_plfa-part2-Subtyping-7557" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7559" href="../Subtyping/#plfa_plfa-part2-Subtyping-7559" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-7561" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7563" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-7567" href="../Subtyping/#plfa_plfa-part2-Subtyping-7556" class="Bound">ℓ</a><a id="plfa_plfa-part2-Subtyping-7568" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7570" href="../Subtyping/#plfa_plfa-part2-Subtyping-7570" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7571" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-7573" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-7574" href="../Subtyping/#plfa_plfa-part2-Subtyping-7574" class="Bound">xs</a> <a id="plfa_plfa-part2-Subtyping-7577" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7579" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7583" href="../Subtyping/#plfa_plfa-part2-Subtyping-7559" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-7585" href="../Subtyping/#plfa_plfa-part2-Subtyping-7570" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7586" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7588" href="../Subtyping/#plfa_plfa-part2-Subtyping-7588" class="Bound">y</a><a id="plfa_plfa-part2-Subtyping-7589" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Subtyping-7594" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7596" href="../Subtyping/#plfa_plfa-part2-Subtyping-7588" class="Bound">y</a> <a id="plfa_plfa-part2-Subtyping-7598" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Membership.Setoid.html#829" class="Function Operator">∈</a> <a id="plfa_plfa-part2-Subtyping-7600" href="../Subtyping/#plfa_plfa-part2-Subtyping-7574" class="Bound">xs</a>
   <a id="plfa_plfa-part2-Subtyping-7606" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-7608" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-Subtyping-7611" href="../Subtyping/#plfa_plfa-part2-Subtyping-7611" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-7613" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-Subtyping-7615" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-7619" href="../Subtyping/#plfa_plfa-part2-Subtyping-7570" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-7621" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-Subtyping-7623" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-7630" href="../Subtyping/#plfa_plfa-part2-Subtyping-7574" class="Bound">xs</a> <a id="plfa_plfa-part2-Subtyping-7633" href="../Subtyping/#plfa_plfa-part2-Subtyping-7611" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-7635" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-7637" href="../Subtyping/#plfa_plfa-part2-Subtyping-7588" class="Bound">y</a>
<a id="plfa_plfa-part2-Subtyping-7639" href="../Subtyping/#plfa_plfa-part2-Subtyping-7543" class="Function">lookup-∈</a> <a id="plfa_plfa-part2-Subtyping-7648" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-7649" class="Argument">xs</a> <a id="plfa_plfa-part2-Subtyping-7652" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-7654" href="../Subtyping/#plfa_plfa-part2-Subtyping-7654" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7656" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-7658" href="../Subtyping/#plfa_plfa-part2-Subtyping-7658" class="Bound">xs</a><a id="plfa_plfa-part2-Subtyping-7660" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-7662" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-7663" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Relation.Unary.Any.html#1060" class="InductiveConstructor">here</a> <a id="plfa_plfa-part2-Subtyping-7668" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Subtyping-7672" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-7674" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-7676" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-7678" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a> <a id="plfa_plfa-part2-Subtyping-7683" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-7685" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Subtyping-7690" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-Subtyping-7692" href="../Subtyping/#plfa_plfa-part2-Subtyping-7543" class="Function">lookup-∈</a> <a id="plfa_plfa-part2-Subtyping-7701" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-7702" class="Argument">xs</a> <a id="plfa_plfa-part2-Subtyping-7705" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-7707" href="../Subtyping/#plfa_plfa-part2-Subtyping-7707" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-7709" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-7711" href="../Subtyping/#plfa_plfa-part2-Subtyping-7711" class="Bound">xs</a><a id="plfa_plfa-part2-Subtyping-7713" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-7715" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-7716" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Relation.Unary.Any.html#1127" class="InductiveConstructor">there</a> <a id="plfa_plfa-part2-Subtyping-7722" href="../Subtyping/#plfa_plfa-part2-Subtyping-7722" class="Bound">y∈xs</a><a id="plfa_plfa-part2-Subtyping-7726" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-7732" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-7737" href="../Subtyping/#plfa_plfa-part2-Subtyping-7543" class="Function">lookup-∈</a> <a id="plfa_plfa-part2-Subtyping-7746" href="../Subtyping/#plfa_plfa-part2-Subtyping-7722" class="Bound">y∈xs</a>
<a id="plfa_plfa-part2-Subtyping-7751" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-7755" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-7757" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-7759" href="../Subtyping/#plfa_plfa-part2-Subtyping-7759" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-7761" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-7763" href="../Subtyping/#plfa_plfa-part2-Subtyping-7763" class="Bound">xs[i]=y</a> <a id="plfa_plfa-part2-Subtyping-7771" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Subtyping-7773" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-7775" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-7777" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-7778" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-7782" href="../Subtyping/#plfa_plfa-part2-Subtyping-7759" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-7783" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-7785" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-7787" href="../Subtyping/#plfa_plfa-part2-Subtyping-7763" class="Bound">xs[i]=y</a> <a id="plfa_plfa-part2-Subtyping-7795" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a>
</pre>If one vector <code>ns</code> is a subset of another <code>ms</code>, then for any element <code>lookup ns i</code>, there is an equal element in <code>ms</code> at some index.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-lookup-⊆"></a><a id="plfa_plfa-part2-Subtyping-7943" href="../Subtyping/#plfa_plfa-part2-Subtyping-7943" class="Function">lookup-⊆</a> <a id="plfa_plfa-part2-Subtyping-7952" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7954" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-7956" href="../Subtyping/#plfa_plfa-part2-Subtyping-7956" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-7958" href="../Subtyping/#plfa_plfa-part2-Subtyping-7958" class="Bound">m</a> <a id="plfa_plfa-part2-Subtyping-7960" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7962" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part2-Subtyping-7963" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7965" href="../Subtyping/#plfa_plfa-part2-Subtyping-7965" class="Bound">ns</a> <a id="plfa_plfa-part2-Subtyping-7968" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7970" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7974" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7979" href="../Subtyping/#plfa_plfa-part2-Subtyping-7956" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-7980" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7982" href="../Subtyping/#plfa_plfa-part2-Subtyping-7982" class="Bound">ms</a> <a id="plfa_plfa-part2-Subtyping-7985" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-7987" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-7991" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-7996" href="../Subtyping/#plfa_plfa-part2-Subtyping-7958" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-7997" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-7999" href="../Subtyping/#plfa_plfa-part2-Subtyping-7999" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-8001" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8003" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-8007" href="../Subtyping/#plfa_plfa-part2-Subtyping-7956" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-8008" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Subtyping-8013" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-8015" href="../Subtyping/#plfa_plfa-part2-Subtyping-7965" class="Bound">ns</a> <a id="plfa_plfa-part2-Subtyping-8018" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">⊆</a> <a id="plfa_plfa-part2-Subtyping-8020" href="../Subtyping/#plfa_plfa-part2-Subtyping-7982" class="Bound">ms</a>
   <a id="plfa_plfa-part2-Subtyping-8026" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-8028" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part2-Subtyping-8031" href="../Subtyping/#plfa_plfa-part2-Subtyping-8031" class="Bound">k</a> <a id="plfa_plfa-part2-Subtyping-8033" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part2-Subtyping-8035" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-8039" href="../Subtyping/#plfa_plfa-part2-Subtyping-7958" class="Bound">m</a> <a id="plfa_plfa-part2-Subtyping-8041" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part2-Subtyping-8043" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-8050" href="../Subtyping/#plfa_plfa-part2-Subtyping-7965" class="Bound">ns</a> <a id="plfa_plfa-part2-Subtyping-8053" href="../Subtyping/#plfa_plfa-part2-Subtyping-7999" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-8055" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-8057" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-8064" href="../Subtyping/#plfa_plfa-part2-Subtyping-7982" class="Bound">ms</a> <a id="plfa_plfa-part2-Subtyping-8067" href="../Subtyping/#plfa_plfa-part2-Subtyping-8031" class="Bound">k</a>
<a id="plfa_plfa-part2-Subtyping-8069" href="../Subtyping/#plfa_plfa-part2-Subtyping-7943" class="Function">lookup-⊆</a> <a id="plfa_plfa-part2-Subtyping-8078" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8079" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-8083" href="../Subtyping/#plfa_plfa-part2-Subtyping-8083" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-8084" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8086" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8087" href="../Subtyping/#plfa_plfa-part2-Subtyping-8087" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-8088" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8090" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8091" href="../Subtyping/#plfa_plfa-part2-Subtyping-8091" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-8093" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-8095" href="../Subtyping/#plfa_plfa-part2-Subtyping-8095" class="Bound">ns</a><a id="plfa_plfa-part2-Subtyping-8097" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8099" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8100" href="../Subtyping/#plfa_plfa-part2-Subtyping-8100" class="Bound">ms</a><a id="plfa_plfa-part2-Subtyping-8102" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8104" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8105" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-8109" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8111" href="../Subtyping/#plfa_plfa-part2-Subtyping-8111" class="Bound">ns⊆ms</a>
    <a id="plfa_plfa-part2-Subtyping-8121" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-8126" href="../Subtyping/#plfa_plfa-part2-Subtyping-7543" class="Function">lookup-∈</a> <a id="plfa_plfa-part2-Subtyping-8135" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-8136" href="../Subtyping/#plfa_plfa-part2-Subtyping-8111" class="Bound">ns⊆ms</a> <a id="plfa_plfa-part2-Subtyping-8142" href="../Subtyping/#plfa_plfa-part2-Subtyping-8091" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-8144" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-8145" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Relation.Unary.Any.html#1060" class="InductiveConstructor">here</a> <a id="plfa_plfa-part2-Subtyping-8150" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Subtyping-8154" class="Symbol">))</a>
<a id="plfa_plfa-part2-Subtyping-8157" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-8161" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-8163" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-8165" href="../Subtyping/#plfa_plfa-part2-Subtyping-8165" class="Bound">k</a> <a id="plfa_plfa-part2-Subtyping-8167" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-8169" href="../Subtyping/#plfa_plfa-part2-Subtyping-8169" class="Bound">ms[k]=x</a> <a id="plfa_plfa-part2-Subtyping-8177" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Subtyping-8179" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Subtyping-8187" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-8189" href="../Subtyping/#plfa_plfa-part2-Subtyping-8165" class="Bound">k</a> <a id="plfa_plfa-part2-Subtyping-8191" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-8193" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-8194" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part2-Subtyping-8198" href="../Subtyping/#plfa_plfa-part2-Subtyping-8169" class="Bound">ms[k]=x</a><a id="plfa_plfa-part2-Subtyping-8205" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-8207" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part2-Subtyping-8209" href="../Subtyping/#plfa_plfa-part2-Subtyping-7943" class="Function">lookup-⊆</a> <a id="plfa_plfa-part2-Subtyping-8218" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8219" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-8223" href="../Subtyping/#plfa_plfa-part2-Subtyping-8223" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-8224" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8226" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8227" href="../Subtyping/#plfa_plfa-part2-Subtyping-8227" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-8228" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8230" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8231" href="../Subtyping/#plfa_plfa-part2-Subtyping-8231" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-8233" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-8235" href="../Subtyping/#plfa_plfa-part2-Subtyping-8235" class="Bound">ns</a><a id="plfa_plfa-part2-Subtyping-8237" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8239" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8240" href="../Subtyping/#plfa_plfa-part2-Subtyping-8240" class="Bound">ms</a><a id="plfa_plfa-part2-Subtyping-8242" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8244" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8245" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-8249" href="../Subtyping/#plfa_plfa-part2-Subtyping-8249" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-8250" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8252" href="../Subtyping/#plfa_plfa-part2-Subtyping-8252" class="Bound">x∷ns⊆ms</a> <a id="plfa_plfa-part2-Subtyping-8260" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-8266" href="../Subtyping/#plfa_plfa-part2-Subtyping-7943" class="Function">lookup-⊆</a> <a id="plfa_plfa-part2-Subtyping-8275" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8276" href="../Subtyping/#plfa_plfa-part2-Subtyping-8223" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-8277" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8279" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8280" href="../Subtyping/#plfa_plfa-part2-Subtyping-8227" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-8281" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8283" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8284" href="../Subtyping/#plfa_plfa-part2-Subtyping-8235" class="Bound">ns</a><a id="plfa_plfa-part2-Subtyping-8286" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8288" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8289" href="../Subtyping/#plfa_plfa-part2-Subtyping-8240" class="Bound">ms</a><a id="plfa_plfa-part2-Subtyping-8291" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8293" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8294" href="../Subtyping/#plfa_plfa-part2-Subtyping-8249" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-8295" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8297" class="Symbol">(λ</a> <a id="plfa_plfa-part2-Subtyping-8300" href="../Subtyping/#plfa_plfa-part2-Subtyping-8300" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-8302" href="../Subtyping/#plfa_plfa-part2-Subtyping-8302" class="Bound">z</a> <a id="plfa_plfa-part2-Subtyping-8304" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-8306" href="../Subtyping/#plfa_plfa-part2-Subtyping-8252" class="Bound">x∷ns⊆ms</a> <a id="plfa_plfa-part2-Subtyping-8314" href="../Subtyping/#plfa_plfa-part2-Subtyping-8300" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-8316" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-8317" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Relation.Unary.Any.html#1127" class="InductiveConstructor">there</a> <a id="plfa_plfa-part2-Subtyping-8323" href="../Subtyping/#plfa_plfa-part2-Subtyping-8302" class="Bound">z</a><a id="plfa_plfa-part2-Subtyping-8324" class="Symbol">))</a>
</pre><h2 id="types">Types</h2><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-8350" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-Type"></a><a id="plfa_plfa-part2-Subtyping-8355" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-8360" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8362" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-8366" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Subtyping-Type._⇒_"></a><a id="plfa_plfa-part2-Subtyping-8374" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">_⇒_</a>   <a id="plfa_plfa-part2-Subtyping-8380" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8382" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-8387" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-8389" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-8394" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-8396" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a>
  <a id="plfa_plfa-part2-Subtyping-Type.`ℕ"></a><a id="plfa_plfa-part2-Subtyping-8403" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>    <a id="plfa_plfa-part2-Subtyping-8409" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8411" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a>
  <a id="plfa_plfa-part2-Subtyping-Type.｛_⦂_｝"></a><a id="plfa_plfa-part2-Subtyping-8418" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛_⦂_｝</a> <a id="plfa_plfa-part2-Subtyping-8424" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8426" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-8427" href="../Subtyping/#plfa_plfa-part2-Subtyping-8427" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-8429" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8431" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part2-Subtyping-8432" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8434" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-8435" href="../Subtyping/#plfa_plfa-part2-Subtyping-8435" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-8438" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8440" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-8444" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-8449" href="../Subtyping/#plfa_plfa-part2-Subtyping-8427" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-8450" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-8452" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-8453" href="../Subtyping/#plfa_plfa-part2-Subtyping-8453" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-8456" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8458" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-8462" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-8467" href="../Subtyping/#plfa_plfa-part2-Subtyping-8427" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-8468" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-8470" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-8472" class="Symbol">.{</a><a id="plfa_plfa-part2-Subtyping-8474" href="../Subtyping/#plfa_plfa-part2-Subtyping-8474" class="Bound">d</a> <a id="plfa_plfa-part2-Subtyping-8476" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-8478" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-8487" href="../Subtyping/#plfa_plfa-part2-Subtyping-8435" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-8489" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-8491" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-8493" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a>
</pre><p>In addition to function types <code>A ⇒ B</code> and natural numbers <code>ℕ</code>, we have the record type <code>｛ ls ⦂ As ｝</code>, where <code>ls</code> is a vector of field names and <code>As</code> is a vector of types, as discussed above. We require that the field names be distinct, but we do not want the details of the proof of distinctness to affect whether two record types are equal, so we declare that parameter to be irrelevant by placing a <code>.</code> in front of it.</p><h2 id="subtyping">Subtyping</h2><p>The subtyping relation, written <code>A &lt;: B</code>, defines when an implicit cast is allowed via the subsumption rule. The following data type definition specifies the subtyping rules for natural numbers, functions, and record types. We discuss each rule below.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-9202" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-_&lt;:_"></a><a id="plfa_plfa-part2-Subtyping-9207" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">_&lt;:_</a> <a id="plfa_plfa-part2-Subtyping-9212" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9214" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-9219" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9221" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-9226" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9228" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-9232" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Subtyping-_&lt;:_.&lt;:-nat"></a><a id="plfa_plfa-part2-Subtyping-9240" href="../Subtyping/#plfa_plfa-part2-Subtyping-9240" class="InductiveConstructor">&lt;:-nat</a> <a id="plfa_plfa-part2-Subtyping-9247" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9249" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a> <a id="plfa_plfa-part2-Subtyping-9252" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-9255" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>

  <a id="plfa_plfa-part2-Subtyping-_&lt;:_.&lt;:-fun"></a><a id="plfa_plfa-part2-Subtyping-9261" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-9268" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9270" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-9272" href="../Subtyping/#plfa_plfa-part2-Subtyping-9272" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-9274" href="../Subtyping/#plfa_plfa-part2-Subtyping-9274" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-9276" href="../Subtyping/#plfa_plfa-part2-Subtyping-9276" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-9278" href="../Subtyping/#plfa_plfa-part2-Subtyping-9278" class="Bound">D</a> <a id="plfa_plfa-part2-Subtyping-9280" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9282" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a><a id="plfa_plfa-part2-Subtyping-9286" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-9292" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9294" href="../Subtyping/#plfa_plfa-part2-Subtyping-9276" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-9296" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-9299" href="../Subtyping/#plfa_plfa-part2-Subtyping-9272" class="Bound">A</a>  <a id="plfa_plfa-part2-Subtyping-9302" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9304" href="../Subtyping/#plfa_plfa-part2-Subtyping-9274" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-9306" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-9309" href="../Subtyping/#plfa_plfa-part2-Subtyping-9278" class="Bound">D</a>
      <a id="plfa_plfa-part2-Subtyping-9317" class="Comment">----------------</a>
    <a id="plfa_plfa-part2-Subtyping-9338" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9340" href="../Subtyping/#plfa_plfa-part2-Subtyping-9272" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-9342" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-9344" href="../Subtyping/#plfa_plfa-part2-Subtyping-9274" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-9346" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-9349" href="../Subtyping/#plfa_plfa-part2-Subtyping-9276" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-9351" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-9353" href="../Subtyping/#plfa_plfa-part2-Subtyping-9278" class="Bound">D</a>

  <a id="plfa_plfa-part2-Subtyping-_&lt;:_.&lt;:-rcd"></a><a id="plfa_plfa-part2-Subtyping-9358" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-9365" class="Symbol">:</a>  <a id="plfa_plfa-part2-Subtyping-9368" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-9370" href="../Subtyping/#plfa_plfa-part2-Subtyping-9370" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-9371" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-9373" href="../Subtyping/#plfa_plfa-part2-Subtyping-9373" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-9376" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9378" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-9382" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-9387" href="../Subtyping/#plfa_plfa-part2-Subtyping-9370" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-9388" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-9390" href="../Subtyping/#plfa_plfa-part2-Subtyping-9390" class="Bound">Ss</a> <a id="plfa_plfa-part2-Subtyping-9393" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9395" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-9399" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-9404" href="../Subtyping/#plfa_plfa-part2-Subtyping-9370" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-9405" class="Symbol">}.{</a><a id="plfa_plfa-part2-Subtyping-9408" href="../Subtyping/#plfa_plfa-part2-Subtyping-9408" class="Bound">d1</a> <a id="plfa_plfa-part2-Subtyping-9411" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9413" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-9422" href="../Subtyping/#plfa_plfa-part2-Subtyping-9373" class="Bound">ks</a><a id="plfa_plfa-part2-Subtyping-9424" class="Symbol">}</a>
             <a id="plfa_plfa-part2-Subtyping-9439" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-9440" href="../Subtyping/#plfa_plfa-part2-Subtyping-9440" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-9441" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-9443" href="../Subtyping/#plfa_plfa-part2-Subtyping-9443" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-9446" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9448" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-9452" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-9457" href="../Subtyping/#plfa_plfa-part2-Subtyping-9440" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-9458" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-9460" href="../Subtyping/#plfa_plfa-part2-Subtyping-9460" class="Bound">Ts</a> <a id="plfa_plfa-part2-Subtyping-9463" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9465" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-9469" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-9474" href="../Subtyping/#plfa_plfa-part2-Subtyping-9440" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-9475" class="Symbol">}.{</a><a id="plfa_plfa-part2-Subtyping-9478" href="../Subtyping/#plfa_plfa-part2-Subtyping-9478" class="Bound">d2</a> <a id="plfa_plfa-part2-Subtyping-9481" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9483" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-9492" href="../Subtyping/#plfa_plfa-part2-Subtyping-9443" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-9494" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-9500" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9502" href="../Subtyping/#plfa_plfa-part2-Subtyping-9443" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-9505" href="../Subtyping/#plfa_plfa-part2-Subtyping-7044" class="Function Operator">⊆</a> <a id="plfa_plfa-part2-Subtyping-9507" href="../Subtyping/#plfa_plfa-part2-Subtyping-9373" class="Bound">ks</a>
    <a id="plfa_plfa-part2-Subtyping-9514" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9516" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Subtyping-9519" href="../Subtyping/#plfa_plfa-part2-Subtyping-9519" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-9521" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9523" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-9527" href="../Subtyping/#plfa_plfa-part2-Subtyping-9440" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-9528" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-9530" href="../Subtyping/#plfa_plfa-part2-Subtyping-9530" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-9532" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-9534" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-9538" href="../Subtyping/#plfa_plfa-part2-Subtyping-9370" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-9539" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-9541" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9543" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-9550" href="../Subtyping/#plfa_plfa-part2-Subtyping-9373" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-9553" href="../Subtyping/#plfa_plfa-part2-Subtyping-9530" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-9555" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-9557" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-9564" href="../Subtyping/#plfa_plfa-part2-Subtyping-9443" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-9567" href="../Subtyping/#plfa_plfa-part2-Subtyping-9519" class="Bound">i</a>
                               <a id="plfa_plfa-part2-Subtyping-9600" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9602" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-9609" href="../Subtyping/#plfa_plfa-part2-Subtyping-9390" class="Bound">Ss</a> <a id="plfa_plfa-part2-Subtyping-9612" href="../Subtyping/#plfa_plfa-part2-Subtyping-9530" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-9614" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-9617" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-9624" href="../Subtyping/#plfa_plfa-part2-Subtyping-9460" class="Bound">Ts</a> <a id="plfa_plfa-part2-Subtyping-9627" href="../Subtyping/#plfa_plfa-part2-Subtyping-9519" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-9628" class="Symbol">)</a>
      <a id="plfa_plfa-part2-Subtyping-9636" class="Comment">------------------------------------------------------</a>
    <a id="plfa_plfa-part2-Subtyping-9695" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-9697" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-9699" href="../Subtyping/#plfa_plfa-part2-Subtyping-9373" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-9702" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-9704" href="../Subtyping/#plfa_plfa-part2-Subtyping-9390" class="Bound">Ss</a> <a id="plfa_plfa-part2-Subtyping-9707" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-9709" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-9710" href="../Subtyping/#plfa_plfa-part2-Subtyping-9408" class="Bound">d1</a><a id="plfa_plfa-part2-Subtyping-9712" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-9714" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-9717" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-9719" href="../Subtyping/#plfa_plfa-part2-Subtyping-9443" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-9722" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-9724" href="../Subtyping/#plfa_plfa-part2-Subtyping-9460" class="Bound">Ts</a> <a id="plfa_plfa-part2-Subtyping-9727" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-9729" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-9730" href="../Subtyping/#plfa_plfa-part2-Subtyping-9478" class="Bound">d2</a><a id="plfa_plfa-part2-Subtyping-9732" class="Symbol">}</a>
</pre><p>The rule <code>&lt;:-nat</code> says that <code>ℕ</code> is a subtype of itself.</p><p>The rule <code>&lt;:-fun</code> is the traditional rule for function types, which is best understood with the below diagram. It answers the question, when can a function of type <code>A ⇒ B</code> be used in place of a function of type <code>C ⇒ D</code>. It will be called with an argument of type <code>C</code>, so we need to convert from <code>C</code> to <code>A</code>. We then call the function to get the result of type <code>B</code>. Finally, we need to convert from <code>B</code> to <code>D</code>. Note that the direction of subtyping for the parameters is swapped (<code>C &lt;: A</code>), a phenomenon named contra-variance.</p><pre><code>C &lt;: A
⇓    ⇓
D :&gt; B</code></pre>The record subtyping rule (<code>&lt;:-rcd</code>) characterizes when a record of one type can safely be used in place of another record type. The first premise of the rule expresses <em>width subtyping</em> by requiring that all the field names in <code>ls</code> are also in <code>ks</code>. So it allows the hiding of fields when going from a subtype to a supertype. The second premise of the record subtyping rule (<code>&lt;:-rcd</code>) expresses <em>depth subtyping</em>, that is, it allows the types of the fields to change according to subtyping. The following is an abbreviation for this premise.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-_⦂_&lt;:_⦂_"></a><a id="plfa_plfa-part2-Subtyping-10907" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">_⦂_&lt;:_⦂_</a> <a id="plfa_plfa-part2-Subtyping-10916" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-10918" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-10920" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-10921" href="../Subtyping/#plfa_plfa-part2-Subtyping-10921" class="Bound">m</a> <a id="plfa_plfa-part2-Subtyping-10923" href="../Subtyping/#plfa_plfa-part2-Subtyping-10923" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-10924" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-10926" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-10928" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-10932" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-10937" href="../Subtyping/#plfa_plfa-part2-Subtyping-10921" class="Bound">m</a> <a id="plfa_plfa-part2-Subtyping-10939" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-10941" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-10945" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-10950" href="../Subtyping/#plfa_plfa-part2-Subtyping-10921" class="Bound">m</a> <a id="plfa_plfa-part2-Subtyping-10952" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-10954" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-10958" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-10963" href="../Subtyping/#plfa_plfa-part2-Subtyping-10923" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-10965" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-10967" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-10971" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-10976" href="../Subtyping/#plfa_plfa-part2-Subtyping-10923" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-10978" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-10980" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Subtyping-10984" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">_⦂_&lt;:_⦂_</a> <a id="plfa_plfa-part2-Subtyping-10993" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-10994" href="../Subtyping/#plfa_plfa-part2-Subtyping-10994" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-10995" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-10997" href="../Subtyping/#plfa_plfa-part2-Subtyping-10997" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-10998" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11000" href="../Subtyping/#plfa_plfa-part2-Subtyping-11000" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-11003" href="../Subtyping/#plfa_plfa-part2-Subtyping-11003" class="Bound">Ss</a> <a id="plfa_plfa-part2-Subtyping-11006" href="../Subtyping/#plfa_plfa-part2-Subtyping-11006" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-11009" href="../Subtyping/#plfa_plfa-part2-Subtyping-11009" class="Bound">Ts</a> <a id="plfa_plfa-part2-Subtyping-11012" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11014" class="Symbol">(∀{</a><a id="plfa_plfa-part2-Subtyping-11017" href="../Subtyping/#plfa_plfa-part2-Subtyping-11017" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-11019" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11021" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-11025" href="../Subtyping/#plfa_plfa-part2-Subtyping-10997" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-11026" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-11028" href="../Subtyping/#plfa_plfa-part2-Subtyping-11028" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-11030" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11032" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-11036" href="../Subtyping/#plfa_plfa-part2-Subtyping-10994" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-11037" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-11043" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-11045" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-11052" href="../Subtyping/#plfa_plfa-part2-Subtyping-11000" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-11055" href="../Subtyping/#plfa_plfa-part2-Subtyping-11028" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-11057" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-11059" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-11066" href="../Subtyping/#plfa_plfa-part2-Subtyping-11006" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-11069" href="../Subtyping/#plfa_plfa-part2-Subtyping-11017" class="Bound">i</a>  <a id="plfa_plfa-part2-Subtyping-11072" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-11075" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-11082" href="../Subtyping/#plfa_plfa-part2-Subtyping-11003" class="Bound">Ss</a> <a id="plfa_plfa-part2-Subtyping-11085" href="../Subtyping/#plfa_plfa-part2-Subtyping-11028" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-11087" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-11090" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-11097" href="../Subtyping/#plfa_plfa-part2-Subtyping-11009" class="Bound">Ts</a> <a id="plfa_plfa-part2-Subtyping-11100" href="../Subtyping/#plfa_plfa-part2-Subtyping-11017" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-11101" class="Symbol">)</a>
</pre><h2 id="subtyping-is-reflexive">Subtyping is Reflexive</h2>In this section we prove that subtyping is reflexive, that is, <code>A &lt;: A</code> for any type <code>A</code>. The proof does not go by induction on the type <code>A</code> because of the <code>&lt;:-rcd</code> rule. We instead use induction on the size of the type. So we first define size of a type, and the size of a vector of types, as follows.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-ty-size"></a><a id="plfa_plfa-part2-Subtyping-11446" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11454" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11456" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-11457" href="../Subtyping/#plfa_plfa-part2-Subtyping-11457" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-11459" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11461" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a><a id="plfa_plfa-part2-Subtyping-11465" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-11467" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-11469" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="plfa_plfa-part2-Subtyping-vec-ty-size"></a><a id="plfa_plfa-part2-Subtyping-11471" href="../Subtyping/#plfa_plfa-part2-Subtyping-11471" class="Function">vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-11483" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11485" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-11487" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-11488" href="../Subtyping/#plfa_plfa-part2-Subtyping-11488" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-11490" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11492" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part2-Subtyping-11493" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11495" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-11497" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-11498" href="../Subtyping/#plfa_plfa-part2-Subtyping-11498" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-11501" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11503" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-11507" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-11512" href="../Subtyping/#plfa_plfa-part2-Subtyping-11488" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-11513" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-11515" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-11517" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>

<a id="plfa_plfa-part2-Subtyping-11520" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11528" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-11529" href="../Subtyping/#plfa_plfa-part2-Subtyping-11529" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-11531" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-11533" href="../Subtyping/#plfa_plfa-part2-Subtyping-11533" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-11534" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-11536" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11538" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-11542" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-11543" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11551" href="../Subtyping/#plfa_plfa-part2-Subtyping-11529" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-11553" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="plfa_plfa-part2-Subtyping-11555" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11563" href="../Subtyping/#plfa_plfa-part2-Subtyping-11533" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-11564" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-11566" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11574" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a> <a id="plfa_plfa-part2-Subtyping-11577" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11579" class="Number">1</a>
<a id="plfa_plfa-part2-Subtyping-11581" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11589" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-11591" href="../Subtyping/#plfa_plfa-part2-Subtyping-11591" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-11594" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-11596" href="../Subtyping/#plfa_plfa-part2-Subtyping-11596" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-11599" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-11601" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11603" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-11607" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-11608" href="../Subtyping/#plfa_plfa-part2-Subtyping-11471" class="Function">vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-11620" href="../Subtyping/#plfa_plfa-part2-Subtyping-11596" class="Bound">As</a><a id="plfa_plfa-part2-Subtyping-11622" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-11624" href="../Subtyping/#plfa_plfa-part2-Subtyping-11471" class="Function">vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-11636" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-11637" href="../Subtyping/#plfa_plfa-part2-Subtyping-11637" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-11638" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11640" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="plfa_plfa-part2-Subtyping-11643" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11645" class="Number">0</a>
<a id="plfa_plfa-part2-Subtyping-11647" href="../Subtyping/#plfa_plfa-part2-Subtyping-11471" class="Function">vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-11659" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-11660" href="../Subtyping/#plfa_plfa-part2-Subtyping-11660" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-11661" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11663" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-11664" href="../Subtyping/#plfa_plfa-part2-Subtyping-11664" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-11666" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-11668" href="../Subtyping/#plfa_plfa-part2-Subtyping-11668" class="Bound">xs</a><a id="plfa_plfa-part2-Subtyping-11670" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-11672" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11674" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11682" href="../Subtyping/#plfa_plfa-part2-Subtyping-11664" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-11684" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="plfa_plfa-part2-Subtyping-11686" href="../Subtyping/#plfa_plfa-part2-Subtyping-11471" class="Function">vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-11698" href="../Subtyping/#plfa_plfa-part2-Subtyping-11668" class="Bound">xs</a>
</pre>The size of a type is always positive.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-ty-size-pos"></a><a id="plfa_plfa-part2-Subtyping-11753" href="../Subtyping/#plfa_plfa-part2-Subtyping-11753" class="Function">ty-size-pos</a> <a id="plfa_plfa-part2-Subtyping-11765" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11767" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-11769" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-11770" href="../Subtyping/#plfa_plfa-part2-Subtyping-11770" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-11771" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11773" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-11775" class="Number">0</a> <a id="plfa_plfa-part2-Subtyping-11777" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1047" class="Function Operator">&lt;</a> <a id="plfa_plfa-part2-Subtyping-11779" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-11787" href="../Subtyping/#plfa_plfa-part2-Subtyping-11770" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-11789" href="../Subtyping/#plfa_plfa-part2-Subtyping-11753" class="Function">ty-size-pos</a> <a id="plfa_plfa-part2-Subtyping-11801" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-11802" href="../Subtyping/#plfa_plfa-part2-Subtyping-11802" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-11804" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-11806" href="../Subtyping/#plfa_plfa-part2-Subtyping-11806" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-11807" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11809" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11811" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1002" class="InductiveConstructor">s≤s</a> <a id="plfa_plfa-part2-Subtyping-11815" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a>
<a id="plfa_plfa-part2-Subtyping-11819" href="../Subtyping/#plfa_plfa-part2-Subtyping-11753" class="Function">ty-size-pos</a> <a id="plfa_plfa-part2-Subtyping-11831" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-11832" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a><a id="plfa_plfa-part2-Subtyping-11834" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11836" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11838" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1002" class="InductiveConstructor">s≤s</a> <a id="plfa_plfa-part2-Subtyping-11842" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a>
<a id="plfa_plfa-part2-Subtyping-11846" href="../Subtyping/#plfa_plfa-part2-Subtyping-11753" class="Function">ty-size-pos</a> <a id="plfa_plfa-part2-Subtyping-11858" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-11859" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-11861" href="../Subtyping/#plfa_plfa-part2-Subtyping-11861" class="Bound">fs</a> <a id="plfa_plfa-part2-Subtyping-11864" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-11866" href="../Subtyping/#plfa_plfa-part2-Subtyping-11866" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-11869" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-11871" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-11873" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-11875" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#1002" class="InductiveConstructor">s≤s</a> <a id="plfa_plfa-part2-Subtyping-11879" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a>
</pre>The size of a type in a vector is less-or-equal in size to the entire vector.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-lookup-vec-ty-size"></a><a id="plfa_plfa-part2-Subtyping-11974" href="../Subtyping/#plfa_plfa-part2-Subtyping-11974" class="Function">lookup-vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-11993" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-11995" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-11997" href="../Subtyping/#plfa_plfa-part2-Subtyping-11997" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-11998" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12000" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12001" href="../Subtyping/#plfa_plfa-part2-Subtyping-12001" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-12004" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-12006" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-12010" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-12015" href="../Subtyping/#plfa_plfa-part2-Subtyping-11997" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-12016" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12018" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12019" href="../Subtyping/#plfa_plfa-part2-Subtyping-12019" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-12020" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Subtyping-12025" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-12027" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-12035" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12036" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-12043" href="../Subtyping/#plfa_plfa-part2-Subtyping-12001" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-12046" href="../Subtyping/#plfa_plfa-part2-Subtyping-12019" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-12047" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-12049" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="plfa_plfa-part2-Subtyping-12051" href="../Subtyping/#plfa_plfa-part2-Subtyping-11471" class="Function">vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-12063" href="../Subtyping/#plfa_plfa-part2-Subtyping-12001" class="Bound">As</a>
<a id="plfa_plfa-part2-Subtyping-12066" href="../Subtyping/#plfa_plfa-part2-Subtyping-11974" class="Function">lookup-vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-12085" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12086" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-12090" href="../Subtyping/#plfa_plfa-part2-Subtyping-12090" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-12091" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12093" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12094" href="../Subtyping/#plfa_plfa-part2-Subtyping-12094" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-12096" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-12098" href="../Subtyping/#plfa_plfa-part2-Subtyping-12098" class="Bound">As</a><a id="plfa_plfa-part2-Subtyping-12100" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12102" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12103" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-12107" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12109" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12111" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#16464" class="Function">m≤m+n</a> <a id="plfa_plfa-part2-Subtyping-12117" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-12119" class="Symbol">_</a>
<a id="plfa_plfa-part2-Subtyping-12121" href="../Subtyping/#plfa_plfa-part2-Subtyping-11974" class="Function">lookup-vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-12140" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12141" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-12145" href="../Subtyping/#plfa_plfa-part2-Subtyping-12145" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-12146" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12148" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12149" href="../Subtyping/#plfa_plfa-part2-Subtyping-12149" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-12151" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-12153" href="../Subtyping/#plfa_plfa-part2-Subtyping-12153" class="Bound">As</a><a id="plfa_plfa-part2-Subtyping-12155" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12157" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12158" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-12162" href="../Subtyping/#plfa_plfa-part2-Subtyping-12162" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-12163" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12165" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12167" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3908" class="Function">≤-trans</a> <a id="plfa_plfa-part2-Subtyping-12175" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12176" href="../Subtyping/#plfa_plfa-part2-Subtyping-11974" class="Function">lookup-vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-12195" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12196" href="../Subtyping/#plfa_plfa-part2-Subtyping-12145" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-12197" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12199" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12200" href="../Subtyping/#plfa_plfa-part2-Subtyping-12153" class="Bound">As</a><a id="plfa_plfa-part2-Subtyping-12202" class="Symbol">})</a> <a id="plfa_plfa-part2-Subtyping-12205" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12206" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#65767" class="Function">n≤m+n</a> <a id="plfa_plfa-part2-Subtyping-12212" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-12214" class="Symbol">_)</a>
</pre>Here is the proof of reflexivity, by induction on the size of the type.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-&lt;:-refl-aux"></a><a id="plfa_plfa-part2-Subtyping-12302" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12314" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-12316" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-12318" href="../Subtyping/#plfa_plfa-part2-Subtyping-12318" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12319" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12321" href="../Subtyping/#plfa_plfa-part2-Subtyping-12321" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-12322" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12324" href="../Subtyping/#plfa_plfa-part2-Subtyping-12324" class="Bound">m</a> <a id="plfa_plfa-part2-Subtyping-12326" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-12328" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-12336" href="../Subtyping/#plfa_plfa-part2-Subtyping-12321" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-12338" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="plfa_plfa-part2-Subtyping-12340" href="../Subtyping/#plfa_plfa-part2-Subtyping-12318" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12341" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12343" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-12345" href="../Subtyping/#plfa_plfa-part2-Subtyping-12321" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-12347" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-12350" href="../Subtyping/#plfa_plfa-part2-Subtyping-12321" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-12352" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12364" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12365" class="Number">0</a><a id="plfa_plfa-part2-Subtyping-12366" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12368" href="../Subtyping/#plfa_plfa-part2-Subtyping-12368" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-12369" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12371" href="../Subtyping/#plfa_plfa-part2-Subtyping-12371" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-12372" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-12378" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-12383" href="../Subtyping/#plfa_plfa-part2-Subtyping-11753" class="Function">ty-size-pos</a> <a id="plfa_plfa-part2-Subtyping-12395" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12396" href="../Subtyping/#plfa_plfa-part2-Subtyping-12368" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-12397" class="Symbol">}</a>
<a id="plfa_plfa-part2-Subtyping-12399" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-12403" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-12405" href="../Subtyping/#plfa_plfa-part2-Subtyping-12405" class="Bound">pos</a> <a id="plfa_plfa-part2-Subtyping-12409" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-Subtyping-12417" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#6324" class="Function">n≤0⇒n≡0</a> <a id="plfa_plfa-part2-Subtyping-12425" class="Bound">m</a>
    <a id="plfa_plfa-part2-Subtyping-12431" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-12436" href="../Subtyping/#plfa_plfa-part2-Subtyping-12405" class="Bound">pos</a>
<a id="plfa_plfa-part2-Subtyping-12440" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-12444" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-12446" class="Symbol">()</a>
<a id="plfa_plfa-part2-Subtyping-12449" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12461" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12462" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-12466" href="../Subtyping/#plfa_plfa-part2-Subtyping-12466" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12467" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12469" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a><a id="plfa_plfa-part2-Subtyping-12471" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12473" href="../Subtyping/#plfa_plfa-part2-Subtyping-12473" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-12474" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12476" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12478" href="../Subtyping/#plfa_plfa-part2-Subtyping-9240" class="InductiveConstructor">&lt;:-nat</a>
<a id="plfa_plfa-part2-Subtyping-12485" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12497" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12498" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-12502" href="../Subtyping/#plfa_plfa-part2-Subtyping-12502" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12503" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12505" href="../Subtyping/#plfa_plfa-part2-Subtyping-12505" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-12507" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-12509" href="../Subtyping/#plfa_plfa-part2-Subtyping-12509" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-12510" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12512" href="../Subtyping/#plfa_plfa-part2-Subtyping-12512" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-12513" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12515" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Subtyping-12519" class="Keyword">let</a> <a id="plfa_plfa-part2-Subtyping-12523" href="../Subtyping/#plfa_plfa-part2-Subtyping-12523" class="Bound">A&lt;:A</a> <a id="plfa_plfa-part2-Subtyping-12528" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12530" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12542" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12543" href="../Subtyping/#plfa_plfa-part2-Subtyping-12502" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12544" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12546" href="../Subtyping/#plfa_plfa-part2-Subtyping-12505" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-12547" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12549" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#16906" class="Function">m+n≤o⇒m≤o</a> <a id="plfa_plfa-part2-Subtyping-12559" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-12561" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12562" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3448" class="Function">≤-pred</a> <a id="plfa_plfa-part2-Subtyping-12569" href="../Subtyping/#plfa_plfa-part2-Subtyping-12512" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-12570" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-12572" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12574" class="Keyword">in</a>
  <a id="plfa_plfa-part2-Subtyping-12579" class="Keyword">let</a> <a id="plfa_plfa-part2-Subtyping-12583" href="../Subtyping/#plfa_plfa-part2-Subtyping-12583" class="Bound">B&lt;:B</a> <a id="plfa_plfa-part2-Subtyping-12588" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12590" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12602" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12603" href="../Subtyping/#plfa_plfa-part2-Subtyping-12502" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12604" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12606" href="../Subtyping/#plfa_plfa-part2-Subtyping-12509" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-12607" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12609" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#17041" class="Function">m+n≤o⇒n≤o</a> <a id="plfa_plfa-part2-Subtyping-12619" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-12621" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12622" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3448" class="Function">≤-pred</a> <a id="plfa_plfa-part2-Subtyping-12629" href="../Subtyping/#plfa_plfa-part2-Subtyping-12512" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-12630" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-12632" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12634" class="Keyword">in</a>
  <a id="plfa_plfa-part2-Subtyping-12639" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-12646" href="../Subtyping/#plfa_plfa-part2-Subtyping-12523" class="Bound">A&lt;:A</a> <a id="plfa_plfa-part2-Subtyping-12651" href="../Subtyping/#plfa_plfa-part2-Subtyping-12583" class="Bound">B&lt;:B</a>
<a id="plfa_plfa-part2-Subtyping-12656" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12668" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12669" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-12673" href="../Subtyping/#plfa_plfa-part2-Subtyping-12673" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12674" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12676" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-12678" href="../Subtyping/#plfa_plfa-part2-Subtyping-12678" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-12681" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-12683" href="../Subtyping/#plfa_plfa-part2-Subtyping-12683" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-12686" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-12688" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12689" href="../Subtyping/#plfa_plfa-part2-Subtyping-12689" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-12690" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12692" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12694" href="../Subtyping/#plfa_plfa-part2-Subtyping-12694" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-12695" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12697" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12699" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-12706" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12707" class="Argument">d1</a> <a id="plfa_plfa-part2-Subtyping-12710" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12712" href="../Subtyping/#plfa_plfa-part2-Subtyping-12689" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-12713" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12715" class="Argument">d2</a> <a id="plfa_plfa-part2-Subtyping-12718" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12720" href="../Subtyping/#plfa_plfa-part2-Subtyping-12689" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-12721" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12723" href="../Subtyping/#plfa_plfa-part2-Subtyping-7191" class="Function">⊆-refl</a> <a id="plfa_plfa-part2-Subtyping-12730" href="../Subtyping/#plfa_plfa-part2-Subtyping-12746" class="Function">G</a>
    <a id="plfa_plfa-part2-Subtyping-12736" class="Keyword">where</a>
    <a id="plfa_plfa-part2-Subtyping-12746" href="../Subtyping/#plfa_plfa-part2-Subtyping-12746" class="Function">G</a> <a id="plfa_plfa-part2-Subtyping-12748" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-12750" href="../Subtyping/#plfa_plfa-part2-Subtyping-12678" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-12753" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-12755" href="../Subtyping/#plfa_plfa-part2-Subtyping-12683" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-12758" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-12761" href="../Subtyping/#plfa_plfa-part2-Subtyping-12678" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-12764" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-12766" href="../Subtyping/#plfa_plfa-part2-Subtyping-12683" class="Bound">As</a>
    <a id="plfa_plfa-part2-Subtyping-12773" href="../Subtyping/#plfa_plfa-part2-Subtyping-12746" class="Function">G</a> <a id="plfa_plfa-part2-Subtyping-12775" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12776" href="../Subtyping/#plfa_plfa-part2-Subtyping-12776" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-12777" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12779" href="../Subtyping/#plfa_plfa-part2-Subtyping-12779" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-12780" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-12782" href="../Subtyping/#plfa_plfa-part2-Subtyping-12782" class="Bound">lij</a> <a id="plfa_plfa-part2-Subtyping-12786" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-Subtyping-12794" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-12814" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12815" href="../Subtyping/#plfa_plfa-part2-Subtyping-6721" class="Function">distinct-relevant</a> <a id="plfa_plfa-part2-Subtyping-12833" href="../Subtyping/#plfa_plfa-part2-Subtyping-12689" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-12834" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-12836" href="../Subtyping/#plfa_plfa-part2-Subtyping-12782" class="Bound">lij</a> <a id="plfa_plfa-part2-Subtyping-12840" class="Symbol">=</a>
        <a id="plfa_plfa-part2-Subtyping-12850" class="Keyword">let</a> <a id="plfa_plfa-part2-Subtyping-12854" href="../Subtyping/#plfa_plfa-part2-Subtyping-12854" class="Bound">As[i]≤n</a> <a id="plfa_plfa-part2-Subtyping-12862" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12864" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3908" class="Function">≤-trans</a> <a id="plfa_plfa-part2-Subtyping-12872" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12873" href="../Subtyping/#plfa_plfa-part2-Subtyping-11974" class="Function">lookup-vec-ty-size</a> <a id="plfa_plfa-part2-Subtyping-12892" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12893" class="Argument">As</a> <a id="plfa_plfa-part2-Subtyping-12896" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-12898" href="../Subtyping/#plfa_plfa-part2-Subtyping-12683" class="Bound">As</a><a id="plfa_plfa-part2-Subtyping-12900" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12902" href="../Subtyping/#plfa_plfa-part2-Subtyping-12776" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-12903" class="Symbol">})</a> <a id="plfa_plfa-part2-Subtyping-12906" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-12907" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3448" class="Function">≤-pred</a> <a id="plfa_plfa-part2-Subtyping-12914" href="../Subtyping/#plfa_plfa-part2-Subtyping-12694" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-12915" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-12917" class="Keyword">in</a>
        <a id="plfa_plfa-part2-Subtyping-12928" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-12940" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-12941" href="../Subtyping/#plfa_plfa-part2-Subtyping-12673" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-12942" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12944" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-12951" href="../Subtyping/#plfa_plfa-part2-Subtyping-12683" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-12954" href="../Subtyping/#plfa_plfa-part2-Subtyping-12776" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-12955" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-12957" href="../Subtyping/#plfa_plfa-part2-Subtyping-12854" class="Bound">As[i]≤n</a><a id="plfa_plfa-part2-Subtyping-12964" class="Symbol">}</a>
</pre><p>The theorem statement uses <code>n</code> as an upper bound on the size of the type <code>A</code> and proceeds by induction on <code>n</code>.</p><ul><li><p>If it is <code>0</code>, then we have a contradiction because the size of a type is always positive.</p></li><li><p>If it is <code>suc n</code>, we proceed by cases on the type <code>A</code>.</p><ul><li>If it is <code>ℕ</code>, then we have <code>ℕ &lt;: ℕ</code> by rule <code>&lt;:-nat</code>.</li><li>If it is <code>A ⇒ B</code>, then by induction we have <code>A &lt;: A</code> and <code>B &lt;: B</code>. We conclude that <code>A ⇒ B &lt;: A ⇒ B</code> by rule <code>&lt;:-fun</code>.</li><li>If it is <code>｛ ls ⦂ As ｝</code>, then it suffices to prove that <code>ls ⊆ ls</code> and <code>ls ⦂ As &lt;: ls ⦂ As</code>. The former is proved by <code>⊆-refl</code>. Regarding the latter, we need to show that for any <code>i</code> and <code>j</code>, <code>lookup ls j ≡ lookup ls i</code> implies <code>lookup As j &lt;: lookup As i</code>. Because <code>lookup</code> is injective on distinct vectors, we have <code>i ≡ j</code>. We then use the induction hypothesis to show that <code>lookup As i &lt;: lookup As i</code>, noting that the size of <code>lookup As i</code> is less-than-or-equal to the size of <code>As</code>, which is one smaller than the size of <code>｛ ls ⦂ As ｝</code>.</li></ul></li></ul>The following corollary packages up reflexivity for ease of use.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-&lt;:-refl"></a><a id="plfa_plfa-part2-Subtyping-14065" href="../Subtyping/#plfa_plfa-part2-Subtyping-14065" class="Function">&lt;:-refl</a> <a id="plfa_plfa-part2-Subtyping-14073" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-14075" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-14077" href="../Subtyping/#plfa_plfa-part2-Subtyping-14077" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-14078" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14080" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-14082" href="../Subtyping/#plfa_plfa-part2-Subtyping-14077" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-14084" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-14087" href="../Subtyping/#plfa_plfa-part2-Subtyping-14077" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-14089" href="../Subtyping/#plfa_plfa-part2-Subtyping-14065" class="Function">&lt;:-refl</a> <a id="plfa_plfa-part2-Subtyping-14097" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14098" href="../Subtyping/#plfa_plfa-part2-Subtyping-14098" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-14099" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14101" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-14103" href="../Subtyping/#plfa_plfa-part2-Subtyping-12302" class="Function">&lt;:-refl-aux</a> <a id="plfa_plfa-part2-Subtyping-14115" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14116" href="../Subtyping/#plfa_plfa-part2-Subtyping-11446" class="Function">ty-size</a> <a id="plfa_plfa-part2-Subtyping-14124" href="../Subtyping/#plfa_plfa-part2-Subtyping-14098" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-14125" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-14127" href="../Subtyping/#plfa_plfa-part2-Subtyping-14098" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-14128" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-14130" href="https://agda.github.io/agda-stdlib/v1.3/Data.Nat.Properties.html#3725" class="Function">≤-refl</a><a id="plfa_plfa-part2-Subtyping-14136" class="Symbol">}</a>
</pre><h2 id="subtyping-is-transitive">Subtyping is transitive</h2><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-&lt;:-trans"></a><a id="plfa_plfa-part2-Subtyping-14179" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-14188" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-14190" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-14192" href="../Subtyping/#plfa_plfa-part2-Subtyping-14192" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-14194" href="../Subtyping/#plfa_plfa-part2-Subtyping-14194" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-14196" href="../Subtyping/#plfa_plfa-part2-Subtyping-14196" class="Bound">C</a><a id="plfa_plfa-part2-Subtyping-14197" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-14203" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-14205" href="../Subtyping/#plfa_plfa-part2-Subtyping-14192" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-14207" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-14210" href="../Subtyping/#plfa_plfa-part2-Subtyping-14194" class="Bound">B</a>   <a id="plfa_plfa-part2-Subtyping-14214" class="Symbol">→</a>   <a id="plfa_plfa-part2-Subtyping-14218" href="../Subtyping/#plfa_plfa-part2-Subtyping-14194" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-14220" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-14223" href="../Subtyping/#plfa_plfa-part2-Subtyping-14196" class="Bound">C</a>
      <a id="plfa_plfa-part2-Subtyping-14231" class="Comment">-------------------</a>
    <a id="plfa_plfa-part2-Subtyping-14255" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-14257" href="../Subtyping/#plfa_plfa-part2-Subtyping-14192" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-14259" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-14262" href="../Subtyping/#plfa_plfa-part2-Subtyping-14196" class="Bound">C</a>
<a id="plfa_plfa-part2-Subtyping-14264" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-14273" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14274" href="../Subtyping/#plfa_plfa-part2-Subtyping-14274" class="Bound">A₁</a> <a id="plfa_plfa-part2-Subtyping-14277" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-14279" href="../Subtyping/#plfa_plfa-part2-Subtyping-14279" class="Bound">A₂</a><a id="plfa_plfa-part2-Subtyping-14281" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14283" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14284" href="../Subtyping/#plfa_plfa-part2-Subtyping-14284" class="Bound">B₁</a> <a id="plfa_plfa-part2-Subtyping-14287" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-14289" href="../Subtyping/#plfa_plfa-part2-Subtyping-14289" class="Bound">B₂</a><a id="plfa_plfa-part2-Subtyping-14291" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14293" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14294" href="../Subtyping/#plfa_plfa-part2-Subtyping-14294" class="Bound">C₁</a> <a id="plfa_plfa-part2-Subtyping-14297" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-14299" href="../Subtyping/#plfa_plfa-part2-Subtyping-14299" class="Bound">C₂</a><a id="plfa_plfa-part2-Subtyping-14301" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14303" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14304" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-14311" href="../Subtyping/#plfa_plfa-part2-Subtyping-14311" class="Bound">A₁&lt;:B₁</a> <a id="plfa_plfa-part2-Subtyping-14318" href="../Subtyping/#plfa_plfa-part2-Subtyping-14318" class="Bound">A₂&lt;:B₂</a><a id="plfa_plfa-part2-Subtyping-14324" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14326" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14327" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-14334" href="../Subtyping/#plfa_plfa-part2-Subtyping-14334" class="Bound">B₁&lt;:C₁</a> <a id="plfa_plfa-part2-Subtyping-14341" href="../Subtyping/#plfa_plfa-part2-Subtyping-14341" class="Bound">B₂&lt;:C₂</a><a id="plfa_plfa-part2-Subtyping-14347" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14349" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-14355" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-14362" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14363" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-14372" href="../Subtyping/#plfa_plfa-part2-Subtyping-14334" class="Bound">B₁&lt;:C₁</a> <a id="plfa_plfa-part2-Subtyping-14379" href="../Subtyping/#plfa_plfa-part2-Subtyping-14311" class="Bound">A₁&lt;:B₁</a><a id="plfa_plfa-part2-Subtyping-14385" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14387" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14388" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-14397" href="../Subtyping/#plfa_plfa-part2-Subtyping-14318" class="Bound">A₂&lt;:B₂</a> <a id="plfa_plfa-part2-Subtyping-14404" href="../Subtyping/#plfa_plfa-part2-Subtyping-14341" class="Bound">B₂&lt;:C₂</a><a id="plfa_plfa-part2-Subtyping-14410" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-14412" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-14421" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14422" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Subtyping-14423" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="DottedPattern InductiveConstructor">`ℕ</a><a id="plfa_plfa-part2-Subtyping-14425" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14427" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14428" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a><a id="plfa_plfa-part2-Subtyping-14430" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14432" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14433" class="DottedPattern Symbol">.</a><a id="plfa_plfa-part2-Subtyping-14434" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="DottedPattern InductiveConstructor">`ℕ</a><a id="plfa_plfa-part2-Subtyping-14436" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14438" href="../Subtyping/#plfa_plfa-part2-Subtyping-9240" class="InductiveConstructor">&lt;:-nat</a> <a id="plfa_plfa-part2-Subtyping-14445" href="../Subtyping/#plfa_plfa-part2-Subtyping-9240" class="InductiveConstructor">&lt;:-nat</a> <a id="plfa_plfa-part2-Subtyping-14452" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-14454" href="../Subtyping/#plfa_plfa-part2-Subtyping-9240" class="InductiveConstructor">&lt;:-nat</a>
<a id="plfa_plfa-part2-Subtyping-14461" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-14470" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14471" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-14473" href="../Subtyping/#plfa_plfa-part2-Subtyping-14473" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-14476" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-14478" href="../Subtyping/#plfa_plfa-part2-Subtyping-14478" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-14481" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a><a id="plfa_plfa-part2-Subtyping-14482" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14483" href="../Subtyping/#plfa_plfa-part2-Subtyping-14483" class="Bound">d1</a><a id="plfa_plfa-part2-Subtyping-14485" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14487" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14489" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14490" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-14492" href="../Subtyping/#plfa_plfa-part2-Subtyping-14492" class="Bound">ms</a> <a id="plfa_plfa-part2-Subtyping-14495" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-14497" href="../Subtyping/#plfa_plfa-part2-Subtyping-14497" class="Bound">Bs</a> <a id="plfa_plfa-part2-Subtyping-14500" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-14502" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14503" href="../Subtyping/#plfa_plfa-part2-Subtyping-14503" class="Bound">d2</a><a id="plfa_plfa-part2-Subtyping-14505" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14507" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14509" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14510" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-14512" href="../Subtyping/#plfa_plfa-part2-Subtyping-14512" class="Bound">ns</a> <a id="plfa_plfa-part2-Subtyping-14515" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-14517" href="../Subtyping/#plfa_plfa-part2-Subtyping-14517" class="Bound">Cs</a> <a id="plfa_plfa-part2-Subtyping-14520" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-14522" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14523" href="../Subtyping/#plfa_plfa-part2-Subtyping-14523" class="Bound">d3</a><a id="plfa_plfa-part2-Subtyping-14525" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14527" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-14533" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14534" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-14541" href="../Subtyping/#plfa_plfa-part2-Subtyping-14541" class="Bound">ms⊆ls</a> <a id="plfa_plfa-part2-Subtyping-14547" href="../Subtyping/#plfa_plfa-part2-Subtyping-14547" class="Bound">As&lt;:Bs</a><a id="plfa_plfa-part2-Subtyping-14553" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14555" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14556" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-14563" href="../Subtyping/#plfa_plfa-part2-Subtyping-14563" class="Bound">ns⊆ms</a> <a id="plfa_plfa-part2-Subtyping-14569" href="../Subtyping/#plfa_plfa-part2-Subtyping-14569" class="Bound">Bs&lt;:Cs</a><a id="plfa_plfa-part2-Subtyping-14575" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14577" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-14583" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-14590" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14591" href="../Subtyping/#plfa_plfa-part2-Subtyping-7266" class="Function">⊆-trans</a> <a id="plfa_plfa-part2-Subtyping-14599" href="../Subtyping/#plfa_plfa-part2-Subtyping-14563" class="Bound">ns⊆ms</a> <a id="plfa_plfa-part2-Subtyping-14605" href="../Subtyping/#plfa_plfa-part2-Subtyping-14541" class="Bound">ms⊆ls</a><a id="plfa_plfa-part2-Subtyping-14610" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14612" href="../Subtyping/#plfa_plfa-part2-Subtyping-14633" class="Function">As&lt;:Cs</a>
    <a id="plfa_plfa-part2-Subtyping-14623" class="Keyword">where</a>
    <a id="plfa_plfa-part2-Subtyping-14633" href="../Subtyping/#plfa_plfa-part2-Subtyping-14633" class="Function">As&lt;:Cs</a> <a id="plfa_plfa-part2-Subtyping-14640" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-14642" href="../Subtyping/#plfa_plfa-part2-Subtyping-14473" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-14645" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-14647" href="../Subtyping/#plfa_plfa-part2-Subtyping-14478" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-14650" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-14653" href="../Subtyping/#plfa_plfa-part2-Subtyping-14512" class="Bound">ns</a> <a id="plfa_plfa-part2-Subtyping-14656" href="../Subtyping/#plfa_plfa-part2-Subtyping-10907" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-14658" href="../Subtyping/#plfa_plfa-part2-Subtyping-14517" class="Bound">Cs</a>
    <a id="plfa_plfa-part2-Subtyping-14665" href="../Subtyping/#plfa_plfa-part2-Subtyping-14633" class="Function">As&lt;:Cs</a> <a id="plfa_plfa-part2-Subtyping-14672" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14673" href="../Subtyping/#plfa_plfa-part2-Subtyping-14673" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-14674" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-14676" href="../Subtyping/#plfa_plfa-part2-Subtyping-14676" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-14677" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14679" href="../Subtyping/#plfa_plfa-part2-Subtyping-14679" class="Bound">ls[j]=ns[i]</a>
        <a id="plfa_plfa-part2-Subtyping-14699" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-14704" href="../Subtyping/#plfa_plfa-part2-Subtyping-7943" class="Function">lookup-⊆</a> <a id="plfa_plfa-part2-Subtyping-14713" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14714" class="Argument">i</a> <a id="plfa_plfa-part2-Subtyping-14716" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-14718" href="../Subtyping/#plfa_plfa-part2-Subtyping-14673" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-14719" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14721" href="../Subtyping/#plfa_plfa-part2-Subtyping-14563" class="Bound">ns⊆ms</a>
    <a id="plfa_plfa-part2-Subtyping-14731" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-14735" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-14737" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-14739" href="../Subtyping/#plfa_plfa-part2-Subtyping-14739" class="Bound">k</a> <a id="plfa_plfa-part2-Subtyping-14741" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-14743" href="../Subtyping/#plfa_plfa-part2-Subtyping-14743" class="Bound">ns[i]=ms[k]</a> <a id="plfa_plfa-part2-Subtyping-14755" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part2-Subtyping-14757" class="Symbol">=</a>
        <a id="plfa_plfa-part2-Subtyping-14767" class="Keyword">let</a> <a id="plfa_plfa-part2-Subtyping-14771" href="../Subtyping/#plfa_plfa-part2-Subtyping-14771" class="Bound">As[j]&lt;:Bs[k]</a> <a id="plfa_plfa-part2-Subtyping-14784" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-14786" href="../Subtyping/#plfa_plfa-part2-Subtyping-14547" class="Bound">As&lt;:Bs</a> <a id="plfa_plfa-part2-Subtyping-14793" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14794" href="../Subtyping/#plfa_plfa-part2-Subtyping-14739" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-14795" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-14797" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-14798" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14800" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14801" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="plfa_plfa-part2-Subtyping-14807" class="Bound">ls[j]=ns[i]</a> <a id="plfa_plfa-part2-Subtyping-14819" href="../Subtyping/#plfa_plfa-part2-Subtyping-14743" class="Bound">ns[i]=ms[k]</a><a id="plfa_plfa-part2-Subtyping-14830" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14832" class="Keyword">in</a>
        <a id="plfa_plfa-part2-Subtyping-14843" class="Keyword">let</a> <a id="plfa_plfa-part2-Subtyping-14847" href="../Subtyping/#plfa_plfa-part2-Subtyping-14847" class="Bound">Bs[k]&lt;:Cs[i]</a> <a id="plfa_plfa-part2-Subtyping-14860" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-14862" href="../Subtyping/#plfa_plfa-part2-Subtyping-14569" class="Bound">Bs&lt;:Cs</a> <a id="plfa_plfa-part2-Subtyping-14869" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-14870" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-14871" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-14873" href="../Subtyping/#plfa_plfa-part2-Subtyping-14739" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-14874" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-14876" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-14877" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part2-Subtyping-14881" href="../Subtyping/#plfa_plfa-part2-Subtyping-14743" class="Bound">ns[i]=ms[k]</a><a id="plfa_plfa-part2-Subtyping-14892" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-14894" class="Keyword">in</a>
        <a id="plfa_plfa-part2-Subtyping-14905" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-14914" href="../Subtyping/#plfa_plfa-part2-Subtyping-14771" class="Bound">As[j]&lt;:Bs[k]</a> <a id="plfa_plfa-part2-Subtyping-14927" href="../Subtyping/#plfa_plfa-part2-Subtyping-14847" class="Bound">Bs[k]&lt;:Cs[i]</a>
</pre><p>The proof is by induction on the derivations of <code>A &lt;: B</code> and <code>B &lt;: C</code>.</p><ul><li><p>If both derivations end with <code>&lt;:-nat</code>: then we immediately conclude that <code>ℕ &lt;: ℕ</code>.</p></li><li><p>If both derivations end with <code>&lt;:-fun</code>: we have <code>A₁ ⇒ A₂ &lt;: B₁ ⇒ B₂</code> and <code>B₁ ⇒ B₂ &lt;: C₁ ⇒ C₂</code>. So <code>A₁ &lt;: B₁</code> and <code>B₁ &lt;: C₁</code>, thus <code>A₁ &lt;: C₁</code> by the induction hypothesis. We also have <code>A₂ &lt;: B₂</code> and <code>B₂ &lt;: C₂</code>, so by the induction hypothesis we have <code>A₂ &lt;: C₂</code>. We conclude that <code>A₁ ⇒ A₂ &lt;: C₁ ⇒ C₂</code> by rule <code>&lt;:-fun</code>.</p></li><li><p>If both derivations end with <code>&lt;:-rcd</code>, so we have <code>｛ ls ⦂ As ｝ &lt;: ｛ ms ⦂ Bs ｝</code> and <code>｛ ms ⦂ Bs ｝ &lt;: ｛ ns ⦂ Cs ｝</code>. From <code>ls ⊆ ms</code> and <code>ms ⊆ ns</code> we have <code>ls ⊆ ns</code> because <code>⊆</code> is transitive. Next we need to prove that <code>ls ⦂ As &lt;: ns ⦂ Cs</code>. Suppose <code>lookup ls j ≡ lookup ns i</code> for an arbitrary <code>i</code> and <code>j</code>. We need to prove that <code>lookup As j &lt;: lookup Cs i</code>. By the induction hypothesis, it suffices to show that <code>lookup As j &lt;: lookup Bs k</code> and <code>lookup Bs k &lt;: lookup Cs i</code> for some <code>k</code>. We can obtain the former from <code>｛ ls ⦂ As ｝ &lt;: ｛ ms ⦂ Bs ｝</code> if we can prove that <code>lookup ls j ≡ lookup ms k</code>. We already have <code>lookup ls j ≡ lookup ns i</code> and we obtain <code>lookup ns i ≡ lookup ms k</code> by use of the lemma <code>lookup-⊆</code>, noting that <code>ns ⊆ ms</code>. We can obtain the later, that <code>lookup Bs k &lt;: lookup Cs i</code>, from <code>｛ ms ⦂ Bs ｝ &lt;: ｛ ns ⦂ Cs ｝</code>. It suffices to show that <code>lookup ms k ≡ lookup ns i</code>, which we have by symmetry.</p></li></ul><h2 id="contexts">Contexts</h2><p>We choose to represent variables with de Bruijn indices, so contexts are sequences of types.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-16492" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-Context"></a><a id="plfa_plfa-part2-Subtyping-16497" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-16505" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-16507" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-16511" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Subtyping-Context.∅"></a><a id="plfa_plfa-part2-Subtyping-16519" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a>   <a id="plfa_plfa-part2-Subtyping-16523" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-16525" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a>
  <a id="plfa_plfa-part2-Subtyping-Context._,_"></a><a id="plfa_plfa-part2-Subtyping-16535" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part2-Subtyping-16539" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-16541" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-16549" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16551" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-16556" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16558" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a>
</pre><h2 id="variables-and-the-lookup-judgment">Variables and the lookup judgment</h2><p>The lookup judgment is a three-place relation, with a context, a de Bruijn index, and a type.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-16712" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-_∋_⦂_"></a><a id="plfa_plfa-part2-Subtyping-16717" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">_∋_⦂_</a> <a id="plfa_plfa-part2-Subtyping-16723" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-16725" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-16733" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16735" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="plfa_plfa-part2-Subtyping-16737" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16739" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-16744" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16746" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-16750" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Subtyping-_∋_⦂_.Z"></a><a id="plfa_plfa-part2-Subtyping-16759" href="../Subtyping/#plfa_plfa-part2-Subtyping-16759" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Subtyping-16761" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-16763" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-16765" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-16766" href="../Subtyping/#plfa_plfa-part2-Subtyping-16766" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-16768" href="../Subtyping/#plfa_plfa-part2-Subtyping-16768" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-16769" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Subtyping-16777" class="Comment">------------------</a>
    <a id="plfa_plfa-part2-Subtyping-16800" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16802" href="../Subtyping/#plfa_plfa-part2-Subtyping-16766" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-16804" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-16806" href="../Subtyping/#plfa_plfa-part2-Subtyping-16768" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-16808" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-16810" class="Number">0</a> <a id="plfa_plfa-part2-Subtyping-16812" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-16814" href="../Subtyping/#plfa_plfa-part2-Subtyping-16768" class="Bound">A</a>

  <a id="plfa_plfa-part2-Subtyping-_∋_⦂_.S"></a><a id="plfa_plfa-part2-Subtyping-16819" href="../Subtyping/#plfa_plfa-part2-Subtyping-16819" class="InductiveConstructor">S</a> <a id="plfa_plfa-part2-Subtyping-16821" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-16823" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-16825" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-16826" href="../Subtyping/#plfa_plfa-part2-Subtyping-16826" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-16828" href="../Subtyping/#plfa_plfa-part2-Subtyping-16828" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-16830" href="../Subtyping/#plfa_plfa-part2-Subtyping-16830" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-16832" href="../Subtyping/#plfa_plfa-part2-Subtyping-16832" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-16833" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-16839" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16841" href="../Subtyping/#plfa_plfa-part2-Subtyping-16826" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-16843" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-16845" href="../Subtyping/#plfa_plfa-part2-Subtyping-16828" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-16847" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-16849" href="../Subtyping/#plfa_plfa-part2-Subtyping-16830" class="Bound">A</a>
      <a id="plfa_plfa-part2-Subtyping-16857" class="Comment">------------------</a>
    <a id="plfa_plfa-part2-Subtyping-16880" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-16882" href="../Subtyping/#plfa_plfa-part2-Subtyping-16826" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-16884" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-16886" href="../Subtyping/#plfa_plfa-part2-Subtyping-16832" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-16888" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-16890" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-16891" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-16895" href="../Subtyping/#plfa_plfa-part2-Subtyping-16828" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-16896" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-16898" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-16900" href="../Subtyping/#plfa_plfa-part2-Subtyping-16830" class="Bound">A</a>
</pre><ul><li><p>The index <code>0</code> has the type at the front of the context.</p></li><li><p>For the index <code>suc x</code>, we recursively look up its type in the remaining context <code>Γ</code>.</p></li></ul><h2 id="terms-and-the-typing-judgment">Terms and the typing judgment</h2><p>As mentioned above, variables are de Bruijn indices, which we represent with natural numbers.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-Id"></a><a id="plfa_plfa-part2-Subtyping-17194" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-17197" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17199" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Subtyping-17203" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-17206" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-17208" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
</pre><p>Our terms are extrinsic, so we define a <code>Term</code> data type similar to the one in the <a href="../Lambda/">Lambda</a> chapter, but adapted for de Bruijn indices. The two new term constructors are for record creation and field access.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-17443" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-Term"></a><a id="plfa_plfa-part2-Subtyping-17448" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17453" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17455" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-17459" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Subtyping-Term.`_"></a><a id="plfa_plfa-part2-Subtyping-17467" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`_</a>                      <a id="plfa_plfa-part2-Subtyping-17491" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17493" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-17496" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17498" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term.ƛ_"></a><a id="plfa_plfa-part2-Subtyping-17505" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ_</a>                      <a id="plfa_plfa-part2-Subtyping-17529" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17531" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17536" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17538" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term._·_"></a><a id="plfa_plfa-part2-Subtyping-17545" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">_·_</a>                     <a id="plfa_plfa-part2-Subtyping-17569" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17571" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17576" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17578" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17583" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17585" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term.`zero"></a><a id="plfa_plfa-part2-Subtyping-17592" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a>                   <a id="plfa_plfa-part2-Subtyping-17616" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17618" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term.`suc_"></a><a id="plfa_plfa-part2-Subtyping-17625" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc_</a>                   <a id="plfa_plfa-part2-Subtyping-17649" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17651" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17656" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17658" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term.case_[zero⇒_|suc⇒_]"></a><a id="plfa_plfa-part2-Subtyping-17665" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case_[zero⇒_|suc⇒_]</a>     <a id="plfa_plfa-part2-Subtyping-17689" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17691" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17696" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17698" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17703" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17705" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17710" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17712" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term.μ_"></a><a id="plfa_plfa-part2-Subtyping-17719" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ_</a>                      <a id="plfa_plfa-part2-Subtyping-17743" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17745" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17750" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17752" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term.｛_:=_｝"></a><a id="plfa_plfa-part2-Subtyping-17759" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛_:=_｝</a>                 <a id="plfa_plfa-part2-Subtyping-17782" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17784" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-17785" href="../Subtyping/#plfa_plfa-part2-Subtyping-17785" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-17787" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17789" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part2-Subtyping-17790" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-17792" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-17793" href="../Subtyping/#plfa_plfa-part2-Subtyping-17793" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-17796" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17798" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-17802" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-17807" href="../Subtyping/#plfa_plfa-part2-Subtyping-17785" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-17808" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-17810" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-17811" href="../Subtyping/#plfa_plfa-part2-Subtyping-17811" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-17814" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17816" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-17820" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17825" href="../Subtyping/#plfa_plfa-part2-Subtyping-17785" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-17826" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-17828" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17830" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
  <a id="plfa_plfa-part2-Subtyping-Term._#_"></a><a id="plfa_plfa-part2-Subtyping-17837" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">_#_</a>                     <a id="plfa_plfa-part2-Subtyping-17861" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-17863" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-17868" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17870" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-17875" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-17877" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
</pre><p>In a record <code>｛ ls := Ms ｝</code>, we refer to the vector of terms <code>Ms</code> as the <em>field initializers</em>.</p><p>The typing judgment takes the form <code>Γ ⊢ M ⦂ A</code> and relies on an auxiliary judgment <code>Γ ⊢* Ms ⦂ As</code> for typing a vector of terms.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-18119" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-_⊢*_⦂_"></a><a id="plfa_plfa-part2-Subtyping-18124" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">_⊢*_⦂_</a> <a id="plfa_plfa-part2-Subtyping-18131" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18133" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-18141" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18143" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18145" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18146" href="../Subtyping/#plfa_plfa-part2-Subtyping-18146" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-18147" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-18149" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18151" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-18155" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-18160" href="../Subtyping/#plfa_plfa-part2-Subtyping-18146" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-18162" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18164" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-18168" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-18173" href="../Subtyping/#plfa_plfa-part2-Subtyping-18146" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-18175" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18177" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>

<a id="plfa_plfa-part2-Subtyping-18182" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_"></a><a id="plfa_plfa-part2-Subtyping-18187" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">_⊢_⦂_</a> <a id="plfa_plfa-part2-Subtyping-18193" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18195" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-18203" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18205" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-18210" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18212" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-18217" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18219" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-18223" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢`"></a><a id="plfa_plfa-part2-Subtyping-18232" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-18235" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18237" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18239" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18240" href="../Subtyping/#plfa_plfa-part2-Subtyping-18240" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18242" href="../Subtyping/#plfa_plfa-part2-Subtyping-18242" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-18244" href="../Subtyping/#plfa_plfa-part2-Subtyping-18244" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-18245" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-18251" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18253" href="../Subtyping/#plfa_plfa-part2-Subtyping-18240" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18255" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-18257" href="../Subtyping/#plfa_plfa-part2-Subtyping-18242" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-18259" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18261" href="../Subtyping/#plfa_plfa-part2-Subtyping-18244" class="Bound">A</a>
      <a id="plfa_plfa-part2-Subtyping-18269" class="Comment">-----------</a>
    <a id="plfa_plfa-part2-Subtyping-18285" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18287" href="../Subtyping/#plfa_plfa-part2-Subtyping-18240" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18289" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18291" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-18293" href="../Subtyping/#plfa_plfa-part2-Subtyping-18242" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-18295" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18297" href="../Subtyping/#plfa_plfa-part2-Subtyping-18244" class="Bound">A</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢ƛ"></a><a id="plfa_plfa-part2-Subtyping-18302" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a>  <a id="plfa_plfa-part2-Subtyping-18306" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18308" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18310" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18311" href="../Subtyping/#plfa_plfa-part2-Subtyping-18311" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18313" href="../Subtyping/#plfa_plfa-part2-Subtyping-18313" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-18315" href="../Subtyping/#plfa_plfa-part2-Subtyping-18315" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-18317" href="../Subtyping/#plfa_plfa-part2-Subtyping-18317" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-18318" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-18324" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18326" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-18327" href="../Subtyping/#plfa_plfa-part2-Subtyping-18311" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18329" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-18331" href="../Subtyping/#plfa_plfa-part2-Subtyping-18313" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-18332" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-18334" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18336" href="../Subtyping/#plfa_plfa-part2-Subtyping-18317" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-18338" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18340" href="../Subtyping/#plfa_plfa-part2-Subtyping-18315" class="Bound">B</a>
      <a id="plfa_plfa-part2-Subtyping-18348" class="Comment">---------------</a>
    <a id="plfa_plfa-part2-Subtyping-18368" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18370" href="../Subtyping/#plfa_plfa-part2-Subtyping-18311" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18372" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18374" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-18375" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-18377" href="../Subtyping/#plfa_plfa-part2-Subtyping-18317" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-18378" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-18380" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18382" href="../Subtyping/#plfa_plfa-part2-Subtyping-18313" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-18384" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-18386" href="../Subtyping/#plfa_plfa-part2-Subtyping-18315" class="Bound">B</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢·"></a><a id="plfa_plfa-part2-Subtyping-18391" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-18394" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18396" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18398" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18399" href="../Subtyping/#plfa_plfa-part2-Subtyping-18399" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18401" href="../Subtyping/#plfa_plfa-part2-Subtyping-18401" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-18403" href="../Subtyping/#plfa_plfa-part2-Subtyping-18403" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-18405" href="../Subtyping/#plfa_plfa-part2-Subtyping-18405" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-18407" href="../Subtyping/#plfa_plfa-part2-Subtyping-18407" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-18408" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-18414" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18416" href="../Subtyping/#plfa_plfa-part2-Subtyping-18399" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18418" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18420" href="../Subtyping/#plfa_plfa-part2-Subtyping-18405" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-18422" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18424" href="../Subtyping/#plfa_plfa-part2-Subtyping-18401" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-18426" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-18428" href="../Subtyping/#plfa_plfa-part2-Subtyping-18403" class="Bound">B</a>
    <a id="plfa_plfa-part2-Subtyping-18434" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18436" href="../Subtyping/#plfa_plfa-part2-Subtyping-18399" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18438" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18440" href="../Subtyping/#plfa_plfa-part2-Subtyping-18407" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18442" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18444" href="../Subtyping/#plfa_plfa-part2-Subtyping-18401" class="Bound">A</a>
      <a id="plfa_plfa-part2-Subtyping-18452" class="Comment">-------------</a>
    <a id="plfa_plfa-part2-Subtyping-18470" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18472" href="../Subtyping/#plfa_plfa-part2-Subtyping-18399" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18474" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18476" href="../Subtyping/#plfa_plfa-part2-Subtyping-18405" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-18478" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-18480" href="../Subtyping/#plfa_plfa-part2-Subtyping-18407" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18482" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18484" href="../Subtyping/#plfa_plfa-part2-Subtyping-18403" class="Bound">B</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢zero"></a><a id="plfa_plfa-part2-Subtyping-18489" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a> <a id="plfa_plfa-part2-Subtyping-18495" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18497" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18499" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18500" href="../Subtyping/#plfa_plfa-part2-Subtyping-18500" class="Bound">Γ</a><a id="plfa_plfa-part2-Subtyping-18501" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Subtyping-18509" class="Comment">--------------</a>
    <a id="plfa_plfa-part2-Subtyping-18528" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18530" href="../Subtyping/#plfa_plfa-part2-Subtyping-18500" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18532" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18534" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a> <a id="plfa_plfa-part2-Subtyping-18540" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18542" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢suc"></a><a id="plfa_plfa-part2-Subtyping-18548" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-18553" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18555" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18557" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18558" href="../Subtyping/#plfa_plfa-part2-Subtyping-18558" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18560" href="../Subtyping/#plfa_plfa-part2-Subtyping-18560" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-18561" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-18567" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18569" href="../Subtyping/#plfa_plfa-part2-Subtyping-18558" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18571" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18573" href="../Subtyping/#plfa_plfa-part2-Subtyping-18560" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18575" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18577" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>
      <a id="plfa_plfa-part2-Subtyping-18586" class="Comment">---------------</a>
    <a id="plfa_plfa-part2-Subtyping-18606" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18608" href="../Subtyping/#plfa_plfa-part2-Subtyping-18558" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18610" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18612" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-18617" href="../Subtyping/#plfa_plfa-part2-Subtyping-18560" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18619" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18621" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢case"></a><a id="plfa_plfa-part2-Subtyping-18627" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-18633" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18635" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18637" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18638" href="../Subtyping/#plfa_plfa-part2-Subtyping-18638" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18640" href="../Subtyping/#plfa_plfa-part2-Subtyping-18640" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-18642" href="../Subtyping/#plfa_plfa-part2-Subtyping-18642" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-18644" href="../Subtyping/#plfa_plfa-part2-Subtyping-18644" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18646" href="../Subtyping/#plfa_plfa-part2-Subtyping-18646" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-18647" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-18653" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18655" href="../Subtyping/#plfa_plfa-part2-Subtyping-18638" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18657" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18659" href="../Subtyping/#plfa_plfa-part2-Subtyping-18642" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-18661" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18663" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>
    <a id="plfa_plfa-part2-Subtyping-18670" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18672" href="../Subtyping/#plfa_plfa-part2-Subtyping-18638" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18674" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18676" href="../Subtyping/#plfa_plfa-part2-Subtyping-18644" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18678" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18680" href="../Subtyping/#plfa_plfa-part2-Subtyping-18640" class="Bound">A</a>
    <a id="plfa_plfa-part2-Subtyping-18686" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18688" href="../Subtyping/#plfa_plfa-part2-Subtyping-18638" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18690" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-18692" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a> <a id="plfa_plfa-part2-Subtyping-18695" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18697" href="../Subtyping/#plfa_plfa-part2-Subtyping-18646" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-18699" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18701" href="../Subtyping/#plfa_plfa-part2-Subtyping-18640" class="Bound">A</a>
      <a id="plfa_plfa-part2-Subtyping-18709" class="Comment">---------------------------------</a>
    <a id="plfa_plfa-part2-Subtyping-18747" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18749" href="../Subtyping/#plfa_plfa-part2-Subtyping-18638" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18751" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18753" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-18758" href="../Subtyping/#plfa_plfa-part2-Subtyping-18642" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-18760" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-18767" href="../Subtyping/#plfa_plfa-part2-Subtyping-18644" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18769" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-18775" href="../Subtyping/#plfa_plfa-part2-Subtyping-18646" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-18777" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a> <a id="plfa_plfa-part2-Subtyping-18779" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18781" href="../Subtyping/#plfa_plfa-part2-Subtyping-18640" class="Bound">A</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢μ"></a><a id="plfa_plfa-part2-Subtyping-18786" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-18789" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18791" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18793" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18794" href="../Subtyping/#plfa_plfa-part2-Subtyping-18794" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18796" href="../Subtyping/#plfa_plfa-part2-Subtyping-18796" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-18798" href="../Subtyping/#plfa_plfa-part2-Subtyping-18798" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-18799" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-18805" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18807" href="../Subtyping/#plfa_plfa-part2-Subtyping-18794" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18809" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-18811" href="../Subtyping/#plfa_plfa-part2-Subtyping-18796" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-18813" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18815" href="../Subtyping/#plfa_plfa-part2-Subtyping-18798" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18817" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18819" href="../Subtyping/#plfa_plfa-part2-Subtyping-18796" class="Bound">A</a>
      <a id="plfa_plfa-part2-Subtyping-18827" class="Comment">-------------</a>
    <a id="plfa_plfa-part2-Subtyping-18845" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18847" href="../Subtyping/#plfa_plfa-part2-Subtyping-18794" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18849" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18851" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ</a> <a id="plfa_plfa-part2-Subtyping-18853" href="../Subtyping/#plfa_plfa-part2-Subtyping-18798" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-18855" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18857" href="../Subtyping/#plfa_plfa-part2-Subtyping-18796" class="Bound">A</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢rcd"></a><a id="plfa_plfa-part2-Subtyping-18862" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-18867" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18869" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-18871" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-18872" href="../Subtyping/#plfa_plfa-part2-Subtyping-18872" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18874" href="../Subtyping/#plfa_plfa-part2-Subtyping-18874" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-18875" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-18877" href="../Subtyping/#plfa_plfa-part2-Subtyping-18877" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-18880" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18882" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-18886" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-18891" href="../Subtyping/#plfa_plfa-part2-Subtyping-18874" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-18892" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-18894" href="../Subtyping/#plfa_plfa-part2-Subtyping-18894" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-18897" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18899" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-18903" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-18908" href="../Subtyping/#plfa_plfa-part2-Subtyping-18874" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-18909" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-18911" href="../Subtyping/#plfa_plfa-part2-Subtyping-18911" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-18914" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18916" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-18920" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-18925" href="../Subtyping/#plfa_plfa-part2-Subtyping-18874" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-18926" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Subtyping-18933" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18935" href="../Subtyping/#plfa_plfa-part2-Subtyping-18872" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18937" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-18940" href="../Subtyping/#plfa_plfa-part2-Subtyping-18877" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-18943" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18945" href="../Subtyping/#plfa_plfa-part2-Subtyping-18894" class="Bound">As</a>
     <a id="plfa_plfa-part2-Subtyping-18953" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18955" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-18956" href="../Subtyping/#plfa_plfa-part2-Subtyping-18956" class="Bound">d</a> <a id="plfa_plfa-part2-Subtyping-18958" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-18960" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-18969" href="../Subtyping/#plfa_plfa-part2-Subtyping-18911" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-18971" class="Symbol">)</a>
     <a id="plfa_plfa-part2-Subtyping-18978" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-18980" href="../Subtyping/#plfa_plfa-part2-Subtyping-18872" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-18982" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-18984" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-18986" href="../Subtyping/#plfa_plfa-part2-Subtyping-18911" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-18989" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-18992" href="../Subtyping/#plfa_plfa-part2-Subtyping-18877" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-18995" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-18997" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-18999" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-19001" href="../Subtyping/#plfa_plfa-part2-Subtyping-18911" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-19004" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19006" href="../Subtyping/#plfa_plfa-part2-Subtyping-18894" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-19009" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-19011" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-19012" href="../Subtyping/#plfa_plfa-part2-Subtyping-18956" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-19013" class="Symbol">}</a>


  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢#"></a><a id="plfa_plfa-part2-Subtyping-19019" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-19022" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19024" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-19026" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-19027" href="../Subtyping/#plfa_plfa-part2-Subtyping-19027" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-19029" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19031" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part2-Subtyping-19032" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19034" href="../Subtyping/#plfa_plfa-part2-Subtyping-19034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19036" href="../Subtyping/#plfa_plfa-part2-Subtyping-19036" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-19038" href="../Subtyping/#plfa_plfa-part2-Subtyping-19038" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19040" href="../Subtyping/#plfa_plfa-part2-Subtyping-19040" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-19041" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19043" href="../Subtyping/#plfa_plfa-part2-Subtyping-19043" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-19046" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19048" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-19052" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-19057" href="../Subtyping/#plfa_plfa-part2-Subtyping-19027" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-19058" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19060" href="../Subtyping/#plfa_plfa-part2-Subtyping-19060" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-19063" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19065" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-19069" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-19074" href="../Subtyping/#plfa_plfa-part2-Subtyping-19027" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-19075" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19077" href="../Subtyping/#plfa_plfa-part2-Subtyping-19077" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-19078" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19080" href="../Subtyping/#plfa_plfa-part2-Subtyping-19080" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-19081" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Subtyping-19088" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19090" href="../Subtyping/#plfa_plfa-part2-Subtyping-19034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19092" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-19094" href="../Subtyping/#plfa_plfa-part2-Subtyping-19038" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19096" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19098" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-19100" href="../Subtyping/#plfa_plfa-part2-Subtyping-19043" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-19103" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19105" href="../Subtyping/#plfa_plfa-part2-Subtyping-19060" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-19108" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a><a id="plfa_plfa-part2-Subtyping-19109" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-19110" href="../Subtyping/#plfa_plfa-part2-Subtyping-19080" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-19111" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Subtyping-19118" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19120" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-19127" href="../Subtyping/#plfa_plfa-part2-Subtyping-19043" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-19130" href="../Subtyping/#plfa_plfa-part2-Subtyping-19077" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-19132" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-19134" href="../Subtyping/#plfa_plfa-part2-Subtyping-19040" class="Bound">l</a>
     <a id="plfa_plfa-part2-Subtyping-19141" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19143" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-19150" href="../Subtyping/#plfa_plfa-part2-Subtyping-19060" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-19153" href="../Subtyping/#plfa_plfa-part2-Subtyping-19077" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-19155" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-19157" href="../Subtyping/#plfa_plfa-part2-Subtyping-19036" class="Bound">A</a>
     <a id="plfa_plfa-part2-Subtyping-19164" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19166" href="../Subtyping/#plfa_plfa-part2-Subtyping-19034" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19168" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-19170" href="../Subtyping/#plfa_plfa-part2-Subtyping-19038" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19172" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-19174" href="../Subtyping/#plfa_plfa-part2-Subtyping-19040" class="Bound">l</a> <a id="plfa_plfa-part2-Subtyping-19176" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19178" href="../Subtyping/#plfa_plfa-part2-Subtyping-19036" class="Bound">A</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢_⦂_.⊢&lt;:"></a><a id="plfa_plfa-part2-Subtyping-19183" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-19187" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19189" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-19191" href="../Subtyping/#plfa_plfa-part2-Subtyping-19191" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19193" href="../Subtyping/#plfa_plfa-part2-Subtyping-19193" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19195" href="../Subtyping/#plfa_plfa-part2-Subtyping-19195" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-19197" href="../Subtyping/#plfa_plfa-part2-Subtyping-19197" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-19198" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-19204" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19206" href="../Subtyping/#plfa_plfa-part2-Subtyping-19191" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19208" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-19210" href="../Subtyping/#plfa_plfa-part2-Subtyping-19193" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19212" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19214" href="../Subtyping/#plfa_plfa-part2-Subtyping-19195" class="Bound">A</a>   <a id="plfa_plfa-part2-Subtyping-19218" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19220" href="../Subtyping/#plfa_plfa-part2-Subtyping-19195" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-19222" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-19225" href="../Subtyping/#plfa_plfa-part2-Subtyping-19197" class="Bound">B</a>
      <a id="plfa_plfa-part2-Subtyping-19233" class="Comment">--------------------</a>
    <a id="plfa_plfa-part2-Subtyping-19258" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19260" href="../Subtyping/#plfa_plfa-part2-Subtyping-19191" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19262" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-19264" href="../Subtyping/#plfa_plfa-part2-Subtyping-19193" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19266" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19268" href="../Subtyping/#plfa_plfa-part2-Subtyping-19197" class="Bound">B</a>

<a id="plfa_plfa-part2-Subtyping-19271" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-19276" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">_⊢*_⦂_</a> <a id="plfa_plfa-part2-Subtyping-19283" class="Keyword">where</a>
  <a id="plfa_plfa-part2-Subtyping-_⊢*_⦂_.⊢*-[]"></a><a id="plfa_plfa-part2-Subtyping-19291" href="../Subtyping/#plfa_plfa-part2-Subtyping-19291" class="InductiveConstructor">⊢*-[]</a> <a id="plfa_plfa-part2-Subtyping-19297" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19299" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-19301" href="../Subtyping/#plfa_plfa-part2-Subtyping-19301" class="Bound">Γ</a><a id="plfa_plfa-part2-Subtyping-19302" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-19304" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19306" href="../Subtyping/#plfa_plfa-part2-Subtyping-19301" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19308" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-19311" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="plfa_plfa-part2-Subtyping-19314" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19316" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a>

  <a id="plfa_plfa-part2-Subtyping-_⊢*_⦂_.⊢*-∷"></a><a id="plfa_plfa-part2-Subtyping-19322" href="../Subtyping/#plfa_plfa-part2-Subtyping-19322" class="InductiveConstructor">⊢*-∷</a> <a id="plfa_plfa-part2-Subtyping-19327" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19329" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-19331" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-19332" href="../Subtyping/#plfa_plfa-part2-Subtyping-19332" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-19333" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19335" href="../Subtyping/#plfa_plfa-part2-Subtyping-19335" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19337" href="../Subtyping/#plfa_plfa-part2-Subtyping-19337" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-19338" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19340" href="../Subtyping/#plfa_plfa-part2-Subtyping-19340" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-19343" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19345" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-19349" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-19354" href="../Subtyping/#plfa_plfa-part2-Subtyping-19332" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-19355" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19357" href="../Subtyping/#plfa_plfa-part2-Subtyping-19357" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-19358" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-19360" href="../Subtyping/#plfa_plfa-part2-Subtyping-19360" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-19363" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-19365" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-19369" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-19374" href="../Subtyping/#plfa_plfa-part2-Subtyping-19332" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-19375" class="Symbol">}</a>
     <a id="plfa_plfa-part2-Subtyping-19382" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19384" href="../Subtyping/#plfa_plfa-part2-Subtyping-19335" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19386" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-19388" href="../Subtyping/#plfa_plfa-part2-Subtyping-19337" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19390" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19392" href="../Subtyping/#plfa_plfa-part2-Subtyping-19357" class="Bound">A</a>
     <a id="plfa_plfa-part2-Subtyping-19399" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19401" href="../Subtyping/#plfa_plfa-part2-Subtyping-19335" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19403" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-19406" href="../Subtyping/#plfa_plfa-part2-Subtyping-19340" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-19409" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19411" href="../Subtyping/#plfa_plfa-part2-Subtyping-19360" class="Bound">As</a>
     <a id="plfa_plfa-part2-Subtyping-19419" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-19421" href="../Subtyping/#plfa_plfa-part2-Subtyping-19335" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-19423" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-19426" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-19427" href="../Subtyping/#plfa_plfa-part2-Subtyping-19337" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-19429" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-19431" href="../Subtyping/#plfa_plfa-part2-Subtyping-19340" class="Bound">Ms</a><a id="plfa_plfa-part2-Subtyping-19433" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-19435" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-19437" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-19438" href="../Subtyping/#plfa_plfa-part2-Subtyping-19357" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-19440" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-19442" href="../Subtyping/#plfa_plfa-part2-Subtyping-19360" class="Bound">As</a><a id="plfa_plfa-part2-Subtyping-19444" class="Symbol">)</a>
</pre><p>Most of the typing rules are adapted from those in the <a href="../Lambda/">Lambda</a> chapter. Here we discuss the three new rules.</p><ul><li><p>Rule <code>⊢rcd</code>: A record is well-typed if the field initializers <code>Ms</code> have types <code>As</code>, to match the record type. Also, the vector of field names is required to be distinct.</p></li><li><p>Rule <code>⊢#</code>: A field access is well-typed if the term <code>M</code> has record type, the field <code>l</code> is at some index <code>i</code> in the record type’s vector of field names, and the result type <code>A</code> is at index <code>i</code> in the vector of field types.</p></li><li><p>Rule <code>⊢&lt;:</code>: (Subsumption) If a term <code>M</code> has type <code>A</code>, and <code>A &lt;: B</code>, then term <code>M</code> also has type <code>B</code>.</p></li></ul><h2 id="renaming-and-substitution">Renaming and Substitution</h2><p>In preparation of defining the reduction rules for this language, we define simultaneous substitution using the same recipe as in the <a href="../DeBruijn/">DeBruijn</a> chapter, but adapted to extrinsic terms. Thus, the <code>subst</code> function is split into two parts: a raw <code>subst</code> function that operators on terms and a <code>subst-pres</code> lemma that proves that substitution preserves types. We define <code>subst</code> in this section and postpone <code>subst-pres</code> to the <a href="#subtyping-preservation">Preservation</a> section. Likewise for <code>rename</code>.</p>We begin by defining the <code>ext</code> function on renamings.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-ext"></a><a id="plfa_plfa-part2-Subtyping-20687" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-20691" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-20693" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-20694" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-20697" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20699" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a><a id="plfa_plfa-part2-Subtyping-20701" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-20703" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20705" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-20706" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-20709" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20711" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a><a id="plfa_plfa-part2-Subtyping-20713" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-20715" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-20719" href="../Subtyping/#plfa_plfa-part2-Subtyping-20719" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-20721" class="Number">0</a>      <a id="plfa_plfa-part2-Subtyping-20728" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-20731" class="Number">0</a>
<a id="plfa_plfa-part2-Subtyping-20733" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-20737" href="../Subtyping/#plfa_plfa-part2-Subtyping-20737" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-20739" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-20740" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-20744" href="../Subtyping/#plfa_plfa-part2-Subtyping-20744" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-20745" class="Symbol">)</a>  <a id="plfa_plfa-part2-Subtyping-20748" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-20751" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-20755" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-20756" href="../Subtyping/#plfa_plfa-part2-Subtyping-20737" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-20758" href="../Subtyping/#plfa_plfa-part2-Subtyping-20744" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-20759" class="Symbol">)</a>
</pre>The <code>rename</code> function is defined mutually with the auxiliary <code>rename-vec</code> function, which is needed in the case for records.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-rename-vec"></a><a id="plfa_plfa-part2-Subtyping-20899" href="../Subtyping/#plfa_plfa-part2-Subtyping-20899" class="Function">rename-vec</a> <a id="plfa_plfa-part2-Subtyping-20910" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-20912" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-20913" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-20916" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20918" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a><a id="plfa_plfa-part2-Subtyping-20920" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-20922" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20924" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-20926" href="../Subtyping/#plfa_plfa-part2-Subtyping-20926" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-20927" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-20929" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20931" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-20935" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-20940" href="../Subtyping/#plfa_plfa-part2-Subtyping-20926" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-20942" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20944" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-20948" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-20953" href="../Subtyping/#plfa_plfa-part2-Subtyping-20926" class="Bound">n</a>

<a id="plfa_plfa-part2-Subtyping-rename"></a><a id="plfa_plfa-part2-Subtyping-20956" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-20963" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-20965" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-20966" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-20969" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20971" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a><a id="plfa_plfa-part2-Subtyping-20973" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-20975" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20977" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-20978" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-20983" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-20985" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-20989" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-20991" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-20998" href="../Subtyping/#plfa_plfa-part2-Subtyping-20998" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21000" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21001" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-21003" href="../Subtyping/#plfa_plfa-part2-Subtyping-21003" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-21004" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-21015" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21018" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-21020" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21021" href="../Subtyping/#plfa_plfa-part2-Subtyping-20998" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21023" href="../Subtyping/#plfa_plfa-part2-Subtyping-21003" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-21024" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-21026" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21033" href="../Subtyping/#plfa_plfa-part2-Subtyping-21033" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21035" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21036" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-21038" href="../Subtyping/#plfa_plfa-part2-Subtyping-21038" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-21039" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-21050" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21053" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-21055" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21056" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21063" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21064" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-21068" href="../Subtyping/#plfa_plfa-part2-Subtyping-21033" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-21069" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21071" href="../Subtyping/#plfa_plfa-part2-Subtyping-21038" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-21072" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-21074" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21081" href="../Subtyping/#plfa_plfa-part2-Subtyping-21081" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21083" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21084" href="../Subtyping/#plfa_plfa-part2-Subtyping-21084" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-21086" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-21088" href="../Subtyping/#plfa_plfa-part2-Subtyping-21088" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-21089" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-21098" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21101" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21102" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21109" href="../Subtyping/#plfa_plfa-part2-Subtyping-21081" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21111" href="../Subtyping/#plfa_plfa-part2-Subtyping-21084" class="Bound">L</a><a id="plfa_plfa-part2-Subtyping-21112" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21114" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-21116" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21117" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21124" href="../Subtyping/#plfa_plfa-part2-Subtyping-21081" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21126" href="../Subtyping/#plfa_plfa-part2-Subtyping-21088" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-21127" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-21129" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21136" href="../Subtyping/#plfa_plfa-part2-Subtyping-21136" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21138" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21139" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a><a id="plfa_plfa-part2-Subtyping-21144" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-21153" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21156" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a>
<a id="plfa_plfa-part2-Subtyping-21162" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21169" href="../Subtyping/#plfa_plfa-part2-Subtyping-21169" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21171" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21172" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-21177" href="../Subtyping/#plfa_plfa-part2-Subtyping-21177" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-21178" class="Symbol">)</a>       <a id="plfa_plfa-part2-Subtyping-21186" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21189" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-21194" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21195" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21202" href="../Subtyping/#plfa_plfa-part2-Subtyping-21169" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21204" href="../Subtyping/#plfa_plfa-part2-Subtyping-21177" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-21205" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-21207" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21214" href="../Subtyping/#plfa_plfa-part2-Subtyping-21214" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21216" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21217" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-21222" href="../Subtyping/#plfa_plfa-part2-Subtyping-21222" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-21224" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-21231" href="../Subtyping/#plfa_plfa-part2-Subtyping-21231" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-21233" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-21239" href="../Subtyping/#plfa_plfa-part2-Subtyping-21239" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-21241" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a><a id="plfa_plfa-part2-Subtyping-21242" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21244" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-21250" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-21255" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21256" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21263" href="../Subtyping/#plfa_plfa-part2-Subtyping-21214" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21265" href="../Subtyping/#plfa_plfa-part2-Subtyping-21222" class="Bound">L</a><a id="plfa_plfa-part2-Subtyping-21266" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21268" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-21275" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21282" href="../Subtyping/#plfa_plfa-part2-Subtyping-21214" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21284" href="../Subtyping/#plfa_plfa-part2-Subtyping-21231" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-21286" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-21292" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21299" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21300" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-21304" href="../Subtyping/#plfa_plfa-part2-Subtyping-21214" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-21305" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21307" href="../Subtyping/#plfa_plfa-part2-Subtyping-21239" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-21309" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a>
<a id="plfa_plfa-part2-Subtyping-21311" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21318" href="../Subtyping/#plfa_plfa-part2-Subtyping-21318" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21320" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21321" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ</a> <a id="plfa_plfa-part2-Subtyping-21323" href="../Subtyping/#plfa_plfa-part2-Subtyping-21323" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-21324" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-21335" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21338" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ</a> <a id="plfa_plfa-part2-Subtyping-21340" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21341" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21348" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21349" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-21353" href="../Subtyping/#plfa_plfa-part2-Subtyping-21318" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-21354" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21356" href="../Subtyping/#plfa_plfa-part2-Subtyping-21323" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-21357" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-21359" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21366" href="../Subtyping/#plfa_plfa-part2-Subtyping-21366" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21368" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-21370" href="../Subtyping/#plfa_plfa-part2-Subtyping-21370" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-21373" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-21376" href="../Subtyping/#plfa_plfa-part2-Subtyping-21376" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-21379" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-21381" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-21383" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-21385" href="../Subtyping/#plfa_plfa-part2-Subtyping-21370" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-21388" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-21391" href="../Subtyping/#plfa_plfa-part2-Subtyping-20899" class="Function">rename-vec</a> <a id="plfa_plfa-part2-Subtyping-21402" href="../Subtyping/#plfa_plfa-part2-Subtyping-21366" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21404" href="../Subtyping/#plfa_plfa-part2-Subtyping-21376" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-21407" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a>
<a id="plfa_plfa-part2-Subtyping-21409" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21416" href="../Subtyping/#plfa_plfa-part2-Subtyping-21416" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21418" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21419" href="../Subtyping/#plfa_plfa-part2-Subtyping-21419" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-21421" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-21423" href="../Subtyping/#plfa_plfa-part2-Subtyping-21423" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-21424" class="Symbol">)</a>       <a id="plfa_plfa-part2-Subtyping-21432" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-21434" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21435" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21442" href="../Subtyping/#plfa_plfa-part2-Subtyping-21416" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21444" href="../Subtyping/#plfa_plfa-part2-Subtyping-21419" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-21445" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21447" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-21449" href="../Subtyping/#plfa_plfa-part2-Subtyping-21423" class="Bound">l</a>

<a id="plfa_plfa-part2-Subtyping-21452" href="../Subtyping/#plfa_plfa-part2-Subtyping-20899" class="Function">rename-vec</a> <a id="plfa_plfa-part2-Subtyping-21463" href="../Subtyping/#plfa_plfa-part2-Subtyping-21463" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21465" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="plfa_plfa-part2-Subtyping-21468" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-21470" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a>
<a id="plfa_plfa-part2-Subtyping-21473" href="../Subtyping/#plfa_plfa-part2-Subtyping-20899" class="Function">rename-vec</a> <a id="plfa_plfa-part2-Subtyping-21484" href="../Subtyping/#plfa_plfa-part2-Subtyping-21484" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21486" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21487" href="../Subtyping/#plfa_plfa-part2-Subtyping-21487" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-21489" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-21491" href="../Subtyping/#plfa_plfa-part2-Subtyping-21491" class="Bound">Ms</a><a id="plfa_plfa-part2-Subtyping-21493" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21495" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-21497" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21504" href="../Subtyping/#plfa_plfa-part2-Subtyping-21484" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21506" href="../Subtyping/#plfa_plfa-part2-Subtyping-21487" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-21508" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-21510" href="../Subtyping/#plfa_plfa-part2-Subtyping-20899" class="Function">rename-vec</a> <a id="plfa_plfa-part2-Subtyping-21521" href="../Subtyping/#plfa_plfa-part2-Subtyping-21484" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-21523" href="../Subtyping/#plfa_plfa-part2-Subtyping-21491" class="Bound">Ms</a>
</pre>With the <code>rename</code> function in hand, we can define the <code>exts</code> function on substitutions.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-exts"></a><a id="plfa_plfa-part2-Subtyping-21627" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-21632" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-21634" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21635" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-21638" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21640" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-21644" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21646" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21648" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21649" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-21652" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21654" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-21658" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-21660" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-21665" href="../Subtyping/#plfa_plfa-part2-Subtyping-21665" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-21667" class="Number">0</a>      <a id="plfa_plfa-part2-Subtyping-21674" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21677" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-21679" class="Number">0</a>
<a id="plfa_plfa-part2-Subtyping-21681" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-21686" href="../Subtyping/#plfa_plfa-part2-Subtyping-21686" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-21688" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21689" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-21693" href="../Subtyping/#plfa_plfa-part2-Subtyping-21693" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-21694" class="Symbol">)</a>  <a id="plfa_plfa-part2-Subtyping-21697" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21700" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-21707" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-21711" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21712" href="../Subtyping/#plfa_plfa-part2-Subtyping-21686" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-21714" href="../Subtyping/#plfa_plfa-part2-Subtyping-21693" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-21715" class="Symbol">)</a>
</pre>We define <code>subst</code> mutually with the auxiliary <code>subst-vec</code> function, which is needed in the case for records.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-subst-vec"></a><a id="plfa_plfa-part2-Subtyping-21839" href="../Subtyping/#plfa_plfa-part2-Subtyping-21839" class="Function">subst-vec</a> <a id="plfa_plfa-part2-Subtyping-21849" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-21851" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21852" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-21855" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21857" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-21861" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21863" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21865" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-21867" href="../Subtyping/#plfa_plfa-part2-Subtyping-21867" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-21868" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-21870" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21872" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-21876" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-21881" href="../Subtyping/#plfa_plfa-part2-Subtyping-21867" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-21883" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21885" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-21889" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-21894" href="../Subtyping/#plfa_plfa-part2-Subtyping-21867" class="Bound">n</a>

<a id="plfa_plfa-part2-Subtyping-subst"></a><a id="plfa_plfa-part2-Subtyping-21897" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-21903" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-21905" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21906" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-21909" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21911" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-21915" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-21917" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21919" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21920" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-21925" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-21927" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-21931" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-21933" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-21939" href="../Subtyping/#plfa_plfa-part2-Subtyping-21939" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-21941" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21942" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-21944" href="../Subtyping/#plfa_plfa-part2-Subtyping-21944" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-21945" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-21956" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21959" href="../Subtyping/#plfa_plfa-part2-Subtyping-21939" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-21961" href="../Subtyping/#plfa_plfa-part2-Subtyping-21944" class="Bound">k</a>
<a id="plfa_plfa-part2-Subtyping-21963" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-21969" href="../Subtyping/#plfa_plfa-part2-Subtyping-21969" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-21971" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21972" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-21974" href="../Subtyping/#plfa_plfa-part2-Subtyping-21974" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-21975" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-21986" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-21989" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-21991" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21992" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-21998" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-21999" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-22004" href="../Subtyping/#plfa_plfa-part2-Subtyping-21969" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-22005" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22007" href="../Subtyping/#plfa_plfa-part2-Subtyping-21974" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-22008" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-22010" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22016" href="../Subtyping/#plfa_plfa-part2-Subtyping-22016" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22018" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22019" href="../Subtyping/#plfa_plfa-part2-Subtyping-22019" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-22021" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-22023" href="../Subtyping/#plfa_plfa-part2-Subtyping-22023" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-22024" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-22033" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22036" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22037" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22043" href="../Subtyping/#plfa_plfa-part2-Subtyping-22016" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22045" href="../Subtyping/#plfa_plfa-part2-Subtyping-22019" class="Bound">L</a><a id="plfa_plfa-part2-Subtyping-22046" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22048" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-22050" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22051" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22057" href="../Subtyping/#plfa_plfa-part2-Subtyping-22016" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22059" href="../Subtyping/#plfa_plfa-part2-Subtyping-22023" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-22060" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-22062" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22068" href="../Subtyping/#plfa_plfa-part2-Subtyping-22068" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22070" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22071" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a><a id="plfa_plfa-part2-Subtyping-22076" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-22085" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22088" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a>
<a id="plfa_plfa-part2-Subtyping-22094" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22100" href="../Subtyping/#plfa_plfa-part2-Subtyping-22100" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22102" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22103" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-22108" href="../Subtyping/#plfa_plfa-part2-Subtyping-22108" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-22109" class="Symbol">)</a>       <a id="plfa_plfa-part2-Subtyping-22117" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22120" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-22125" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22126" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22132" href="../Subtyping/#plfa_plfa-part2-Subtyping-22100" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22134" href="../Subtyping/#plfa_plfa-part2-Subtyping-22108" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-22135" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-22137" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22143" href="../Subtyping/#plfa_plfa-part2-Subtyping-22143" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22145" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22146" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-22151" href="../Subtyping/#plfa_plfa-part2-Subtyping-22151" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-22153" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-22160" href="../Subtyping/#plfa_plfa-part2-Subtyping-22160" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-22162" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-22168" href="../Subtyping/#plfa_plfa-part2-Subtyping-22168" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-22170" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a><a id="plfa_plfa-part2-Subtyping-22171" class="Symbol">)</a>
                       <a id="plfa_plfa-part2-Subtyping-22196" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22199" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-22204" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22205" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22211" href="../Subtyping/#plfa_plfa-part2-Subtyping-22143" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22213" href="../Subtyping/#plfa_plfa-part2-Subtyping-22151" class="Bound">L</a><a id="plfa_plfa-part2-Subtyping-22214" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22216" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-22223" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22229" href="../Subtyping/#plfa_plfa-part2-Subtyping-22143" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22231" href="../Subtyping/#plfa_plfa-part2-Subtyping-22160" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-22233" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-22239" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22245" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22246" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-22251" href="../Subtyping/#plfa_plfa-part2-Subtyping-22143" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-22252" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22254" href="../Subtyping/#plfa_plfa-part2-Subtyping-22168" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-22256" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a>
<a id="plfa_plfa-part2-Subtyping-22258" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22264" href="../Subtyping/#plfa_plfa-part2-Subtyping-22264" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22266" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22267" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ</a> <a id="plfa_plfa-part2-Subtyping-22269" href="../Subtyping/#plfa_plfa-part2-Subtyping-22269" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-22270" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-22281" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22284" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ</a> <a id="plfa_plfa-part2-Subtyping-22286" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22287" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22293" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22294" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-22299" href="../Subtyping/#plfa_plfa-part2-Subtyping-22264" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-22300" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22302" href="../Subtyping/#plfa_plfa-part2-Subtyping-22269" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-22303" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-22305" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22311" href="../Subtyping/#plfa_plfa-part2-Subtyping-22311" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22313" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-22315" href="../Subtyping/#plfa_plfa-part2-Subtyping-22315" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-22318" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-22321" href="../Subtyping/#plfa_plfa-part2-Subtyping-22321" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-22324" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a>  <a id="plfa_plfa-part2-Subtyping-22327" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-22329" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-22331" href="../Subtyping/#plfa_plfa-part2-Subtyping-22315" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-22334" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-22337" href="../Subtyping/#plfa_plfa-part2-Subtyping-21839" class="Function">subst-vec</a> <a id="plfa_plfa-part2-Subtyping-22347" href="../Subtyping/#plfa_plfa-part2-Subtyping-22311" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22349" href="../Subtyping/#plfa_plfa-part2-Subtyping-22321" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-22352" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a>
<a id="plfa_plfa-part2-Subtyping-22354" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22360" href="../Subtyping/#plfa_plfa-part2-Subtyping-22360" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22362" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22363" href="../Subtyping/#plfa_plfa-part2-Subtyping-22363" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-22365" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-22367" href="../Subtyping/#plfa_plfa-part2-Subtyping-22367" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-22368" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-22377" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-22379" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22380" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22386" href="../Subtyping/#plfa_plfa-part2-Subtyping-22360" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22388" href="../Subtyping/#plfa_plfa-part2-Subtyping-22363" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-22389" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22391" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-22393" href="../Subtyping/#plfa_plfa-part2-Subtyping-22367" class="Bound">l</a>

<a id="plfa_plfa-part2-Subtyping-22396" href="../Subtyping/#plfa_plfa-part2-Subtyping-21839" class="Function">subst-vec</a> <a id="plfa_plfa-part2-Subtyping-22406" href="../Subtyping/#plfa_plfa-part2-Subtyping-22406" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22408" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a> <a id="plfa_plfa-part2-Subtyping-22411" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-22413" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#995" class="InductiveConstructor">[]</a>
<a id="plfa_plfa-part2-Subtyping-22416" href="../Subtyping/#plfa_plfa-part2-Subtyping-21839" class="Function">subst-vec</a> <a id="plfa_plfa-part2-Subtyping-22426" href="../Subtyping/#plfa_plfa-part2-Subtyping-22426" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22428" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22429" href="../Subtyping/#plfa_plfa-part2-Subtyping-22429" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-22431" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-22433" href="../Subtyping/#plfa_plfa-part2-Subtyping-22433" class="Bound">Ms</a><a id="plfa_plfa-part2-Subtyping-22435" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22437" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-22439" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22440" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22446" href="../Subtyping/#plfa_plfa-part2-Subtyping-22426" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22448" href="../Subtyping/#plfa_plfa-part2-Subtyping-22429" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-22449" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22451" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1014" class="InductiveConstructor Operator">∷</a> <a id="plfa_plfa-part2-Subtyping-22453" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22454" href="../Subtyping/#plfa_plfa-part2-Subtyping-21839" class="Function">subst-vec</a> <a id="plfa_plfa-part2-Subtyping-22464" href="../Subtyping/#plfa_plfa-part2-Subtyping-22426" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-22466" href="../Subtyping/#plfa_plfa-part2-Subtyping-22433" class="Bound">Ms</a><a id="plfa_plfa-part2-Subtyping-22468" class="Symbol">)</a>
</pre>As usual, we implement single substitution using simultaneous substitution.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-subst-zero"></a><a id="plfa_plfa-part2-Subtyping-22559" href="../Subtyping/#plfa_plfa-part2-Subtyping-22559" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Subtyping-22570" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-22572" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-22577" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-22579" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-22582" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-22584" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
<a id="plfa_plfa-part2-Subtyping-22589" href="../Subtyping/#plfa_plfa-part2-Subtyping-22559" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Subtyping-22600" href="../Subtyping/#plfa_plfa-part2-Subtyping-22600" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-22602" class="Number">0</a>       <a id="plfa_plfa-part2-Subtyping-22610" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22613" href="../Subtyping/#plfa_plfa-part2-Subtyping-22600" class="Bound">M</a>
<a id="plfa_plfa-part2-Subtyping-22615" href="../Subtyping/#plfa_plfa-part2-Subtyping-22559" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Subtyping-22626" href="../Subtyping/#plfa_plfa-part2-Subtyping-22626" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-22628" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22629" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-22633" href="../Subtyping/#plfa_plfa-part2-Subtyping-22633" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-22634" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22636" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22639" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-22641" href="../Subtyping/#plfa_plfa-part2-Subtyping-22633" class="Bound">x</a>

<a id="plfa_plfa-part2-Subtyping-_[_]"></a><a id="plfa_plfa-part2-Subtyping-22644" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">_[_]</a> <a id="plfa_plfa-part2-Subtyping-22649" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-22651" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-22656" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-22658" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-22663" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-22665" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a>
<a id="plfa_plfa-part2-Subtyping-22670" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">_[_]</a> <a id="plfa_plfa-part2-Subtyping-22675" href="../Subtyping/#plfa_plfa-part2-Subtyping-22675" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-22677" href="../Subtyping/#plfa_plfa-part2-Subtyping-22677" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-22679" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-22682" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-22688" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-22689" href="../Subtyping/#plfa_plfa-part2-Subtyping-22559" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Subtyping-22700" href="../Subtyping/#plfa_plfa-part2-Subtyping-22677" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-22701" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-22703" href="../Subtyping/#plfa_plfa-part2-Subtyping-22675" class="Bound">N</a>
</pre><h2 id="values">Values</h2>We extend the definition of <code>Value</code> to include a clause for records. In a call-by-value language, a record is usually only considered a value if all its field initializers are values. Here we instead treat records in a lazy fashion, declaring any record to be a value, to save on some extra bookkeeping.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-23033" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-Value"></a><a id="plfa_plfa-part2-Subtyping-23038" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23044" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23046" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-23051" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23053" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-23057" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Subtyping-Value.V-ƛ"></a><a id="plfa_plfa-part2-Subtyping-23066" href="../Subtyping/#plfa_plfa-part2-Subtyping-23066" class="InductiveConstructor">V-ƛ</a> <a id="plfa_plfa-part2-Subtyping-23070" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23072" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-23074" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-23075" href="../Subtyping/#plfa_plfa-part2-Subtyping-23075" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-23076" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Subtyping-23084" class="Comment">-----------</a>
    <a id="plfa_plfa-part2-Subtyping-23100" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23102" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23108" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-23109" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-23111" href="../Subtyping/#plfa_plfa-part2-Subtyping-23075" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-23112" class="Symbol">)</a>

  <a id="plfa_plfa-part2-Subtyping-Value.V-zero"></a><a id="plfa_plfa-part2-Subtyping-23117" href="../Subtyping/#plfa_plfa-part2-Subtyping-23117" class="InductiveConstructor">V-zero</a> <a id="plfa_plfa-part2-Subtyping-23124" class="Symbol">:</a>
      <a id="plfa_plfa-part2-Subtyping-23132" class="Comment">-------------</a>
      <a id="plfa_plfa-part2-Subtyping-23152" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23158" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-23159" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a><a id="plfa_plfa-part2-Subtyping-23164" class="Symbol">)</a>

  <a id="plfa_plfa-part2-Subtyping-Value.V-suc"></a><a id="plfa_plfa-part2-Subtyping-23169" href="../Subtyping/#plfa_plfa-part2-Subtyping-23169" class="InductiveConstructor">V-suc</a> <a id="plfa_plfa-part2-Subtyping-23175" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23177" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-23179" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-23180" href="../Subtyping/#plfa_plfa-part2-Subtyping-23180" class="Bound">V</a><a id="plfa_plfa-part2-Subtyping-23181" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-23187" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23189" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23195" href="../Subtyping/#plfa_plfa-part2-Subtyping-23180" class="Bound">V</a>
      <a id="plfa_plfa-part2-Subtyping-23203" class="Comment">--------------</a>
    <a id="plfa_plfa-part2-Subtyping-23222" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23224" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23230" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-23231" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-23236" href="../Subtyping/#plfa_plfa-part2-Subtyping-23180" class="Bound">V</a><a id="plfa_plfa-part2-Subtyping-23237" class="Symbol">)</a>

  <a id="plfa_plfa-part2-Subtyping-Value.V-rcd"></a><a id="plfa_plfa-part2-Subtyping-23242" href="../Subtyping/#plfa_plfa-part2-Subtyping-23242" class="InductiveConstructor">V-rcd</a> <a id="plfa_plfa-part2-Subtyping-23248" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23250" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-23252" href="../Subtyping/#plfa_plfa-part2-Subtyping-23252" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-23253" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-23255" href="../Subtyping/#plfa_plfa-part2-Subtyping-23255" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-23258" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23260" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-23264" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-23269" href="../Subtyping/#plfa_plfa-part2-Subtyping-23252" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-23270" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-23272" href="../Subtyping/#plfa_plfa-part2-Subtyping-23272" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-23275" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23277" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-23281" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-23286" href="../Subtyping/#plfa_plfa-part2-Subtyping-23252" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-23287" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-23293" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23295" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23301" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-23303" href="../Subtyping/#plfa_plfa-part2-Subtyping-23255" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-23306" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-23309" href="../Subtyping/#plfa_plfa-part2-Subtyping-23272" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-23312" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a>
</pre><h2 id="reduction">Reduction</h2><p>The following datatype <code>_—→_</code> defines the reduction relation for the STLC with records. We discuss the two new rules for records in the following paragraph.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-23499" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-_—→_"></a><a id="plfa_plfa-part2-Subtyping-23504" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">_—→_</a> <a id="plfa_plfa-part2-Subtyping-23509" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23511" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-23516" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23518" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-23523" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23525" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-23529" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.ξ-·₁"></a><a id="plfa_plfa-part2-Subtyping-23538" href="../Subtyping/#plfa_plfa-part2-Subtyping-23538" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Subtyping-23543" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23545" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-23547" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-23548" href="../Subtyping/#plfa_plfa-part2-Subtyping-23548" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-23550" href="../Subtyping/#plfa_plfa-part2-Subtyping-23550" class="Bound">L′</a> <a id="plfa_plfa-part2-Subtyping-23553" href="../Subtyping/#plfa_plfa-part2-Subtyping-23553" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23555" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23557" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-23561" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-23567" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23569" href="../Subtyping/#plfa_plfa-part2-Subtyping-23548" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-23571" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23574" href="../Subtyping/#plfa_plfa-part2-Subtyping-23550" class="Bound">L′</a>
      <a id="plfa_plfa-part2-Subtyping-23583" class="Comment">---------------</a>
    <a id="plfa_plfa-part2-Subtyping-23603" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23605" href="../Subtyping/#plfa_plfa-part2-Subtyping-23548" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-23607" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-23609" href="../Subtyping/#plfa_plfa-part2-Subtyping-23553" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23611" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23614" href="../Subtyping/#plfa_plfa-part2-Subtyping-23550" class="Bound">L′</a> <a id="plfa_plfa-part2-Subtyping-23617" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-23619" href="../Subtyping/#plfa_plfa-part2-Subtyping-23553" class="Bound">M</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.ξ-·₂"></a><a id="plfa_plfa-part2-Subtyping-23624" href="../Subtyping/#plfa_plfa-part2-Subtyping-23624" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Subtyping-23629" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23631" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-23633" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-23634" href="../Subtyping/#plfa_plfa-part2-Subtyping-23634" class="Bound">V</a>  <a id="plfa_plfa-part2-Subtyping-23637" href="../Subtyping/#plfa_plfa-part2-Subtyping-23637" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23639" href="../Subtyping/#plfa_plfa-part2-Subtyping-23639" class="Bound">M′</a> <a id="plfa_plfa-part2-Subtyping-23642" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23644" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-23648" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-23654" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23656" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23662" href="../Subtyping/#plfa_plfa-part2-Subtyping-23634" class="Bound">V</a>
    <a id="plfa_plfa-part2-Subtyping-23668" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23670" href="../Subtyping/#plfa_plfa-part2-Subtyping-23637" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23672" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23675" href="../Subtyping/#plfa_plfa-part2-Subtyping-23639" class="Bound">M′</a>
      <a id="plfa_plfa-part2-Subtyping-23684" class="Comment">---------------</a>
    <a id="plfa_plfa-part2-Subtyping-23704" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23706" href="../Subtyping/#plfa_plfa-part2-Subtyping-23634" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-23708" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-23710" href="../Subtyping/#plfa_plfa-part2-Subtyping-23637" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23712" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23715" href="../Subtyping/#plfa_plfa-part2-Subtyping-23634" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-23717" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-23719" href="../Subtyping/#plfa_plfa-part2-Subtyping-23639" class="Bound">M′</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.β-ƛ"></a><a id="plfa_plfa-part2-Subtyping-23725" href="../Subtyping/#plfa_plfa-part2-Subtyping-23725" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Subtyping-23729" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23731" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-23733" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-23734" href="../Subtyping/#plfa_plfa-part2-Subtyping-23734" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-23736" href="../Subtyping/#plfa_plfa-part2-Subtyping-23736" class="Bound">W</a> <a id="plfa_plfa-part2-Subtyping-23738" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23740" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-23744" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-23750" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23752" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-23758" href="../Subtyping/#plfa_plfa-part2-Subtyping-23736" class="Bound">W</a>
      <a id="plfa_plfa-part2-Subtyping-23766" class="Comment">--------------------</a>
    <a id="plfa_plfa-part2-Subtyping-23791" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23793" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-23794" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-23796" href="../Subtyping/#plfa_plfa-part2-Subtyping-23734" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-23797" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-23799" href="../Subtyping/#plfa_plfa-part2-Subtyping-17545" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part2-Subtyping-23801" href="../Subtyping/#plfa_plfa-part2-Subtyping-23736" class="Bound">W</a> <a id="plfa_plfa-part2-Subtyping-23803" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23806" href="../Subtyping/#plfa_plfa-part2-Subtyping-23734" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-23808" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">[</a> <a id="plfa_plfa-part2-Subtyping-23810" href="../Subtyping/#plfa_plfa-part2-Subtyping-23736" class="Bound">W</a> <a id="plfa_plfa-part2-Subtyping-23812" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">]</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.ξ-suc"></a><a id="plfa_plfa-part2-Subtyping-23817" href="../Subtyping/#plfa_plfa-part2-Subtyping-23817" class="InductiveConstructor">ξ-suc</a> <a id="plfa_plfa-part2-Subtyping-23823" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23825" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-23827" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-23828" href="../Subtyping/#plfa_plfa-part2-Subtyping-23828" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23830" href="../Subtyping/#plfa_plfa-part2-Subtyping-23830" class="Bound">M′</a> <a id="plfa_plfa-part2-Subtyping-23833" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23835" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-23839" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-23845" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23847" href="../Subtyping/#plfa_plfa-part2-Subtyping-23828" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23849" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23852" href="../Subtyping/#plfa_plfa-part2-Subtyping-23830" class="Bound">M′</a>
      <a id="plfa_plfa-part2-Subtyping-23861" class="Comment">-----------------</a>
    <a id="plfa_plfa-part2-Subtyping-23883" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23885" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-23890" href="../Subtyping/#plfa_plfa-part2-Subtyping-23828" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23892" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23895" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-23900" href="../Subtyping/#plfa_plfa-part2-Subtyping-23830" class="Bound">M′</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.ξ-case"></a><a id="plfa_plfa-part2-Subtyping-23906" href="../Subtyping/#plfa_plfa-part2-Subtyping-23906" class="InductiveConstructor">ξ-case</a> <a id="plfa_plfa-part2-Subtyping-23913" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23915" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-23917" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-23918" href="../Subtyping/#plfa_plfa-part2-Subtyping-23918" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-23920" href="../Subtyping/#plfa_plfa-part2-Subtyping-23920" class="Bound">L′</a> <a id="plfa_plfa-part2-Subtyping-23923" href="../Subtyping/#plfa_plfa-part2-Subtyping-23923" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-23925" href="../Subtyping/#plfa_plfa-part2-Subtyping-23925" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-23927" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-23929" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-23933" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-23939" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-23941" href="../Subtyping/#plfa_plfa-part2-Subtyping-23918" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-23943" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-23946" href="../Subtyping/#plfa_plfa-part2-Subtyping-23920" class="Bound">L′</a>
      <a id="plfa_plfa-part2-Subtyping-23955" class="Comment">-------------------------------------------------------</a>
    <a id="plfa_plfa-part2-Subtyping-24015" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24017" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-24022" href="../Subtyping/#plfa_plfa-part2-Subtyping-23918" class="Bound">L</a> <a id="plfa_plfa-part2-Subtyping-24024" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-24031" href="../Subtyping/#plfa_plfa-part2-Subtyping-23923" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24033" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-24039" href="../Subtyping/#plfa_plfa-part2-Subtyping-23925" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24041" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a> <a id="plfa_plfa-part2-Subtyping-24043" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-24046" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-24051" href="../Subtyping/#plfa_plfa-part2-Subtyping-23920" class="Bound">L′</a> <a id="plfa_plfa-part2-Subtyping-24054" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-24061" href="../Subtyping/#plfa_plfa-part2-Subtyping-23923" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24063" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-24069" href="../Subtyping/#plfa_plfa-part2-Subtyping-23925" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24071" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.β-zero"></a><a id="plfa_plfa-part2-Subtyping-24076" href="../Subtyping/#plfa_plfa-part2-Subtyping-24076" class="InductiveConstructor">β-zero</a> <a id="plfa_plfa-part2-Subtyping-24083" class="Symbol">:</a>  <a id="plfa_plfa-part2-Subtyping-24086" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-24088" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-24089" href="../Subtyping/#plfa_plfa-part2-Subtyping-24089" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24091" href="../Subtyping/#plfa_plfa-part2-Subtyping-24091" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24093" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24095" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-24099" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Subtyping-24107" class="Comment">----------------------------------</a>
    <a id="plfa_plfa-part2-Subtyping-24146" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24148" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-24153" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a> <a id="plfa_plfa-part2-Subtyping-24159" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-24166" href="../Subtyping/#plfa_plfa-part2-Subtyping-24089" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24168" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-24174" href="../Subtyping/#plfa_plfa-part2-Subtyping-24091" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24176" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a> <a id="plfa_plfa-part2-Subtyping-24178" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-24181" href="../Subtyping/#plfa_plfa-part2-Subtyping-24089" class="Bound">M</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.β-suc"></a><a id="plfa_plfa-part2-Subtyping-24186" href="../Subtyping/#plfa_plfa-part2-Subtyping-24186" class="InductiveConstructor">β-suc</a> <a id="plfa_plfa-part2-Subtyping-24192" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24194" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-24196" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-24197" href="../Subtyping/#plfa_plfa-part2-Subtyping-24197" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-24199" href="../Subtyping/#plfa_plfa-part2-Subtyping-24199" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24201" href="../Subtyping/#plfa_plfa-part2-Subtyping-24201" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24203" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24205" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-24209" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-24215" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24217" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-24223" href="../Subtyping/#plfa_plfa-part2-Subtyping-24197" class="Bound">V</a>
      <a id="plfa_plfa-part2-Subtyping-24231" class="Comment">-------------------------------------------</a>
    <a id="plfa_plfa-part2-Subtyping-24279" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24281" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">case</a> <a id="plfa_plfa-part2-Subtyping-24286" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-24287" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-24292" href="../Subtyping/#plfa_plfa-part2-Subtyping-24197" class="Bound">V</a><a id="plfa_plfa-part2-Subtyping-24293" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-24295" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">[zero⇒</a> <a id="plfa_plfa-part2-Subtyping-24302" href="../Subtyping/#plfa_plfa-part2-Subtyping-24199" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24304" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">|suc⇒</a> <a id="plfa_plfa-part2-Subtyping-24310" href="../Subtyping/#plfa_plfa-part2-Subtyping-24201" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24312" href="../Subtyping/#plfa_plfa-part2-Subtyping-17665" class="InductiveConstructor Operator">]</a> <a id="plfa_plfa-part2-Subtyping-24314" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-24317" href="../Subtyping/#plfa_plfa-part2-Subtyping-24201" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24319" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">[</a> <a id="plfa_plfa-part2-Subtyping-24321" href="../Subtyping/#plfa_plfa-part2-Subtyping-24197" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-24323" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">]</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.β-μ"></a><a id="plfa_plfa-part2-Subtyping-24328" href="../Subtyping/#plfa_plfa-part2-Subtyping-24328" class="InductiveConstructor">β-μ</a> <a id="plfa_plfa-part2-Subtyping-24332" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24334" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-24336" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-24337" href="../Subtyping/#plfa_plfa-part2-Subtyping-24337" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24339" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24341" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-24345" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Subtyping-24353" class="Comment">----------------</a>
    <a id="plfa_plfa-part2-Subtyping-24374" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24376" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ</a> <a id="plfa_plfa-part2-Subtyping-24378" href="../Subtyping/#plfa_plfa-part2-Subtyping-24337" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24380" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-24383" href="../Subtyping/#plfa_plfa-part2-Subtyping-24337" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24385" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">[</a> <a id="plfa_plfa-part2-Subtyping-24387" href="../Subtyping/#plfa_plfa-part2-Subtyping-17719" class="InductiveConstructor Operator">μ</a> <a id="plfa_plfa-part2-Subtyping-24389" href="../Subtyping/#plfa_plfa-part2-Subtyping-24337" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-24391" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">]</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.ξ-#"></a><a id="plfa_plfa-part2-Subtyping-24396" href="../Subtyping/#plfa_plfa-part2-Subtyping-24396" class="InductiveConstructor">ξ-#</a> <a id="plfa_plfa-part2-Subtyping-24400" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24402" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-24404" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-24405" href="../Subtyping/#plfa_plfa-part2-Subtyping-24405" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24407" href="../Subtyping/#plfa_plfa-part2-Subtyping-24407" class="Bound">M′</a> <a id="plfa_plfa-part2-Subtyping-24410" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24412" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-24416" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-24418" href="../Subtyping/#plfa_plfa-part2-Subtyping-24418" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-24419" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-24425" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24427" href="../Subtyping/#plfa_plfa-part2-Subtyping-24405" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24429" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-24432" href="../Subtyping/#plfa_plfa-part2-Subtyping-24407" class="Bound">M′</a>
    <a id="plfa_plfa-part2-Subtyping-24439" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24441" href="../Subtyping/#plfa_plfa-part2-Subtyping-24405" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-24443" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-24445" href="../Subtyping/#plfa_plfa-part2-Subtyping-24418" class="Bound">l</a> <a id="plfa_plfa-part2-Subtyping-24447" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-24450" href="../Subtyping/#plfa_plfa-part2-Subtyping-24407" class="Bound">M′</a> <a id="plfa_plfa-part2-Subtyping-24453" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-24455" href="../Subtyping/#plfa_plfa-part2-Subtyping-24418" class="Bound">l</a>

  <a id="plfa_plfa-part2-Subtyping-_—→_.β-#"></a><a id="plfa_plfa-part2-Subtyping-24460" href="../Subtyping/#plfa_plfa-part2-Subtyping-24460" class="InductiveConstructor">β-#</a> <a id="plfa_plfa-part2-Subtyping-24464" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24466" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-24468" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-24469" href="../Subtyping/#plfa_plfa-part2-Subtyping-24469" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-24470" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-24472" href="../Subtyping/#plfa_plfa-part2-Subtyping-24472" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-24475" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24477" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-24481" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-24486" href="../Subtyping/#plfa_plfa-part2-Subtyping-24469" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-24487" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-24489" href="../Subtyping/#plfa_plfa-part2-Subtyping-24489" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-24492" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24494" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-24498" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-24503" href="../Subtyping/#plfa_plfa-part2-Subtyping-24469" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-24504" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-24506" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-24507" href="../Subtyping/#plfa_plfa-part2-Subtyping-24507" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-24508" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-24510" href="../Subtyping/#plfa_plfa-part2-Subtyping-24510" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-24512" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-24514" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-24518" href="../Subtyping/#plfa_plfa-part2-Subtyping-24469" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-24519" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-24525" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24527" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-24534" href="../Subtyping/#plfa_plfa-part2-Subtyping-24472" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-24537" href="../Subtyping/#plfa_plfa-part2-Subtyping-24510" class="Bound">j</a> <a id="plfa_plfa-part2-Subtyping-24539" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-24541" href="../Subtyping/#plfa_plfa-part2-Subtyping-24507" class="Bound">l</a>
      <a id="plfa_plfa-part2-Subtyping-24549" class="Comment">---------------------------------</a>
    <a id="plfa_plfa-part2-Subtyping-24587" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-24589" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-24591" href="../Subtyping/#plfa_plfa-part2-Subtyping-24472" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-24594" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-24597" href="../Subtyping/#plfa_plfa-part2-Subtyping-24489" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-24600" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-24602" href="../Subtyping/#plfa_plfa-part2-Subtyping-17837" class="InductiveConstructor Operator">#</a> <a id="plfa_plfa-part2-Subtyping-24604" href="../Subtyping/#plfa_plfa-part2-Subtyping-24507" class="Bound">l</a> <a id="plfa_plfa-part2-Subtyping-24606" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a>  <a id="plfa_plfa-part2-Subtyping-24610" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-24617" href="../Subtyping/#plfa_plfa-part2-Subtyping-24489" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-24620" href="../Subtyping/#plfa_plfa-part2-Subtyping-24510" class="Bound">j</a>
</pre><p>We have just two new reduction rules: * Rule <code>ξ-#</code>: A field access expression <code>M # l</code> reduces to <code>M′ # l</code> provided that <code>M</code> reduces to <code>M′</code>.</p><ul><li>Rule <code>β-#</code>: When field access is applied to a record, and if the label <code>l</code> is at position <code>j</code> in the vector of field names, then result is the term at position <code>j</code> in the field initializers.</li></ul><h2 id="canonical-forms">Canonical Forms</h2>As in the <a href="../Properties/">Properties</a> chapter, we define a <code>Canonical V ⦂ A</code> relation that characterizes the well-typed values. The presence of the subsumption rule impacts its definition because we must allow the type of the value <code>V</code> to be a subtype of <code>A</code>.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-25261" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-Canonical_⦂_"></a><a id="plfa_plfa-part2-Subtyping-25266" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical_⦂_</a> <a id="plfa_plfa-part2-Subtyping-25279" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25281" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-25286" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25288" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-25293" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25295" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-25299" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Subtyping-Canonical_⦂_.C-ƛ"></a><a id="plfa_plfa-part2-Subtyping-25308" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-25312" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25314" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-25316" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-25317" href="../Subtyping/#plfa_plfa-part2-Subtyping-25317" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-25319" href="../Subtyping/#plfa_plfa-part2-Subtyping-25319" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-25321" href="../Subtyping/#plfa_plfa-part2-Subtyping-25321" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-25323" href="../Subtyping/#plfa_plfa-part2-Subtyping-25323" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-25325" href="../Subtyping/#plfa_plfa-part2-Subtyping-25325" class="Bound">D</a><a id="plfa_plfa-part2-Subtyping-25326" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-25332" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-25335" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-25337" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-25339" href="../Subtyping/#plfa_plfa-part2-Subtyping-25319" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-25341" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-25343" href="../Subtyping/#plfa_plfa-part2-Subtyping-25317" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-25345" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25347" href="../Subtyping/#plfa_plfa-part2-Subtyping-25321" class="Bound">B</a>
    <a id="plfa_plfa-part2-Subtyping-25353" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25355" href="../Subtyping/#plfa_plfa-part2-Subtyping-25319" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-25357" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-25359" href="../Subtyping/#plfa_plfa-part2-Subtyping-25321" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-25361" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-25364" href="../Subtyping/#plfa_plfa-part2-Subtyping-25323" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-25366" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-25368" href="../Subtyping/#plfa_plfa-part2-Subtyping-25325" class="Bound">D</a>
      <a id="plfa_plfa-part2-Subtyping-25376" class="Comment">-------------------------</a>
    <a id="plfa_plfa-part2-Subtyping-25406" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25408" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-25418" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-25419" href="../Subtyping/#plfa_plfa-part2-Subtyping-17505" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part2-Subtyping-25421" href="../Subtyping/#plfa_plfa-part2-Subtyping-25317" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-25422" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-25424" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25426" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-25427" href="../Subtyping/#plfa_plfa-part2-Subtyping-25323" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-25429" href="../Subtyping/#plfa_plfa-part2-Subtyping-8374" class="InductiveConstructor Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-25431" href="../Subtyping/#plfa_plfa-part2-Subtyping-25325" class="Bound">D</a><a id="plfa_plfa-part2-Subtyping-25432" class="Symbol">)</a>

  <a id="plfa_plfa-part2-Subtyping-Canonical_⦂_.C-zero"></a><a id="plfa_plfa-part2-Subtyping-25437" href="../Subtyping/#plfa_plfa-part2-Subtyping-25437" class="InductiveConstructor">C-zero</a> <a id="plfa_plfa-part2-Subtyping-25444" class="Symbol">:</a>
      <a id="plfa_plfa-part2-Subtyping-25452" class="Comment">--------------------</a>
      <a id="plfa_plfa-part2-Subtyping-25479" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-25489" href="../Subtyping/#plfa_plfa-part2-Subtyping-17592" class="InductiveConstructor">`zero</a> <a id="plfa_plfa-part2-Subtyping-25495" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25497" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>

  <a id="plfa_plfa-part2-Subtyping-Canonical_⦂_.C-suc"></a><a id="plfa_plfa-part2-Subtyping-25503" href="../Subtyping/#plfa_plfa-part2-Subtyping-25503" class="InductiveConstructor">C-suc</a> <a id="plfa_plfa-part2-Subtyping-25509" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25511" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-25513" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-25514" href="../Subtyping/#plfa_plfa-part2-Subtyping-25514" class="Bound">V</a><a id="plfa_plfa-part2-Subtyping-25515" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-25521" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25523" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-25533" href="../Subtyping/#plfa_plfa-part2-Subtyping-25514" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-25535" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25537" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>
      <a id="plfa_plfa-part2-Subtyping-25546" class="Comment">---------------------</a>
    <a id="plfa_plfa-part2-Subtyping-25572" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25574" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-25584" href="../Subtyping/#plfa_plfa-part2-Subtyping-17625" class="InductiveConstructor Operator">`suc</a> <a id="plfa_plfa-part2-Subtyping-25589" href="../Subtyping/#plfa_plfa-part2-Subtyping-25514" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-25591" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25593" href="../Subtyping/#plfa_plfa-part2-Subtyping-8403" class="InductiveConstructor">`ℕ</a>

  <a id="plfa_plfa-part2-Subtyping-Canonical_⦂_.C-rcd"></a><a id="plfa_plfa-part2-Subtyping-25599" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-25605" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25607" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-25609" href="../Subtyping/#plfa_plfa-part2-Subtyping-25609" class="Bound">n</a> <a id="plfa_plfa-part2-Subtyping-25611" href="../Subtyping/#plfa_plfa-part2-Subtyping-25611" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-25612" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-25614" href="../Subtyping/#plfa_plfa-part2-Subtyping-25614" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-25617" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25619" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-25623" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-25628" href="../Subtyping/#plfa_plfa-part2-Subtyping-25609" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-25629" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-25631" href="../Subtyping/#plfa_plfa-part2-Subtyping-25631" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-25634" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25636" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-25640" href="../Subtyping/#plfa_plfa-part2-Subtyping-4559" class="Function">Name</a> <a id="plfa_plfa-part2-Subtyping-25645" href="../Subtyping/#plfa_plfa-part2-Subtyping-25611" class="Bound">m</a><a id="plfa_plfa-part2-Subtyping-25646" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-25648" href="../Subtyping/#plfa_plfa-part2-Subtyping-25648" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-25651" href="../Subtyping/#plfa_plfa-part2-Subtyping-25651" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-25654" href="../Subtyping/#plfa_plfa-part2-Subtyping-25654" class="Bound">Bs</a><a id="plfa_plfa-part2-Subtyping-25656" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-25658" href="../Subtyping/#plfa_plfa-part2-Subtyping-25658" class="Bound">dls</a><a id="plfa_plfa-part2-Subtyping-25661" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-25667" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25669" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-25671" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-25674" href="../Subtyping/#plfa_plfa-part2-Subtyping-25648" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-25677" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25679" href="../Subtyping/#plfa_plfa-part2-Subtyping-25651" class="Bound">As</a>
    <a id="plfa_plfa-part2-Subtyping-25686" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25688" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-25689" href="../Subtyping/#plfa_plfa-part2-Subtyping-25689" class="Bound">dks</a> <a id="plfa_plfa-part2-Subtyping-25693" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25695" href="../Subtyping/#plfa_plfa-part2-Subtyping-5318" class="Function">distinct</a> <a id="plfa_plfa-part2-Subtyping-25704" href="../Subtyping/#plfa_plfa-part2-Subtyping-25631" class="Bound">ks</a><a id="plfa_plfa-part2-Subtyping-25706" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-25712" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25714" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-25716" href="../Subtyping/#plfa_plfa-part2-Subtyping-25631" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-25719" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25721" href="../Subtyping/#plfa_plfa-part2-Subtyping-25651" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-25724" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a><a id="plfa_plfa-part2-Subtyping-25725" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-25726" href="../Subtyping/#plfa_plfa-part2-Subtyping-25689" class="Bound">dks</a><a id="plfa_plfa-part2-Subtyping-25729" class="Symbol">}</a>  <a id="plfa_plfa-part2-Subtyping-25732" href="../Subtyping/#plfa_plfa-part2-Subtyping-9207" class="Datatype Operator">&lt;:</a> <a id="plfa_plfa-part2-Subtyping-25735" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-25737" href="../Subtyping/#plfa_plfa-part2-Subtyping-25614" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-25740" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25742" href="../Subtyping/#plfa_plfa-part2-Subtyping-25654" class="Bound">Bs</a> <a id="plfa_plfa-part2-Subtyping-25745" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a><a id="plfa_plfa-part2-Subtyping-25746" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-25747" href="../Subtyping/#plfa_plfa-part2-Subtyping-25658" class="Bound">dls</a><a id="plfa_plfa-part2-Subtyping-25750" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-25756" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25758" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-25768" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-25770" href="../Subtyping/#plfa_plfa-part2-Subtyping-25631" class="Bound">ks</a> <a id="plfa_plfa-part2-Subtyping-25773" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">:=</a> <a id="plfa_plfa-part2-Subtyping-25776" href="../Subtyping/#plfa_plfa-part2-Subtyping-25648" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-25779" href="../Subtyping/#plfa_plfa-part2-Subtyping-17759" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-25781" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25783" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｛</a> <a id="plfa_plfa-part2-Subtyping-25785" href="../Subtyping/#plfa_plfa-part2-Subtyping-25614" class="Bound">ls</a> <a id="plfa_plfa-part2-Subtyping-25788" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25790" href="../Subtyping/#plfa_plfa-part2-Subtyping-25654" class="Bound">Bs</a> <a id="plfa_plfa-part2-Subtyping-25793" href="../Subtyping/#plfa_plfa-part2-Subtyping-8418" class="InductiveConstructor Operator">｝</a> <a id="plfa_plfa-part2-Subtyping-25795" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-25796" href="../Subtyping/#plfa_plfa-part2-Subtyping-25658" class="Bound">dls</a><a id="plfa_plfa-part2-Subtyping-25799" class="Symbol">}</a>
</pre>Every closed, well-typed value is canonical:<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-canonical"></a><a id="plfa_plfa-part2-Subtyping-25859" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-25869" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-25871" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-25873" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-25874" href="../Subtyping/#plfa_plfa-part2-Subtyping-25874" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-25876" href="../Subtyping/#plfa_plfa-part2-Subtyping-25876" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-25877" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-25881" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25883" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-25885" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-25887" href="../Subtyping/#plfa_plfa-part2-Subtyping-25874" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-25889" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25891" href="../Subtyping/#plfa_plfa-part2-Subtyping-25876" class="Bound">A</a>
  <a id="plfa_plfa-part2-Subtyping-25895" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25897" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-25903" href="../Subtyping/#plfa_plfa-part2-Subtyping-25874" class="Bound">V</a>
    <a id="plfa_plfa-part2-Subtyping-25909" class="Comment">-----------</a>
  <a id="plfa_plfa-part2-Subtyping-25923" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-25925" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-25935" href="../Subtyping/#plfa_plfa-part2-Subtyping-25874" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-25937" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-25939" href="../Subtyping/#plfa_plfa-part2-Subtyping-25876" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-25941" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-25951" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-25952" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-25955" class="Symbol">())</a>          <a id="plfa_plfa-part2-Subtyping-25968" class="Symbol">()</a>
<a id="plfa_plfa-part2-Subtyping-25971" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-25981" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-25982" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-25985" href="../Subtyping/#plfa_plfa-part2-Subtyping-25985" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-25987" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-25998" href="../Subtyping/#plfa_plfa-part2-Subtyping-23066" class="InductiveConstructor">V-ƛ</a>         <a id="plfa_plfa-part2-Subtyping-26010" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-26013" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-26017" href="../Subtyping/#plfa_plfa-part2-Subtyping-25985" class="Bound">⊢N</a> <a id="plfa_plfa-part2-Subtyping-26020" href="../Subtyping/#plfa_plfa-part2-Subtyping-14065" class="Function">&lt;:-refl</a>
<a id="plfa_plfa-part2-Subtyping-26028" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26038" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26039" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-26042" href="../Subtyping/#plfa_plfa-part2-Subtyping-26042" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-26045" href="../Subtyping/#plfa_plfa-part2-Subtyping-26045" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-26047" class="Symbol">)</a>       <a id="plfa_plfa-part2-Subtyping-26055" class="Symbol">()</a>
<a id="plfa_plfa-part2-Subtyping-26058" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26068" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a>            <a id="plfa_plfa-part2-Subtyping-26085" href="../Subtyping/#plfa_plfa-part2-Subtyping-23117" class="InductiveConstructor">V-zero</a>      <a id="plfa_plfa-part2-Subtyping-26097" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-26100" href="../Subtyping/#plfa_plfa-part2-Subtyping-25437" class="InductiveConstructor">C-zero</a>
<a id="plfa_plfa-part2-Subtyping-26107" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26117" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26118" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-26123" href="../Subtyping/#plfa_plfa-part2-Subtyping-26123" class="Bound">⊢V</a><a id="plfa_plfa-part2-Subtyping-26125" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-26134" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26135" href="../Subtyping/#plfa_plfa-part2-Subtyping-23169" class="InductiveConstructor">V-suc</a> <a id="plfa_plfa-part2-Subtyping-26141" href="../Subtyping/#plfa_plfa-part2-Subtyping-26141" class="Bound">VV</a><a id="plfa_plfa-part2-Subtyping-26143" class="Symbol">)</a>  <a id="plfa_plfa-part2-Subtyping-26146" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-26149" href="../Subtyping/#plfa_plfa-part2-Subtyping-25503" class="InductiveConstructor">C-suc</a> <a id="plfa_plfa-part2-Subtyping-26155" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26156" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26166" href="../Subtyping/#plfa_plfa-part2-Subtyping-26123" class="Bound">⊢V</a> <a id="plfa_plfa-part2-Subtyping-26169" href="../Subtyping/#plfa_plfa-part2-Subtyping-26141" class="Bound">VV</a><a id="plfa_plfa-part2-Subtyping-26171" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-26173" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26183" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26184" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-26190" href="../Subtyping/#plfa_plfa-part2-Subtyping-26190" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-26193" href="../Subtyping/#plfa_plfa-part2-Subtyping-26193" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-26196" href="../Subtyping/#plfa_plfa-part2-Subtyping-26196" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-26198" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-26200" class="Symbol">()</a>
<a id="plfa_plfa-part2-Subtyping-26203" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26213" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26214" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-26217" href="../Subtyping/#plfa_plfa-part2-Subtyping-26217" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-26219" class="Symbol">)</a>          <a id="plfa_plfa-part2-Subtyping-26230" class="Symbol">()</a>
<a id="plfa_plfa-part2-Subtyping-26233" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26243" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26244" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-26249" href="../Subtyping/#plfa_plfa-part2-Subtyping-26249" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-26253" href="../Subtyping/#plfa_plfa-part2-Subtyping-26253" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-26254" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-26256" href="../Subtyping/#plfa_plfa-part2-Subtyping-26256" class="Bound">VV</a> <a id="plfa_plfa-part2-Subtyping-26259" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26261" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-26267" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-26268" class="Argument">dls</a> <a id="plfa_plfa-part2-Subtyping-26272" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26274" href="../Subtyping/#plfa_plfa-part2-Subtyping-26253" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-26275" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-26277" href="../Subtyping/#plfa_plfa-part2-Subtyping-26249" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-26281" href="../Subtyping/#plfa_plfa-part2-Subtyping-26253" class="Bound">d</a> <a id="plfa_plfa-part2-Subtyping-26283" href="../Subtyping/#plfa_plfa-part2-Subtyping-14065" class="Function">&lt;:-refl</a>
<a id="plfa_plfa-part2-Subtyping-26291" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26301" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26302" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-26306" href="../Subtyping/#plfa_plfa-part2-Subtyping-26306" class="Bound">⊢V</a> <a id="plfa_plfa-part2-Subtyping-26309" href="../Subtyping/#plfa_plfa-part2-Subtyping-9240" class="InductiveConstructor">&lt;:-nat</a><a id="plfa_plfa-part2-Subtyping-26315" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-26317" href="../Subtyping/#plfa_plfa-part2-Subtyping-26317" class="Bound">VV</a> <a id="plfa_plfa-part2-Subtyping-26320" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26322" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26332" href="../Subtyping/#plfa_plfa-part2-Subtyping-26306" class="Bound">⊢V</a> <a id="plfa_plfa-part2-Subtyping-26335" href="../Subtyping/#plfa_plfa-part2-Subtyping-26317" class="Bound">VV</a>
<a id="plfa_plfa-part2-Subtyping-26338" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26348" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26349" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-26353" href="../Subtyping/#plfa_plfa-part2-Subtyping-26353" class="Bound">⊢V</a> <a id="plfa_plfa-part2-Subtyping-26356" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26357" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-26364" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-26365" href="../Subtyping/#plfa_plfa-part2-Subtyping-26365" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-26366" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26368" href="../Subtyping/#plfa_plfa-part2-Subtyping-26368" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-26369" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26371" href="../Subtyping/#plfa_plfa-part2-Subtyping-26371" class="Bound">C</a><a id="plfa_plfa-part2-Subtyping-26372" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26374" href="../Subtyping/#plfa_plfa-part2-Subtyping-26374" class="Bound">D</a><a id="plfa_plfa-part2-Subtyping-26375" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-26377" href="../Subtyping/#plfa_plfa-part2-Subtyping-26377" class="Bound">C&lt;:A</a> <a id="plfa_plfa-part2-Subtyping-26382" href="../Subtyping/#plfa_plfa-part2-Subtyping-26382" class="Bound">B&lt;:D</a><a id="plfa_plfa-part2-Subtyping-26386" class="Symbol">))</a> <a id="plfa_plfa-part2-Subtyping-26389" href="../Subtyping/#plfa_plfa-part2-Subtyping-26389" class="Bound">VV</a>
    <a id="plfa_plfa-part2-Subtyping-26396" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-26401" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26411" href="../Subtyping/#plfa_plfa-part2-Subtyping-26353" class="Bound">⊢V</a> <a id="plfa_plfa-part2-Subtyping-26414" href="../Subtyping/#plfa_plfa-part2-Subtyping-26389" class="Bound">VV</a>
<a id="plfa_plfa-part2-Subtyping-26417" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-26421" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-26423" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-26427" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-26428" href="../Subtyping/#plfa_plfa-part2-Subtyping-26428" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-26429" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26431" href="../Subtyping/#plfa_plfa-part2-Subtyping-26431" class="Bound">A′</a><a id="plfa_plfa-part2-Subtyping-26433" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26435" href="../Subtyping/#plfa_plfa-part2-Subtyping-26435" class="Bound">B′</a><a id="plfa_plfa-part2-Subtyping-26437" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26439" href="../Subtyping/#plfa_plfa-part2-Subtyping-26439" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-26440" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26442" href="../Subtyping/#plfa_plfa-part2-Subtyping-26442" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-26443" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-26445" href="../Subtyping/#plfa_plfa-part2-Subtyping-26445" class="Bound">⊢N</a>  <a id="plfa_plfa-part2-Subtyping-26449" href="../Subtyping/#plfa_plfa-part2-Subtyping-26449" class="Bound">AB′&lt;:AB</a> <a id="plfa_plfa-part2-Subtyping-26457" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26459" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-26463" href="../Subtyping/#plfa_plfa-part2-Subtyping-26445" class="Bound">⊢N</a> <a id="plfa_plfa-part2-Subtyping-26466" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26467" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-26476" href="../Subtyping/#plfa_plfa-part2-Subtyping-26449" class="Bound">AB′&lt;:AB</a> <a id="plfa_plfa-part2-Subtyping-26484" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26485" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-26492" class="Bound">C&lt;:A</a> <a id="plfa_plfa-part2-Subtyping-26497" class="Bound">B&lt;:D</a><a id="plfa_plfa-part2-Subtyping-26501" class="Symbol">))</a>
<a id="plfa_plfa-part2-Subtyping-26504" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26514" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26515" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-26519" href="../Subtyping/#plfa_plfa-part2-Subtyping-26519" class="Bound">⊢V</a> <a id="plfa_plfa-part2-Subtyping-26522" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26523" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-26530" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-26531" class="Argument">ks</a> <a id="plfa_plfa-part2-Subtyping-26534" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26536" href="../Subtyping/#plfa_plfa-part2-Subtyping-26536" class="Bound">ks</a><a id="plfa_plfa-part2-Subtyping-26538" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26540" class="Argument">ls</a> <a id="plfa_plfa-part2-Subtyping-26543" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26545" href="../Subtyping/#plfa_plfa-part2-Subtyping-26545" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-26547" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-26549" class="Argument">d2</a> <a id="plfa_plfa-part2-Subtyping-26552" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26554" href="../Subtyping/#plfa_plfa-part2-Subtyping-26554" class="Bound">dls</a><a id="plfa_plfa-part2-Subtyping-26557" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-26559" href="../Subtyping/#plfa_plfa-part2-Subtyping-26559" class="Bound">ls⊆ks</a> <a id="plfa_plfa-part2-Subtyping-26565" href="../Subtyping/#plfa_plfa-part2-Subtyping-26565" class="Bound">ls⦂Ss&lt;:ks⦂Ts</a><a id="plfa_plfa-part2-Subtyping-26577" class="Symbol">))</a> <a id="plfa_plfa-part2-Subtyping-26580" href="../Subtyping/#plfa_plfa-part2-Subtyping-26580" class="Bound">VV</a>
    <a id="plfa_plfa-part2-Subtyping-26587" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-26592" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-26602" href="../Subtyping/#plfa_plfa-part2-Subtyping-26519" class="Bound">⊢V</a> <a id="plfa_plfa-part2-Subtyping-26605" href="../Subtyping/#plfa_plfa-part2-Subtyping-26580" class="Bound">VV</a>
<a id="plfa_plfa-part2-Subtyping-26608" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-26612" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-26614" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-26620" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-26621" class="Argument">ks</a> <a id="plfa_plfa-part2-Subtyping-26624" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26626" href="../Subtyping/#plfa_plfa-part2-Subtyping-26626" class="Bound">ks′</a><a id="plfa_plfa-part2-Subtyping-26629" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-26631" href="../Subtyping/#plfa_plfa-part2-Subtyping-26631" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-26635" href="../Subtyping/#plfa_plfa-part2-Subtyping-26635" class="Bound">dks′</a> <a id="plfa_plfa-part2-Subtyping-26640" href="../Subtyping/#plfa_plfa-part2-Subtyping-26640" class="Bound">As&lt;:Ss</a> <a id="plfa_plfa-part2-Subtyping-26647" class="Symbol">=</a>
      <a id="plfa_plfa-part2-Subtyping-26655" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-26661" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-26662" class="Argument">dls</a> <a id="plfa_plfa-part2-Subtyping-26666" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-26668" href="../Subtyping/#plfa_plfa-part2-Subtyping-6721" class="Function">distinct-relevant</a> <a id="plfa_plfa-part2-Subtyping-26686" class="Bound">dls</a><a id="plfa_plfa-part2-Subtyping-26689" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-26691" href="../Subtyping/#plfa_plfa-part2-Subtyping-26631" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-26695" href="../Subtyping/#plfa_plfa-part2-Subtyping-26635" class="Bound">dks′</a> <a id="plfa_plfa-part2-Subtyping-26700" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26701" href="../Subtyping/#plfa_plfa-part2-Subtyping-14179" class="Function">&lt;:-trans</a> <a id="plfa_plfa-part2-Subtyping-26710" href="../Subtyping/#plfa_plfa-part2-Subtyping-26640" class="Bound">As&lt;:Ss</a> <a id="plfa_plfa-part2-Subtyping-26717" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-26718" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-26725" class="Bound">ls⊆ks</a> <a id="plfa_plfa-part2-Subtyping-26731" class="Bound">ls⦂Ss&lt;:ks⦂Ts</a><a id="plfa_plfa-part2-Subtyping-26743" class="Symbol">))</a>
</pre><p>The case for subsumption (<code>⊢&lt;:</code>) is interesting. We proceed by cases on the derivation of subtyping.</p><ul><li><p>If the last rule is <code>&lt;:-nat</code>, then we have <code>∅ ⊢ V ⦂ ℕ</code> and the induction hypothesis gives us <code>Canonical V ⦂ ℕ</code>.</p></li><li><p>If the last rule is <code>&lt;:-fun</code>, then we have <code>A ⇒ B &lt;: C ⇒ D</code> and <code>∅ ⊢ ƛ N ⦂ A ⇒ B</code>. By the induction hypothesis, we have <code>∅ , A′ ⊢ N ⦂ B′</code> and <code>A′ ⇒ B′ &lt;: A ⇒ B</code> for some <code>A′</code> and <code>B′</code>. We conclude that <code>Canonical (ƛ N) ⦂ C ⇒ D</code> by rule <code>C-ƛ</code> and the transitivity of subtyping.</p></li><li><p>If the last rule is <code>&lt;:-rcd</code>, then we have <code>｛ ls ⦂ Ss ｝ &lt;: ｛ ks ⦂ Ts ｝</code> and <code>∅ ⊢ ｛ ks′ := Ms ｝ ⦂ ｛ ks ⦂ Ss ｝</code>. By the induction hypothesis, we have <code>∅ ⊢* Ms ⦂ As</code>, <code>distinct ks′</code>, and <code>｛ ks′ ⦂ As ｝ &lt;: ｛ ks ⦂ Ss ｝</code>. We conclude that <code>Canonical ｛ ks′ := Ms ｝ ⦂ ｛ ks ⦂ Ts ｝</code> by rule <code>C-rcd</code> and the transitivity of subtyping.</p></li></ul>If a term is canonical, then it is also a value.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-value"></a><a id="plfa_plfa-part2-Subtyping-27647" href="../Subtyping/#plfa_plfa-part2-Subtyping-27647" class="Function">value</a> <a id="plfa_plfa-part2-Subtyping-27653" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-27655" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-27657" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-27658" href="../Subtyping/#plfa_plfa-part2-Subtyping-27658" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-27660" href="../Subtyping/#plfa_plfa-part2-Subtyping-27660" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-27661" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-27665" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-27667" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-27677" href="../Subtyping/#plfa_plfa-part2-Subtyping-27658" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-27679" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-27681" href="../Subtyping/#plfa_plfa-part2-Subtyping-27660" class="Bound">A</a>
    <a id="plfa_plfa-part2-Subtyping-27687" class="Comment">----------------</a>
  <a id="plfa_plfa-part2-Subtyping-27706" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-27708" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-27714" href="../Subtyping/#plfa_plfa-part2-Subtyping-27658" class="Bound">M</a>
<a id="plfa_plfa-part2-Subtyping-27716" href="../Subtyping/#plfa_plfa-part2-Subtyping-27647" class="Function">value</a> <a id="plfa_plfa-part2-Subtyping-27722" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-27723" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-27727" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-27729" class="Symbol">_)</a>     <a id="plfa_plfa-part2-Subtyping-27736" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-27738" href="../Subtyping/#plfa_plfa-part2-Subtyping-23066" class="InductiveConstructor">V-ƛ</a>
<a id="plfa_plfa-part2-Subtyping-27742" href="../Subtyping/#plfa_plfa-part2-Subtyping-27647" class="Function">value</a> <a id="plfa_plfa-part2-Subtyping-27748" href="../Subtyping/#plfa_plfa-part2-Subtyping-25437" class="InductiveConstructor">C-zero</a>        <a id="plfa_plfa-part2-Subtyping-27762" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-27764" href="../Subtyping/#plfa_plfa-part2-Subtyping-23117" class="InductiveConstructor">V-zero</a>
<a id="plfa_plfa-part2-Subtyping-27771" href="../Subtyping/#plfa_plfa-part2-Subtyping-27647" class="Function">value</a> <a id="plfa_plfa-part2-Subtyping-27777" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-27778" href="../Subtyping/#plfa_plfa-part2-Subtyping-25503" class="InductiveConstructor">C-suc</a> <a id="plfa_plfa-part2-Subtyping-27784" href="../Subtyping/#plfa_plfa-part2-Subtyping-27784" class="Bound">CM</a><a id="plfa_plfa-part2-Subtyping-27786" class="Symbol">)</a>    <a id="plfa_plfa-part2-Subtyping-27791" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-27793" href="../Subtyping/#plfa_plfa-part2-Subtyping-23169" class="InductiveConstructor">V-suc</a> <a id="plfa_plfa-part2-Subtyping-27799" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-27800" href="../Subtyping/#plfa_plfa-part2-Subtyping-27647" class="Function">value</a> <a id="plfa_plfa-part2-Subtyping-27806" href="../Subtyping/#plfa_plfa-part2-Subtyping-27784" class="Bound">CM</a><a id="plfa_plfa-part2-Subtyping-27808" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-27810" href="../Subtyping/#plfa_plfa-part2-Subtyping-27647" class="Function">value</a> <a id="plfa_plfa-part2-Subtyping-27816" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-27817" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-27823" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-27825" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-27827" class="Symbol">_)</a> <a id="plfa_plfa-part2-Subtyping-27830" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-27832" href="../Subtyping/#plfa_plfa-part2-Subtyping-23242" class="InductiveConstructor">V-rcd</a>
</pre>A canonical value is a well-typed value.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-typed"></a><a id="plfa_plfa-part2-Subtyping-27892" href="../Subtyping/#plfa_plfa-part2-Subtyping-27892" class="Function">typed</a> <a id="plfa_plfa-part2-Subtyping-27898" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-27900" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-27902" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-27903" href="../Subtyping/#plfa_plfa-part2-Subtyping-27903" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-27905" href="../Subtyping/#plfa_plfa-part2-Subtyping-27905" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-27906" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-27910" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-27912" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">Canonical</a> <a id="plfa_plfa-part2-Subtyping-27922" href="../Subtyping/#plfa_plfa-part2-Subtyping-27903" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-27924" href="../Subtyping/#plfa_plfa-part2-Subtyping-25266" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-27926" href="../Subtyping/#plfa_plfa-part2-Subtyping-27905" class="Bound">A</a>
    <a id="plfa_plfa-part2-Subtyping-27932" class="Comment">---------------</a>
  <a id="plfa_plfa-part2-Subtyping-27950" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-27952" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-27954" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-27956" href="../Subtyping/#plfa_plfa-part2-Subtyping-27903" class="Bound">V</a> <a id="plfa_plfa-part2-Subtyping-27958" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-27960" href="../Subtyping/#plfa_plfa-part2-Subtyping-27905" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-27962" href="../Subtyping/#plfa_plfa-part2-Subtyping-27892" class="Function">typed</a> <a id="plfa_plfa-part2-Subtyping-27968" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-27969" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-27973" href="../Subtyping/#plfa_plfa-part2-Subtyping-27973" class="Bound">⊢N</a> <a id="plfa_plfa-part2-Subtyping-27976" href="../Subtyping/#plfa_plfa-part2-Subtyping-27976" class="Bound">AB&lt;:CD</a><a id="plfa_plfa-part2-Subtyping-27982" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-27984" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-27986" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-27990" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-27991" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-27994" href="../Subtyping/#plfa_plfa-part2-Subtyping-27973" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-27996" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-27998" href="../Subtyping/#plfa_plfa-part2-Subtyping-27976" class="Bound">AB&lt;:CD</a>
<a id="plfa_plfa-part2-Subtyping-28005" href="../Subtyping/#plfa_plfa-part2-Subtyping-27892" class="Function">typed</a> <a id="plfa_plfa-part2-Subtyping-28011" href="../Subtyping/#plfa_plfa-part2-Subtyping-25437" class="InductiveConstructor">C-zero</a> <a id="plfa_plfa-part2-Subtyping-28018" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-28020" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a>
<a id="plfa_plfa-part2-Subtyping-28026" href="../Subtyping/#plfa_plfa-part2-Subtyping-27892" class="Function">typed</a> <a id="plfa_plfa-part2-Subtyping-28032" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28033" href="../Subtyping/#plfa_plfa-part2-Subtyping-25503" class="InductiveConstructor">C-suc</a> <a id="plfa_plfa-part2-Subtyping-28039" href="../Subtyping/#plfa_plfa-part2-Subtyping-28039" class="Bound">c</a><a id="plfa_plfa-part2-Subtyping-28040" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-28042" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-28044" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-28049" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28050" href="../Subtyping/#plfa_plfa-part2-Subtyping-27892" class="Function">typed</a> <a id="plfa_plfa-part2-Subtyping-28056" href="../Subtyping/#plfa_plfa-part2-Subtyping-28039" class="Bound">c</a><a id="plfa_plfa-part2-Subtyping-28057" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-28059" href="../Subtyping/#plfa_plfa-part2-Subtyping-27892" class="Function">typed</a> <a id="plfa_plfa-part2-Subtyping-28065" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28066" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-28072" href="../Subtyping/#plfa_plfa-part2-Subtyping-28072" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-28076" href="../Subtyping/#plfa_plfa-part2-Subtyping-28076" class="Bound">dks</a> <a id="plfa_plfa-part2-Subtyping-28080" href="../Subtyping/#plfa_plfa-part2-Subtyping-28080" class="Bound">As&lt;:Bs</a><a id="plfa_plfa-part2-Subtyping-28086" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-28088" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-28090" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-28094" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28095" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-28100" href="../Subtyping/#plfa_plfa-part2-Subtyping-28072" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-28104" href="../Subtyping/#plfa_plfa-part2-Subtyping-28076" class="Bound">dks</a><a id="plfa_plfa-part2-Subtyping-28107" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-28109" href="../Subtyping/#plfa_plfa-part2-Subtyping-28080" class="Bound">As&lt;:Bs</a>
</pre><h2 id="subtyping-progress">Progress</h2><p>The Progress theorem states that a well-typed term may either take a reduction step or it is already a value. The proof of Progress is like the one in the <a href="../Properties/">Properties</a>; it proceeds by induction on the typing derivation and most of the cases remain the same. Below we discuss the new cases for records and subsumption.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-28497" class="Keyword">data</a> <a id="plfa_plfa-part2-Subtyping-Progress"></a><a id="plfa_plfa-part2-Subtyping-28502" href="../Subtyping/#plfa_plfa-part2-Subtyping-28502" class="Datatype">Progress</a> <a id="plfa_plfa-part2-Subtyping-28511" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28512" href="../Subtyping/#plfa_plfa-part2-Subtyping-28512" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-28514" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-28516" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-28520" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-28522" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-28524" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a> <a id="plfa_plfa-part2-Subtyping-28528" class="Keyword">where</a>

  <a id="plfa_plfa-part2-Subtyping-Progress.step"></a><a id="plfa_plfa-part2-Subtyping-28537" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-28542" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-28544" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-28546" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-28547" href="../Subtyping/#plfa_plfa-part2-Subtyping-28547" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-28548" class="Symbol">}</a>
    <a id="plfa_plfa-part2-Subtyping-28554" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-28556" href="../Subtyping/#plfa_plfa-part2-Subtyping-28512" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-28558" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-28561" href="../Subtyping/#plfa_plfa-part2-Subtyping-28547" class="Bound">N</a>
      <a id="plfa_plfa-part2-Subtyping-28569" class="Comment">----------</a>
    <a id="plfa_plfa-part2-Subtyping-28584" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-28586" href="../Subtyping/#plfa_plfa-part2-Subtyping-28502" class="Datatype">Progress</a> <a id="plfa_plfa-part2-Subtyping-28595" href="../Subtyping/#plfa_plfa-part2-Subtyping-28512" class="Bound">M</a>

  <a id="plfa_plfa-part2-Subtyping-Progress.done"></a><a id="plfa_plfa-part2-Subtyping-28600" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-28605" class="Symbol">:</a>
      <a id="plfa_plfa-part2-Subtyping-28613" href="../Subtyping/#plfa_plfa-part2-Subtyping-23038" class="Datatype">Value</a> <a id="plfa_plfa-part2-Subtyping-28619" href="../Subtyping/#plfa_plfa-part2-Subtyping-28512" class="Bound">M</a>
      <a id="plfa_plfa-part2-Subtyping-28627" class="Comment">----------</a>
    <a id="plfa_plfa-part2-Subtyping-28642" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-28644" href="../Subtyping/#plfa_plfa-part2-Subtyping-28502" class="Datatype">Progress</a> <a id="plfa_plfa-part2-Subtyping-28653" href="../Subtyping/#plfa_plfa-part2-Subtyping-28512" class="Bound">M</a>
</pre><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-progress"></a><a id="plfa_plfa-part2-Subtyping-28668" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-28677" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-28679" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-28681" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-28682" href="../Subtyping/#plfa_plfa-part2-Subtyping-28682" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-28684" href="../Subtyping/#plfa_plfa-part2-Subtyping-28684" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-28685" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-28689" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-28691" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-28693" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-28695" href="../Subtyping/#plfa_plfa-part2-Subtyping-28682" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-28697" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-28699" href="../Subtyping/#plfa_plfa-part2-Subtyping-28684" class="Bound">A</a>
    <a id="plfa_plfa-part2-Subtyping-28705" class="Comment">----------</a>
  <a id="plfa_plfa-part2-Subtyping-28718" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-28720" href="../Subtyping/#plfa_plfa-part2-Subtyping-28502" class="Datatype">Progress</a> <a id="plfa_plfa-part2-Subtyping-28729" href="../Subtyping/#plfa_plfa-part2-Subtyping-28682" class="Bound">M</a>
<a id="plfa_plfa-part2-Subtyping-28731" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-28740" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28741" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-28744" class="Symbol">())</a>
<a id="plfa_plfa-part2-Subtyping-28748" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-28757" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28758" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-28761" href="../Subtyping/#plfa_plfa-part2-Subtyping-28761" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-28763" class="Symbol">)</a>                            <a id="plfa_plfa-part2-Subtyping-28792" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-28794" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-28799" href="../Subtyping/#plfa_plfa-part2-Subtyping-23066" class="InductiveConstructor">V-ƛ</a>
<a id="plfa_plfa-part2-Subtyping-28803" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-28812" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28813" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-28816" href="../Subtyping/#plfa_plfa-part2-Subtyping-28816" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-28819" href="../Subtyping/#plfa_plfa-part2-Subtyping-28819" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-28821" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-28827" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-28832" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-28841" href="../Subtyping/#plfa_plfa-part2-Subtyping-28816" class="Bound">⊢L</a>
<a id="plfa_plfa-part2-Subtyping-28844" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-28848" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-28850" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-28855" href="../Subtyping/#plfa_plfa-part2-Subtyping-28855" class="Bound">L—→L′</a>                            <a id="plfa_plfa-part2-Subtyping-28888" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-28890" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-28895" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28896" href="../Subtyping/#plfa_plfa-part2-Subtyping-23538" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Subtyping-28901" href="../Subtyping/#plfa_plfa-part2-Subtyping-28855" class="Bound">L—→L′</a><a id="plfa_plfa-part2-Subtyping-28906" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-28908" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-28912" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-28914" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-28919" href="../Subtyping/#plfa_plfa-part2-Subtyping-28919" class="Bound">VL</a>
        <a id="plfa_plfa-part2-Subtyping-28930" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-28935" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-28944" class="Bound">⊢M</a>
<a id="plfa_plfa-part2-Subtyping-28947" class="Symbol">...</a>     <a id="plfa_plfa-part2-Subtyping-28955" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-28957" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-28962" href="../Subtyping/#plfa_plfa-part2-Subtyping-28962" class="Bound">M—→M′</a>                        <a id="plfa_plfa-part2-Subtyping-28991" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-28993" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-28998" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-28999" href="../Subtyping/#plfa_plfa-part2-Subtyping-23624" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Subtyping-29004" class="Bound">VL</a> <a id="plfa_plfa-part2-Subtyping-29007" href="../Subtyping/#plfa_plfa-part2-Subtyping-28962" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-29012" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-29014" class="Symbol">...</a>     <a id="plfa_plfa-part2-Subtyping-29022" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29024" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-29029" href="../Subtyping/#plfa_plfa-part2-Subtyping-29029" class="Bound">VM</a>
        <a id="plfa_plfa-part2-Subtyping-29040" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-29045" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-29055" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-29058" class="Bound">VL</a>
<a id="plfa_plfa-part2-Subtyping-29061" class="Symbol">...</a>     <a id="plfa_plfa-part2-Subtyping-29069" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29071" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-29075" href="../Subtyping/#plfa_plfa-part2-Subtyping-29075" class="Bound">⊢N</a> <a id="plfa_plfa-part2-Subtyping-29078" class="Symbol">_</a>                          <a id="plfa_plfa-part2-Subtyping-29105" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-29107" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29112" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29113" href="../Subtyping/#plfa_plfa-part2-Subtyping-23725" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Subtyping-29117" class="Bound">VM</a><a id="plfa_plfa-part2-Subtyping-29119" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-29121" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29130" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a>                              <a id="plfa_plfa-part2-Subtyping-29165" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29168" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-29173" href="../Subtyping/#plfa_plfa-part2-Subtyping-23117" class="InductiveConstructor">V-zero</a>
<a id="plfa_plfa-part2-Subtyping-29180" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29189" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29190" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-29195" href="../Subtyping/#plfa_plfa-part2-Subtyping-29195" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-29197" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-29199" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-29204" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29213" href="../Subtyping/#plfa_plfa-part2-Subtyping-29195" class="Bound">⊢M</a>
<a id="plfa_plfa-part2-Subtyping-29216" class="Symbol">...</a>  <a id="plfa_plfa-part2-Subtyping-29221" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29223" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29228" href="../Subtyping/#plfa_plfa-part2-Subtyping-29228" class="Bound">M—→M′</a>                           <a id="plfa_plfa-part2-Subtyping-29260" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29263" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29268" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29269" href="../Subtyping/#plfa_plfa-part2-Subtyping-23817" class="InductiveConstructor">ξ-suc</a> <a id="plfa_plfa-part2-Subtyping-29275" href="../Subtyping/#plfa_plfa-part2-Subtyping-29228" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-29280" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-29282" class="Symbol">...</a>  <a id="plfa_plfa-part2-Subtyping-29287" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29289" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-29294" href="../Subtyping/#plfa_plfa-part2-Subtyping-29294" class="Bound">VM</a>                              <a id="plfa_plfa-part2-Subtyping-29326" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29329" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-29334" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29335" href="../Subtyping/#plfa_plfa-part2-Subtyping-23169" class="InductiveConstructor">V-suc</a> <a id="plfa_plfa-part2-Subtyping-29341" href="../Subtyping/#plfa_plfa-part2-Subtyping-29294" class="Bound">VM</a><a id="plfa_plfa-part2-Subtyping-29343" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-29345" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29354" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29355" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-29361" href="../Subtyping/#plfa_plfa-part2-Subtyping-29361" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-29364" href="../Subtyping/#plfa_plfa-part2-Subtyping-29364" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-29367" href="../Subtyping/#plfa_plfa-part2-Subtyping-29367" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-29369" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-29371" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-29376" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29385" href="../Subtyping/#plfa_plfa-part2-Subtyping-29361" class="Bound">⊢L</a>
<a id="plfa_plfa-part2-Subtyping-29388" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-29392" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29394" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29399" href="../Subtyping/#plfa_plfa-part2-Subtyping-29399" class="Bound">L—→L′</a>                            <a id="plfa_plfa-part2-Subtyping-29432" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29435" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29440" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29441" href="../Subtyping/#plfa_plfa-part2-Subtyping-23906" class="InductiveConstructor">ξ-case</a> <a id="plfa_plfa-part2-Subtyping-29448" href="../Subtyping/#plfa_plfa-part2-Subtyping-29399" class="Bound">L—→L′</a><a id="plfa_plfa-part2-Subtyping-29453" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-29455" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-29459" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29461" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-29466" href="../Subtyping/#plfa_plfa-part2-Subtyping-29466" class="Bound">VL</a> <a id="plfa_plfa-part2-Subtyping-29469" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-29474" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-29484" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-29487" href="../Subtyping/#plfa_plfa-part2-Subtyping-29466" class="Bound">VL</a>
<a id="plfa_plfa-part2-Subtyping-29490" class="Symbol">...</a>   <a id="plfa_plfa-part2-Subtyping-29496" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29498" href="../Subtyping/#plfa_plfa-part2-Subtyping-25437" class="InductiveConstructor">C-zero</a>                              <a id="plfa_plfa-part2-Subtyping-29534" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29537" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29542" href="../Subtyping/#plfa_plfa-part2-Subtyping-24076" class="InductiveConstructor">β-zero</a>
<a id="plfa_plfa-part2-Subtyping-29549" class="Symbol">...</a>   <a id="plfa_plfa-part2-Subtyping-29555" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29557" href="../Subtyping/#plfa_plfa-part2-Subtyping-25503" class="InductiveConstructor">C-suc</a> <a id="plfa_plfa-part2-Subtyping-29563" href="../Subtyping/#plfa_plfa-part2-Subtyping-29563" class="Bound">CL</a>                            <a id="plfa_plfa-part2-Subtyping-29593" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29596" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29601" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29602" href="../Subtyping/#plfa_plfa-part2-Subtyping-24186" class="InductiveConstructor">β-suc</a> <a id="plfa_plfa-part2-Subtyping-29608" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29609" href="../Subtyping/#plfa_plfa-part2-Subtyping-27647" class="Function">value</a> <a id="plfa_plfa-part2-Subtyping-29615" href="../Subtyping/#plfa_plfa-part2-Subtyping-29563" class="Bound">CL</a><a id="plfa_plfa-part2-Subtyping-29617" class="Symbol">))</a>
<a id="plfa_plfa-part2-Subtyping-29620" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29629" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29630" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-29633" href="../Subtyping/#plfa_plfa-part2-Subtyping-29633" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-29635" class="Symbol">)</a>                            <a id="plfa_plfa-part2-Subtyping-29664" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29667" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29672" href="../Subtyping/#plfa_plfa-part2-Subtyping-24328" class="InductiveConstructor">β-μ</a>
<a id="plfa_plfa-part2-Subtyping-29676" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29685" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29686" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-29689" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-29690" href="../Subtyping/#plfa_plfa-part2-Subtyping-29690" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-29691" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29693" href="../Subtyping/#plfa_plfa-part2-Subtyping-29693" class="Bound">Γ</a><a id="plfa_plfa-part2-Subtyping-29694" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29696" href="../Subtyping/#plfa_plfa-part2-Subtyping-29696" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-29697" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29699" href="../Subtyping/#plfa_plfa-part2-Subtyping-29699" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-29700" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29702" href="../Subtyping/#plfa_plfa-part2-Subtyping-29702" class="Bound">l</a><a id="plfa_plfa-part2-Subtyping-29703" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29705" href="../Subtyping/#plfa_plfa-part2-Subtyping-29705" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-29707" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29709" href="../Subtyping/#plfa_plfa-part2-Subtyping-29709" class="Bound">As</a><a id="plfa_plfa-part2-Subtyping-29711" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29713" href="../Subtyping/#plfa_plfa-part2-Subtyping-29713" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-29714" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29716" href="../Subtyping/#plfa_plfa-part2-Subtyping-29716" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-29717" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-29719" href="../Subtyping/#plfa_plfa-part2-Subtyping-29719" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-29722" href="../Subtyping/#plfa_plfa-part2-Subtyping-29722" class="Bound">ls[i]=l</a> <a id="plfa_plfa-part2-Subtyping-29730" href="../Subtyping/#plfa_plfa-part2-Subtyping-29730" class="Bound">As[i]=A</a><a id="plfa_plfa-part2-Subtyping-29737" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-29743" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-29748" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-29757" href="../Subtyping/#plfa_plfa-part2-Subtyping-29719" class="Bound">⊢M</a>
<a id="plfa_plfa-part2-Subtyping-29760" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-29764" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29766" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29771" href="../Subtyping/#plfa_plfa-part2-Subtyping-29771" class="Bound">M—→M′</a>                            <a id="plfa_plfa-part2-Subtyping-29804" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29807" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-29812" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29813" href="../Subtyping/#plfa_plfa-part2-Subtyping-24396" class="InductiveConstructor">ξ-#</a> <a id="plfa_plfa-part2-Subtyping-29817" href="../Subtyping/#plfa_plfa-part2-Subtyping-29771" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-29822" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-29824" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-29828" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29830" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-29835" href="../Subtyping/#plfa_plfa-part2-Subtyping-29835" class="Bound">VM</a>
    <a id="plfa_plfa-part2-Subtyping-29842" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-29847" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-29857" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-29860" href="../Subtyping/#plfa_plfa-part2-Subtyping-29835" class="Bound">VM</a>
<a id="plfa_plfa-part2-Subtyping-29863" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-29867" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29869" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-29875" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-29876" class="Argument">ks</a> <a id="plfa_plfa-part2-Subtyping-29879" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-29881" href="../Subtyping/#plfa_plfa-part2-Subtyping-29881" class="Bound">ms</a><a id="plfa_plfa-part2-Subtyping-29883" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-29885" class="Argument">As</a> <a id="plfa_plfa-part2-Subtyping-29888" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-29890" href="../Subtyping/#plfa_plfa-part2-Subtyping-29890" class="Bound">Bs</a><a id="plfa_plfa-part2-Subtyping-29892" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-29894" href="../Subtyping/#plfa_plfa-part2-Subtyping-29894" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-29898" class="Symbol">_</a> <a id="plfa_plfa-part2-Subtyping-29900" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-29901" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-29908" href="../Subtyping/#plfa_plfa-part2-Subtyping-29908" class="Bound">ls⊆ms</a> <a id="plfa_plfa-part2-Subtyping-29914" class="Symbol">_)</a>
    <a id="plfa_plfa-part2-Subtyping-29921" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-29926" href="../Subtyping/#plfa_plfa-part2-Subtyping-7943" class="Function">lookup-⊆</a> <a id="plfa_plfa-part2-Subtyping-29935" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-29936" class="Argument">i</a> <a id="plfa_plfa-part2-Subtyping-29938" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-29940" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-29941" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-29943" href="../Subtyping/#plfa_plfa-part2-Subtyping-29908" class="Bound">ls⊆ms</a>
<a id="plfa_plfa-part2-Subtyping-29949" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-29953" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-29955" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-29957" href="../Subtyping/#plfa_plfa-part2-Subtyping-29957" class="Bound">k</a> <a id="plfa_plfa-part2-Subtyping-29959" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-29961" href="../Subtyping/#plfa_plfa-part2-Subtyping-29961" class="Bound">ls[i]=ms[k]</a> <a id="plfa_plfa-part2-Subtyping-29973" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a>                   <a id="plfa_plfa-part2-Subtyping-29993" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-29996" href="../Subtyping/#plfa_plfa-part2-Subtyping-28537" class="InductiveConstructor">step</a> <a id="plfa_plfa-part2-Subtyping-30001" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-30002" href="../Subtyping/#plfa_plfa-part2-Subtyping-24460" class="InductiveConstructor">β-#</a> <a id="plfa_plfa-part2-Subtyping-30006" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-30007" class="Argument">j</a> <a id="plfa_plfa-part2-Subtyping-30009" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-30011" href="../Subtyping/#plfa_plfa-part2-Subtyping-29957" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-30012" class="Symbol">}(</a><a id="plfa_plfa-part2-Subtyping-30014" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="plfa_plfa-part2-Subtyping-30020" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-30021" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part2-Subtyping-30025" href="../Subtyping/#plfa_plfa-part2-Subtyping-29961" class="Bound">ls[i]=ms[k]</a><a id="plfa_plfa-part2-Subtyping-30036" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-30038" class="Bound">ls[i]=l</a><a id="plfa_plfa-part2-Subtyping-30045" class="Symbol">))</a>
<a id="plfa_plfa-part2-Subtyping-30048" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-30057" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-30058" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-30063" href="../Subtyping/#plfa_plfa-part2-Subtyping-30063" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-30065" href="../Subtyping/#plfa_plfa-part2-Subtyping-30065" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-30066" class="Symbol">)</a>                         <a id="plfa_plfa-part2-Subtyping-30092" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-30095" href="../Subtyping/#plfa_plfa-part2-Subtyping-28600" class="InductiveConstructor">done</a> <a id="plfa_plfa-part2-Subtyping-30100" href="../Subtyping/#plfa_plfa-part2-Subtyping-23242" class="InductiveConstructor">V-rcd</a>
<a id="plfa_plfa-part2-Subtyping-30106" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-30115" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-30116" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-30120" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-30121" class="Argument">A</a> <a id="plfa_plfa-part2-Subtyping-30123" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-30125" href="../Subtyping/#plfa_plfa-part2-Subtyping-30125" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-30126" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-30128" href="../Subtyping/#plfa_plfa-part2-Subtyping-30128" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-30129" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-30131" href="../Subtyping/#plfa_plfa-part2-Subtyping-30131" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-30134" href="../Subtyping/#plfa_plfa-part2-Subtyping-30134" class="Bound">A&lt;:B</a><a id="plfa_plfa-part2-Subtyping-30138" class="Symbol">)</a>           <a id="plfa_plfa-part2-Subtyping-30150" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-30153" href="../Subtyping/#plfa_plfa-part2-Subtyping-28668" class="Function">progress</a> <a id="plfa_plfa-part2-Subtyping-30162" href="../Subtyping/#plfa_plfa-part2-Subtyping-30131" class="Bound">⊢M</a>
</pre><ul><li><p>Case <code>⊢#</code>: We have <code>Γ ⊢ M ⦂ ｛ ls ⦂ As ｝</code>, <code>lookup ls i ≡ l</code>, and <code>lookup As i ≡ A</code>. By the induction hypothesis, either <code>M —→ M′</code> or <code>M</code> is a value. In the later case we conclude that <code>M # l —→ M′ # l</code> by rule <code>ξ-#</code>. On the other hand, if <code>M</code> is a value, we invoke the canonical forms lemma to show that <code>M</code> has the form <code>｛ ms := Ms ｝</code> where <code>∅ ⊢* Ms ⦂ Bs</code> and <code>ls ⊆ ms</code>. By lemma <code>lookup-⊆</code>, we have <code>lookup ls i ≡ lookup ms k</code> for some <code>k</code>. Thus, we have <code>lookup ms k ≡ l</code> and we conclude <code>｛ ms := Ms ｝ # l —→ lookup Ms k</code> by rule <code>β-#</code>.</p></li><li><p>Case <code>⊢rcd</code>: we immediately characterize the record as a value.</p></li><li><p>Case <code>⊢&lt;:</code>: we invoke the induction hypothesis on sub-derivation of <code>Γ ⊢ M ⦂ A</code>.</p></li></ul><h2 id="subtyping-preservation">Preservation</h2><p>In this section we prove that when a well-typed term takes a reduction step, the result is another well-typed term with the same type.</p><p>As mentioned earlier, we need to prove that substitution preserve types, which in turn requires that renaming preserves types. The proofs of these lemmas are adapted from the intrinsic versions of the <code>ext</code>, <code>rename</code>, <code>exts</code>, and <code>subst</code> functions in the <a href="../DeBruijn/">DeBruijn</a> chapter.</p>We define the following abbreviation for a <em>well-typed renaming</em> from Γ to Δ, that is, a renaming that sends variables in Γ to variables in Δ with the same type.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-_⦂ᵣ_⇒_"></a><a id="plfa_plfa-part2-Subtyping-31514" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">_⦂ᵣ_⇒_</a> <a id="plfa_plfa-part2-Subtyping-31521" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-31523" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-31524" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-31527" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31529" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a><a id="plfa_plfa-part2-Subtyping-31531" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-31533" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31535" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-31543" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31545" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-31553" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31555" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Subtyping-31559" href="../Subtyping/#plfa_plfa-part2-Subtyping-31559" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-31561" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⦂ᵣ</a> <a id="plfa_plfa-part2-Subtyping-31564" href="../Subtyping/#plfa_plfa-part2-Subtyping-31564" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-31566" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-31568" href="../Subtyping/#plfa_plfa-part2-Subtyping-31568" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-31570" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-31572" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-31574" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-31575" href="../Subtyping/#plfa_plfa-part2-Subtyping-31575" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-31577" href="../Subtyping/#plfa_plfa-part2-Subtyping-31577" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-31578" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-31580" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31582" href="../Subtyping/#plfa_plfa-part2-Subtyping-31564" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-31584" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-31586" href="../Subtyping/#plfa_plfa-part2-Subtyping-31575" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-31588" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-31590" href="../Subtyping/#plfa_plfa-part2-Subtyping-31577" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-31592" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31594" href="../Subtyping/#plfa_plfa-part2-Subtyping-31568" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-31596" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-31598" href="../Subtyping/#plfa_plfa-part2-Subtyping-31559" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-31600" href="../Subtyping/#plfa_plfa-part2-Subtyping-31575" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-31602" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-31604" href="../Subtyping/#plfa_plfa-part2-Subtyping-31577" class="Bound">A</a>
</pre>The <code>ext</code> function takes a well-typed renaming from Γ to Δ and extends it to become a renaming from (Γ , B) to (Δ , B).<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-ext-pres"></a><a id="plfa_plfa-part2-Subtyping-31739" href="../Subtyping/#plfa_plfa-part2-Subtyping-31739" class="Function">ext-pres</a> <a id="plfa_plfa-part2-Subtyping-31748" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-31750" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-31752" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-31753" href="../Subtyping/#plfa_plfa-part2-Subtyping-31753" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-31755" href="../Subtyping/#plfa_plfa-part2-Subtyping-31755" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-31757" href="../Subtyping/#plfa_plfa-part2-Subtyping-31757" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-31759" href="../Subtyping/#plfa_plfa-part2-Subtyping-31759" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-31760" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-31764" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31766" href="../Subtyping/#plfa_plfa-part2-Subtyping-31757" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-31768" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⦂ᵣ</a> <a id="plfa_plfa-part2-Subtyping-31771" href="../Subtyping/#plfa_plfa-part2-Subtyping-31753" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-31773" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-31775" href="../Subtyping/#plfa_plfa-part2-Subtyping-31755" class="Bound">Δ</a>
    <a id="plfa_plfa-part2-Subtyping-31781" class="Comment">--------------------------------</a>
  <a id="plfa_plfa-part2-Subtyping-31816" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-31818" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-31822" href="../Subtyping/#plfa_plfa-part2-Subtyping-31757" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-31824" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⦂ᵣ</a> <a id="plfa_plfa-part2-Subtyping-31827" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-31828" href="../Subtyping/#plfa_plfa-part2-Subtyping-31753" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-31830" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-31832" href="../Subtyping/#plfa_plfa-part2-Subtyping-31759" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-31833" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-31835" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-31837" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-31838" href="../Subtyping/#plfa_plfa-part2-Subtyping-31755" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-31840" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-31842" href="../Subtyping/#plfa_plfa-part2-Subtyping-31759" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-31843" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-31845" href="../Subtyping/#plfa_plfa-part2-Subtyping-31739" class="Function">ext-pres</a> <a id="plfa_plfa-part2-Subtyping-31854" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-31855" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-31857" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-31859" href="../Subtyping/#plfa_plfa-part2-Subtyping-31859" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-31861" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-31863" href="../Subtyping/#plfa_plfa-part2-Subtyping-31863" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-31866" href="../Subtyping/#plfa_plfa-part2-Subtyping-16759" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Subtyping-31868" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-31870" href="../Subtyping/#plfa_plfa-part2-Subtyping-16759" class="InductiveConstructor">Z</a>
<a id="plfa_plfa-part2-Subtyping-31872" href="../Subtyping/#plfa_plfa-part2-Subtyping-31739" class="Function">ext-pres</a> <a id="plfa_plfa-part2-Subtyping-31881" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-31882" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-31884" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-31886" href="../Subtyping/#plfa_plfa-part2-Subtyping-31886" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-31888" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-31890" href="../Subtyping/#plfa_plfa-part2-Subtyping-31890" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-31893" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-31894" href="../Subtyping/#plfa_plfa-part2-Subtyping-16819" class="InductiveConstructor">S</a> <a id="plfa_plfa-part2-Subtyping-31896" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-31897" class="Argument">x</a> <a id="plfa_plfa-part2-Subtyping-31899" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-31901" href="../Subtyping/#plfa_plfa-part2-Subtyping-31901" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-31902" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-31904" href="../Subtyping/#plfa_plfa-part2-Subtyping-31904" class="Bound">∋x</a><a id="plfa_plfa-part2-Subtyping-31906" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-31908" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-31911" href="../Subtyping/#plfa_plfa-part2-Subtyping-16819" class="InductiveConstructor">S</a> <a id="plfa_plfa-part2-Subtyping-31913" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-31914" href="../Subtyping/#plfa_plfa-part2-Subtyping-31890" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-31917" href="../Subtyping/#plfa_plfa-part2-Subtyping-31904" class="Bound">∋x</a><a id="plfa_plfa-part2-Subtyping-31919" class="Symbol">)</a>
</pre>Next we prove that both <code>rename</code> and <code>rename-vec</code> preserve types. We use the <code>ext-pres</code> lemma in each of the cases with a variable binding: <code>⊢ƛ</code>, <code>⊢μ</code>, and <code>⊢case</code>.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-ren-vec-pres"></a><a id="plfa_plfa-part2-Subtyping-32100" href="../Subtyping/#plfa_plfa-part2-Subtyping-32100" class="Function">ren-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-32113" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-32115" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-32117" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32118" href="../Subtyping/#plfa_plfa-part2-Subtyping-32118" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-32120" href="../Subtyping/#plfa_plfa-part2-Subtyping-32120" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-32122" href="../Subtyping/#plfa_plfa-part2-Subtyping-32122" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32123" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-32125" href="../Subtyping/#plfa_plfa-part2-Subtyping-32125" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-32126" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-32128" href="../Subtyping/#plfa_plfa-part2-Subtyping-32128" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-32131" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-32133" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-32137" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-32142" href="../Subtyping/#plfa_plfa-part2-Subtyping-32125" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-32143" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-32145" href="../Subtyping/#plfa_plfa-part2-Subtyping-32145" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-32148" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-32150" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-32154" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-32159" href="../Subtyping/#plfa_plfa-part2-Subtyping-32125" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-32160" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-32164" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-32166" href="../Subtyping/#plfa_plfa-part2-Subtyping-32122" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-32168" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⦂ᵣ</a> <a id="plfa_plfa-part2-Subtyping-32171" href="../Subtyping/#plfa_plfa-part2-Subtyping-32118" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-32173" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-32175" href="../Subtyping/#plfa_plfa-part2-Subtyping-32120" class="Bound">Δ</a>  <a id="plfa_plfa-part2-Subtyping-32178" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-32181" href="../Subtyping/#plfa_plfa-part2-Subtyping-32118" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-32183" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-32186" href="../Subtyping/#plfa_plfa-part2-Subtyping-32128" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-32189" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-32191" href="../Subtyping/#plfa_plfa-part2-Subtyping-32145" class="Bound">As</a>  <a id="plfa_plfa-part2-Subtyping-32195" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-32198" href="../Subtyping/#plfa_plfa-part2-Subtyping-32120" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-32200" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-32203" href="../Subtyping/#plfa_plfa-part2-Subtyping-20899" class="Function">rename-vec</a> <a id="plfa_plfa-part2-Subtyping-32214" href="../Subtyping/#plfa_plfa-part2-Subtyping-32122" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-32216" href="../Subtyping/#plfa_plfa-part2-Subtyping-32128" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-32219" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-32221" href="../Subtyping/#plfa_plfa-part2-Subtyping-32145" class="Bound">As</a>

<a id="plfa_plfa-part2-Subtyping-rename-pres"></a><a id="plfa_plfa-part2-Subtyping-32225" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32237" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-32239" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-32241" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32242" href="../Subtyping/#plfa_plfa-part2-Subtyping-32242" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-32244" href="../Subtyping/#plfa_plfa-part2-Subtyping-32244" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-32246" href="../Subtyping/#plfa_plfa-part2-Subtyping-32246" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-32248" href="../Subtyping/#plfa_plfa-part2-Subtyping-32248" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-32250" href="../Subtyping/#plfa_plfa-part2-Subtyping-32250" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-32251" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-32255" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-32257" href="../Subtyping/#plfa_plfa-part2-Subtyping-32246" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-32259" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⦂ᵣ</a> <a id="plfa_plfa-part2-Subtyping-32262" href="../Subtyping/#plfa_plfa-part2-Subtyping-32242" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-32264" href="../Subtyping/#plfa_plfa-part2-Subtyping-31514" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-32266" href="../Subtyping/#plfa_plfa-part2-Subtyping-32244" class="Bound">Δ</a>
  <a id="plfa_plfa-part2-Subtyping-32270" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-32272" href="../Subtyping/#plfa_plfa-part2-Subtyping-32242" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-32274" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-32276" href="../Subtyping/#plfa_plfa-part2-Subtyping-32248" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-32278" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-32280" href="../Subtyping/#plfa_plfa-part2-Subtyping-32250" class="Bound">A</a>
    <a id="plfa_plfa-part2-Subtyping-32286" class="Comment">------------------</a>
  <a id="plfa_plfa-part2-Subtyping-32307" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-32309" href="../Subtyping/#plfa_plfa-part2-Subtyping-32244" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-32311" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-32313" href="../Subtyping/#plfa_plfa-part2-Subtyping-20956" class="Function">rename</a> <a id="plfa_plfa-part2-Subtyping-32320" href="../Subtyping/#plfa_plfa-part2-Subtyping-32246" class="Bound">ρ</a> <a id="plfa_plfa-part2-Subtyping-32322" href="../Subtyping/#plfa_plfa-part2-Subtyping-32248" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-32324" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-32326" href="../Subtyping/#plfa_plfa-part2-Subtyping-32250" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-32328" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32340" href="../Subtyping/#plfa_plfa-part2-Subtyping-32340" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32343" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32344" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-32347" href="../Subtyping/#plfa_plfa-part2-Subtyping-32347" class="Bound">∋w</a><a id="plfa_plfa-part2-Subtyping-32349" class="Symbol">)</a>           <a id="plfa_plfa-part2-Subtyping-32361" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-32364" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-32367" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32368" href="../Subtyping/#plfa_plfa-part2-Subtyping-32340" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32371" href="../Subtyping/#plfa_plfa-part2-Subtyping-32347" class="Bound">∋w</a><a id="plfa_plfa-part2-Subtyping-32373" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-32375" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32387" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32388" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32390" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32392" href="../Subtyping/#plfa_plfa-part2-Subtyping-32392" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32393" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32395" href="../Subtyping/#plfa_plfa-part2-Subtyping-32395" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32398" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32399" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-32402" href="../Subtyping/#plfa_plfa-part2-Subtyping-32402" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-32404" class="Symbol">)</a>   <a id="plfa_plfa-part2-Subtyping-32408" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-32411" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-32414" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32415" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32427" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32428" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32430" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32432" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-32436" href="../Subtyping/#plfa_plfa-part2-Subtyping-32392" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32437" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32439" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32440" href="../Subtyping/#plfa_plfa-part2-Subtyping-31739" class="Function">ext-pres</a> <a id="plfa_plfa-part2-Subtyping-32449" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32450" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32452" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32454" href="../Subtyping/#plfa_plfa-part2-Subtyping-32392" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32455" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32457" href="../Subtyping/#plfa_plfa-part2-Subtyping-32395" class="Bound">ρ⦂</a><a id="plfa_plfa-part2-Subtyping-32459" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32461" href="../Subtyping/#plfa_plfa-part2-Subtyping-32402" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-32463" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-32465" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32477" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32478" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32480" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32482" href="../Subtyping/#plfa_plfa-part2-Subtyping-32482" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32483" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32485" href="../Subtyping/#plfa_plfa-part2-Subtyping-32485" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32488" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32489" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-32492" href="../Subtyping/#plfa_plfa-part2-Subtyping-32492" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-32495" href="../Subtyping/#plfa_plfa-part2-Subtyping-32495" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32497" class="Symbol">)=</a>  <a id="plfa_plfa-part2-Subtyping-32501" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-32504" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32505" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32517" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32518" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32520" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32522" href="../Subtyping/#plfa_plfa-part2-Subtyping-32482" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32523" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32525" href="../Subtyping/#plfa_plfa-part2-Subtyping-32485" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32528" href="../Subtyping/#plfa_plfa-part2-Subtyping-32492" class="Bound">⊢L</a><a id="plfa_plfa-part2-Subtyping-32530" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32532" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32533" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32545" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32546" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32548" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32550" href="../Subtyping/#plfa_plfa-part2-Subtyping-32482" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32551" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32553" href="../Subtyping/#plfa_plfa-part2-Subtyping-32485" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32556" href="../Subtyping/#plfa_plfa-part2-Subtyping-32495" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32558" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-32560" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32572" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32573" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32575" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32577" href="../Subtyping/#plfa_plfa-part2-Subtyping-32577" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32578" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32580" href="../Subtyping/#plfa_plfa-part2-Subtyping-32580" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32583" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32584" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-32587" href="../Subtyping/#plfa_plfa-part2-Subtyping-32587" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32589" class="Symbol">)</a>   <a id="plfa_plfa-part2-Subtyping-32593" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-32596" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-32599" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32600" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32612" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32613" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32615" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32617" href="../Subtyping/#plfa_plfa-part2-Subtyping-20687" class="Function">ext</a> <a id="plfa_plfa-part2-Subtyping-32621" href="../Subtyping/#plfa_plfa-part2-Subtyping-32577" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32622" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32624" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32625" href="../Subtyping/#plfa_plfa-part2-Subtyping-31739" class="Function">ext-pres</a> <a id="plfa_plfa-part2-Subtyping-32634" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32635" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32637" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32639" href="../Subtyping/#plfa_plfa-part2-Subtyping-32577" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32640" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32642" href="../Subtyping/#plfa_plfa-part2-Subtyping-32580" class="Bound">ρ⦂</a><a id="plfa_plfa-part2-Subtyping-32644" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32646" href="../Subtyping/#plfa_plfa-part2-Subtyping-32587" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32648" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-32650" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32662" href="../Subtyping/#plfa_plfa-part2-Subtyping-32662" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32665" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32666" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-32671" href="../Subtyping/#plfa_plfa-part2-Subtyping-32671" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-32675" href="../Subtyping/#plfa_plfa-part2-Subtyping-32675" class="Bound">dls</a><a id="plfa_plfa-part2-Subtyping-32678" class="Symbol">)</a>    <a id="plfa_plfa-part2-Subtyping-32683" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32685" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-32690" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32691" href="../Subtyping/#plfa_plfa-part2-Subtyping-32100" class="Function">ren-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-32704" href="../Subtyping/#plfa_plfa-part2-Subtyping-32662" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32707" href="../Subtyping/#plfa_plfa-part2-Subtyping-32671" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-32711" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32713" href="../Subtyping/#plfa_plfa-part2-Subtyping-32675" class="Bound">dls</a>
<a id="plfa_plfa-part2-Subtyping-32717" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32729" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32730" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32732" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32734" href="../Subtyping/#plfa_plfa-part2-Subtyping-32734" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32735" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32737" href="../Subtyping/#plfa_plfa-part2-Subtyping-32737" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32740" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32741" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-32744" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32745" class="Argument">d</a> <a id="plfa_plfa-part2-Subtyping-32747" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32749" href="../Subtyping/#plfa_plfa-part2-Subtyping-32749" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-32750" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32752" href="../Subtyping/#plfa_plfa-part2-Subtyping-32752" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-32755" href="../Subtyping/#plfa_plfa-part2-Subtyping-32755" class="Bound">lif</a> <a id="plfa_plfa-part2-Subtyping-32759" href="../Subtyping/#plfa_plfa-part2-Subtyping-32759" class="Bound">liA</a><a id="plfa_plfa-part2-Subtyping-32762" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32764" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32766" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-32769" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32770" class="Argument">d</a> <a id="plfa_plfa-part2-Subtyping-32772" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32774" href="../Subtyping/#plfa_plfa-part2-Subtyping-32749" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-32775" class="Symbol">}(</a><a id="plfa_plfa-part2-Subtyping-32777" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32789" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32790" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32792" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32794" href="../Subtyping/#plfa_plfa-part2-Subtyping-32734" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32795" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32797" href="../Subtyping/#plfa_plfa-part2-Subtyping-32737" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32800" href="../Subtyping/#plfa_plfa-part2-Subtyping-32752" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32802" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32804" href="../Subtyping/#plfa_plfa-part2-Subtyping-32755" class="Bound">lif</a> <a id="plfa_plfa-part2-Subtyping-32808" href="../Subtyping/#plfa_plfa-part2-Subtyping-32759" class="Bound">liA</a>
<a id="plfa_plfa-part2-Subtyping-32812" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32824" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32825" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32827" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32829" href="../Subtyping/#plfa_plfa-part2-Subtyping-32829" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32830" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32832" href="../Subtyping/#plfa_plfa-part2-Subtyping-32832" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32835" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32836" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-32840" href="../Subtyping/#plfa_plfa-part2-Subtyping-32840" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-32843" href="../Subtyping/#plfa_plfa-part2-Subtyping-32843" class="Bound">lt</a><a id="plfa_plfa-part2-Subtyping-32845" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32847" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32849" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-32853" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32854" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32866" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-32867" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-32869" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32871" href="../Subtyping/#plfa_plfa-part2-Subtyping-32829" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-32872" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-32874" href="../Subtyping/#plfa_plfa-part2-Subtyping-32832" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32877" href="../Subtyping/#plfa_plfa-part2-Subtyping-32840" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32879" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-32881" href="../Subtyping/#plfa_plfa-part2-Subtyping-32843" class="Bound">lt</a>
<a id="plfa_plfa-part2-Subtyping-32884" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32896" href="../Subtyping/#plfa_plfa-part2-Subtyping-32896" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32899" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a>               <a id="plfa_plfa-part2-Subtyping-32919" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32921" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a>
<a id="plfa_plfa-part2-Subtyping-32927" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32939" href="../Subtyping/#plfa_plfa-part2-Subtyping-32939" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32942" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32943" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-32948" href="../Subtyping/#plfa_plfa-part2-Subtyping-32948" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32950" class="Symbol">)</a>           <a id="plfa_plfa-part2-Subtyping-32962" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-32964" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-32969" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-32970" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-32982" href="../Subtyping/#plfa_plfa-part2-Subtyping-32939" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-32985" href="../Subtyping/#plfa_plfa-part2-Subtyping-32948" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-32987" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-32989" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-33001" href="../Subtyping/#plfa_plfa-part2-Subtyping-33001" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-33004" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33005" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-33011" href="../Subtyping/#plfa_plfa-part2-Subtyping-33011" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-33014" href="../Subtyping/#plfa_plfa-part2-Subtyping-33014" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-33017" href="../Subtyping/#plfa_plfa-part2-Subtyping-33017" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-33019" class="Symbol">)</a>    <a id="plfa_plfa-part2-Subtyping-33024" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-33030" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-33036" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33037" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-33049" href="../Subtyping/#plfa_plfa-part2-Subtyping-33001" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-33052" href="../Subtyping/#plfa_plfa-part2-Subtyping-33011" class="Bound">⊢L</a><a id="plfa_plfa-part2-Subtyping-33054" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33056" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33057" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-33069" href="../Subtyping/#plfa_plfa-part2-Subtyping-33001" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-33072" href="../Subtyping/#plfa_plfa-part2-Subtyping-33014" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-33074" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33076" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33077" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-33089" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33090" href="../Subtyping/#plfa_plfa-part2-Subtyping-31739" class="Function">ext-pres</a> <a id="plfa_plfa-part2-Subtyping-33099" href="../Subtyping/#plfa_plfa-part2-Subtyping-33001" class="Bound">ρ⦂</a><a id="plfa_plfa-part2-Subtyping-33101" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33103" href="../Subtyping/#plfa_plfa-part2-Subtyping-33017" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-33105" class="Symbol">)</a>

<a id="plfa_plfa-part2-Subtyping-33108" href="../Subtyping/#plfa_plfa-part2-Subtyping-32100" class="Function">ren-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-33121" href="../Subtyping/#plfa_plfa-part2-Subtyping-33121" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-33124" href="../Subtyping/#plfa_plfa-part2-Subtyping-19291" class="InductiveConstructor">⊢*-[]</a> <a id="plfa_plfa-part2-Subtyping-33130" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33132" href="../Subtyping/#plfa_plfa-part2-Subtyping-19291" class="InductiveConstructor">⊢*-[]</a>
<a id="plfa_plfa-part2-Subtyping-33138" href="../Subtyping/#plfa_plfa-part2-Subtyping-32100" class="Function">ren-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-33151" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33152" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-33154" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33156" href="../Subtyping/#plfa_plfa-part2-Subtyping-33156" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-33157" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33159" href="../Subtyping/#plfa_plfa-part2-Subtyping-33159" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-33162" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33163" href="../Subtyping/#plfa_plfa-part2-Subtyping-19322" class="InductiveConstructor">⊢*-∷</a> <a id="plfa_plfa-part2-Subtyping-33168" href="../Subtyping/#plfa_plfa-part2-Subtyping-33168" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-33171" href="../Subtyping/#plfa_plfa-part2-Subtyping-33171" class="Bound">⊢Ms</a><a id="plfa_plfa-part2-Subtyping-33174" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33176" class="Symbol">=</a>
  <a id="plfa_plfa-part2-Subtyping-33180" class="Keyword">let</a> <a id="plfa_plfa-part2-Subtyping-33184" href="../Subtyping/#plfa_plfa-part2-Subtyping-33184" class="Bound">IH</a> <a id="plfa_plfa-part2-Subtyping-33187" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33189" href="../Subtyping/#plfa_plfa-part2-Subtyping-32100" class="Function">ren-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-33202" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33203" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-33205" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33207" href="../Subtyping/#plfa_plfa-part2-Subtyping-33156" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-33208" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33210" href="../Subtyping/#plfa_plfa-part2-Subtyping-33159" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-33213" href="../Subtyping/#plfa_plfa-part2-Subtyping-33171" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-33217" class="Keyword">in</a>
  <a id="plfa_plfa-part2-Subtyping-33222" href="../Subtyping/#plfa_plfa-part2-Subtyping-19322" class="InductiveConstructor">⊢*-∷</a> <a id="plfa_plfa-part2-Subtyping-33227" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33228" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-33240" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33241" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-33243" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33245" href="../Subtyping/#plfa_plfa-part2-Subtyping-33156" class="Bound">ρ</a><a id="plfa_plfa-part2-Subtyping-33246" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33248" href="../Subtyping/#plfa_plfa-part2-Subtyping-33159" class="Bound">ρ⦂</a> <a id="plfa_plfa-part2-Subtyping-33251" href="../Subtyping/#plfa_plfa-part2-Subtyping-33168" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-33253" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33255" href="../Subtyping/#plfa_plfa-part2-Subtyping-33184" class="Bound">IH</a>
</pre>A <em>well-typed substitution</em> from Γ to Δ sends variables in Γ to terms of the same type in the context Δ.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-_⦂_⇒_"></a><a id="plfa_plfa-part2-Subtyping-33376" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">_⦂_⇒_</a> <a id="plfa_plfa-part2-Subtyping-33382" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-33384" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33385" href="../Subtyping/#plfa_plfa-part2-Subtyping-17194" class="Function">Id</a> <a id="plfa_plfa-part2-Subtyping-33388" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33390" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a><a id="plfa_plfa-part2-Subtyping-33394" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33396" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33398" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-33406" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33408" href="../Subtyping/#plfa_plfa-part2-Subtyping-16497" class="Datatype">Context</a> <a id="plfa_plfa-part2-Subtyping-33416" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33418" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part2-Subtyping-33422" href="../Subtyping/#plfa_plfa-part2-Subtyping-33422" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-33424" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-33426" href="../Subtyping/#plfa_plfa-part2-Subtyping-33426" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-33428" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-33430" href="../Subtyping/#plfa_plfa-part2-Subtyping-33430" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-33432" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33434" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-33436" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33437" href="../Subtyping/#plfa_plfa-part2-Subtyping-33437" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-33439" href="../Subtyping/#plfa_plfa-part2-Subtyping-33439" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-33440" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33442" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33444" href="../Subtyping/#plfa_plfa-part2-Subtyping-33426" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-33446" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-33448" href="../Subtyping/#plfa_plfa-part2-Subtyping-33439" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-33450" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-33452" href="../Subtyping/#plfa_plfa-part2-Subtyping-33437" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-33454" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33456" href="../Subtyping/#plfa_plfa-part2-Subtyping-33430" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-33458" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-33460" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-33466" href="../Subtyping/#plfa_plfa-part2-Subtyping-33422" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-33468" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33469" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-33471" href="../Subtyping/#plfa_plfa-part2-Subtyping-33439" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-33472" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33474" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-33476" href="../Subtyping/#plfa_plfa-part2-Subtyping-33437" class="Bound">A</a>
</pre><p>The <code>exts</code> function sends well-typed substitutions from Γ to Δ to well-typed substitutions from (Γ , B) to (Δ , B). In the case for <code>S</code>, we note that <code>exts σ (suc x) ≡ rename sub (σ x)</code>, so we need to prove <code>Δ , B ⊢ rename suc (σ x) ⦂ A</code>, which we obtain by the <code>rename-pres</code> lemma.</p><pre class="Agda"><a id="plfa_plfa-part2-Subtyping-exts-pres"></a><a id="plfa_plfa-part2-Subtyping-33775" href="../Subtyping/#plfa_plfa-part2-Subtyping-33775" class="Function">exts-pres</a> <a id="plfa_plfa-part2-Subtyping-33785" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-33787" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-33789" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33790" href="../Subtyping/#plfa_plfa-part2-Subtyping-33790" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-33792" href="../Subtyping/#plfa_plfa-part2-Subtyping-33792" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-33794" href="../Subtyping/#plfa_plfa-part2-Subtyping-33794" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-33796" href="../Subtyping/#plfa_plfa-part2-Subtyping-33796" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-33797" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-33801" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33803" href="../Subtyping/#plfa_plfa-part2-Subtyping-33794" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-33805" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-33807" href="../Subtyping/#plfa_plfa-part2-Subtyping-33790" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-33809" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-33811" href="../Subtyping/#plfa_plfa-part2-Subtyping-33792" class="Bound">Δ</a>
    <a id="plfa_plfa-part2-Subtyping-33817" class="Comment">--------------------------------</a>
  <a id="plfa_plfa-part2-Subtyping-33852" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-33854" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-33859" href="../Subtyping/#plfa_plfa-part2-Subtyping-33794" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-33861" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-33863" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33864" href="../Subtyping/#plfa_plfa-part2-Subtyping-33790" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-33866" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-33868" href="../Subtyping/#plfa_plfa-part2-Subtyping-33796" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-33869" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33871" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-33873" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33874" href="../Subtyping/#plfa_plfa-part2-Subtyping-33792" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-33876" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-33878" href="../Subtyping/#plfa_plfa-part2-Subtyping-33796" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-33879" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-33881" href="../Subtyping/#plfa_plfa-part2-Subtyping-33775" class="Function">exts-pres</a> <a id="plfa_plfa-part2-Subtyping-33891" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33892" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-33894" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33896" href="../Subtyping/#plfa_plfa-part2-Subtyping-33896" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-33897" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33899" href="../Subtyping/#plfa_plfa-part2-Subtyping-33899" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-33902" href="../Subtyping/#plfa_plfa-part2-Subtyping-16759" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Subtyping-33904" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33906" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-33909" href="../Subtyping/#plfa_plfa-part2-Subtyping-16759" class="InductiveConstructor">Z</a>
<a id="plfa_plfa-part2-Subtyping-33911" href="../Subtyping/#plfa_plfa-part2-Subtyping-33775" class="Function">exts-pres</a> <a id="plfa_plfa-part2-Subtyping-33921" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33922" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-33924" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33926" href="../Subtyping/#plfa_plfa-part2-Subtyping-33926" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-33927" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33929" href="../Subtyping/#plfa_plfa-part2-Subtyping-33929" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-33932" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33933" href="../Subtyping/#plfa_plfa-part2-Subtyping-16819" class="InductiveConstructor">S</a> <a id="plfa_plfa-part2-Subtyping-33935" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33936" class="Argument">x</a> <a id="plfa_plfa-part2-Subtyping-33938" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33940" href="../Subtyping/#plfa_plfa-part2-Subtyping-33940" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-33941" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33943" href="../Subtyping/#plfa_plfa-part2-Subtyping-33943" class="Bound">∋x</a><a id="plfa_plfa-part2-Subtyping-33945" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-33947" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33949" href="../Subtyping/#plfa_plfa-part2-Subtyping-32225" class="Function">rename-pres</a> <a id="plfa_plfa-part2-Subtyping-33961" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-33962" class="Argument">ρ</a> <a id="plfa_plfa-part2-Subtyping-33964" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-33966" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="plfa_plfa-part2-Subtyping-33969" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-33971" href="../Subtyping/#plfa_plfa-part2-Subtyping-16819" class="InductiveConstructor">S</a> <a id="plfa_plfa-part2-Subtyping-33973" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-33974" href="../Subtyping/#plfa_plfa-part2-Subtyping-33929" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-33977" href="../Subtyping/#plfa_plfa-part2-Subtyping-33943" class="Bound">∋x</a><a id="plfa_plfa-part2-Subtyping-33979" class="Symbol">)</a>
</pre>Now we prove that both <code>subst</code> and <code>subst-vec</code> preserve types. We use the <code>exts-pres</code> lemma in each of the cases with a variable binding: <code>⊢ƛ</code>, <code>⊢μ</code>, and <code>⊢case</code>.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-subst-vec-pres"></a><a id="plfa_plfa-part2-Subtyping-34158" href="../Subtyping/#plfa_plfa-part2-Subtyping-34158" class="Function">subst-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-34173" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-34175" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-34177" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34178" href="../Subtyping/#plfa_plfa-part2-Subtyping-34178" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-34180" href="../Subtyping/#plfa_plfa-part2-Subtyping-34180" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-34182" href="../Subtyping/#plfa_plfa-part2-Subtyping-34182" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34183" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-34185" href="../Subtyping/#plfa_plfa-part2-Subtyping-34185" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-34186" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-34188" href="../Subtyping/#plfa_plfa-part2-Subtyping-34188" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-34191" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-34193" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-34197" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-34202" href="../Subtyping/#plfa_plfa-part2-Subtyping-34185" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-34203" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-34205" href="../Subtyping/#plfa_plfa-part2-Subtyping-34205" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-34206" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-34210" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-34212" href="../Subtyping/#plfa_plfa-part2-Subtyping-34182" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-34214" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-34216" href="../Subtyping/#plfa_plfa-part2-Subtyping-34178" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-34218" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-34220" href="../Subtyping/#plfa_plfa-part2-Subtyping-34180" class="Bound">Δ</a>  <a id="plfa_plfa-part2-Subtyping-34223" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-34226" href="../Subtyping/#plfa_plfa-part2-Subtyping-34178" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-34228" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-34231" href="../Subtyping/#plfa_plfa-part2-Subtyping-34188" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-34234" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-34236" href="../Subtyping/#plfa_plfa-part2-Subtyping-34205" class="Bound">A</a>  <a id="plfa_plfa-part2-Subtyping-34239" class="Symbol">→</a>  <a id="plfa_plfa-part2-Subtyping-34242" href="../Subtyping/#plfa_plfa-part2-Subtyping-34180" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-34244" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-34247" href="../Subtyping/#plfa_plfa-part2-Subtyping-21839" class="Function">subst-vec</a> <a id="plfa_plfa-part2-Subtyping-34257" href="../Subtyping/#plfa_plfa-part2-Subtyping-34182" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-34259" href="../Subtyping/#plfa_plfa-part2-Subtyping-34188" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-34262" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-34264" href="../Subtyping/#plfa_plfa-part2-Subtyping-34205" class="Bound">A</a>

<a id="plfa_plfa-part2-Subtyping-subst-pres"></a><a id="plfa_plfa-part2-Subtyping-34267" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34278" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-34280" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-34282" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34283" href="../Subtyping/#plfa_plfa-part2-Subtyping-34283" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-34285" href="../Subtyping/#plfa_plfa-part2-Subtyping-34285" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-34287" href="../Subtyping/#plfa_plfa-part2-Subtyping-34287" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-34289" href="../Subtyping/#plfa_plfa-part2-Subtyping-34289" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-34291" href="../Subtyping/#plfa_plfa-part2-Subtyping-34291" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-34292" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-34296" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-34298" href="../Subtyping/#plfa_plfa-part2-Subtyping-34287" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-34300" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-34302" href="../Subtyping/#plfa_plfa-part2-Subtyping-34283" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-34304" href="../Subtyping/#plfa_plfa-part2-Subtyping-33376" class="Function Operator">⇒</a> <a id="plfa_plfa-part2-Subtyping-34306" href="../Subtyping/#plfa_plfa-part2-Subtyping-34285" class="Bound">Δ</a>
  <a id="plfa_plfa-part2-Subtyping-34310" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-34312" href="../Subtyping/#plfa_plfa-part2-Subtyping-34283" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-34314" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-34316" href="../Subtyping/#plfa_plfa-part2-Subtyping-34289" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-34318" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-34320" href="../Subtyping/#plfa_plfa-part2-Subtyping-34291" class="Bound">A</a>
    <a id="plfa_plfa-part2-Subtyping-34326" class="Comment">-----------------</a>
  <a id="plfa_plfa-part2-Subtyping-34346" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-34348" href="../Subtyping/#plfa_plfa-part2-Subtyping-34285" class="Bound">Δ</a> <a id="plfa_plfa-part2-Subtyping-34350" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-34352" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-34358" href="../Subtyping/#plfa_plfa-part2-Subtyping-34287" class="Bound">σ</a> <a id="plfa_plfa-part2-Subtyping-34360" href="../Subtyping/#plfa_plfa-part2-Subtyping-34289" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-34362" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-34364" href="../Subtyping/#plfa_plfa-part2-Subtyping-34291" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-34366" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34377" href="../Subtyping/#plfa_plfa-part2-Subtyping-34377" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34380" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34381" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-34384" href="../Subtyping/#plfa_plfa-part2-Subtyping-34384" class="Bound">eq</a><a id="plfa_plfa-part2-Subtyping-34386" class="Symbol">)</a>            <a id="plfa_plfa-part2-Subtyping-34399" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34401" href="../Subtyping/#plfa_plfa-part2-Subtyping-34377" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34404" href="../Subtyping/#plfa_plfa-part2-Subtyping-34384" class="Bound">eq</a>
<a id="plfa_plfa-part2-Subtyping-34407" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34418" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34419" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34421" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34423" href="../Subtyping/#plfa_plfa-part2-Subtyping-34423" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34424" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34426" href="../Subtyping/#plfa_plfa-part2-Subtyping-34426" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34429" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34430" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-34433" href="../Subtyping/#plfa_plfa-part2-Subtyping-34433" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-34435" class="Symbol">)</a>    <a id="plfa_plfa-part2-Subtyping-34440" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34442" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-34445" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34446" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a><a id="plfa_plfa-part2-Subtyping-34456" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34457" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34459" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34461" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-34466" href="../Subtyping/#plfa_plfa-part2-Subtyping-34423" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34467" class="Symbol">}(</a><a id="plfa_plfa-part2-Subtyping-34469" href="../Subtyping/#plfa_plfa-part2-Subtyping-33775" class="Function">exts-pres</a> <a id="plfa_plfa-part2-Subtyping-34479" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34480" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34482" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34484" href="../Subtyping/#plfa_plfa-part2-Subtyping-34423" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34485" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34487" href="../Subtyping/#plfa_plfa-part2-Subtyping-34426" class="Bound">σ⦂</a><a id="plfa_plfa-part2-Subtyping-34489" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34491" href="../Subtyping/#plfa_plfa-part2-Subtyping-34433" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-34493" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-34495" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34506" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34507" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34509" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34511" href="../Subtyping/#plfa_plfa-part2-Subtyping-34511" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34512" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34514" href="../Subtyping/#plfa_plfa-part2-Subtyping-34514" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34517" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34518" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-34521" href="../Subtyping/#plfa_plfa-part2-Subtyping-34521" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-34524" href="../Subtyping/#plfa_plfa-part2-Subtyping-34524" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-34526" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34528" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34530" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-34533" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34534" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a><a id="plfa_plfa-part2-Subtyping-34544" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34545" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34547" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34549" href="../Subtyping/#plfa_plfa-part2-Subtyping-34511" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34550" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34552" href="../Subtyping/#plfa_plfa-part2-Subtyping-34514" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34555" href="../Subtyping/#plfa_plfa-part2-Subtyping-34521" class="Bound">⊢L</a><a id="plfa_plfa-part2-Subtyping-34557" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34559" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34560" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a><a id="plfa_plfa-part2-Subtyping-34570" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34571" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34573" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34575" href="../Subtyping/#plfa_plfa-part2-Subtyping-34511" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34576" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34578" href="../Subtyping/#plfa_plfa-part2-Subtyping-34514" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34581" href="../Subtyping/#plfa_plfa-part2-Subtyping-34524" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-34583" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-34585" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34596" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34597" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34599" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34601" href="../Subtyping/#plfa_plfa-part2-Subtyping-34601" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34602" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34604" href="../Subtyping/#plfa_plfa-part2-Subtyping-34604" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34607" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34608" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-34611" href="../Subtyping/#plfa_plfa-part2-Subtyping-34611" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-34613" class="Symbol">)</a>    <a id="plfa_plfa-part2-Subtyping-34618" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34620" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-34623" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34624" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a><a id="plfa_plfa-part2-Subtyping-34634" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34635" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34637" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34639" href="../Subtyping/#plfa_plfa-part2-Subtyping-21627" class="Function">exts</a> <a id="plfa_plfa-part2-Subtyping-34644" href="../Subtyping/#plfa_plfa-part2-Subtyping-34601" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34645" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34647" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34648" href="../Subtyping/#plfa_plfa-part2-Subtyping-33775" class="Function">exts-pres</a><a id="plfa_plfa-part2-Subtyping-34657" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34658" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34660" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34662" href="../Subtyping/#plfa_plfa-part2-Subtyping-34601" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34663" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34665" href="../Subtyping/#plfa_plfa-part2-Subtyping-34604" class="Bound">σ⦂</a><a id="plfa_plfa-part2-Subtyping-34667" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34669" href="../Subtyping/#plfa_plfa-part2-Subtyping-34611" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-34671" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-34673" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34684" href="../Subtyping/#plfa_plfa-part2-Subtyping-34684" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34687" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34688" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-34693" href="../Subtyping/#plfa_plfa-part2-Subtyping-34693" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-34697" href="../Subtyping/#plfa_plfa-part2-Subtyping-34697" class="Bound">dls</a><a id="plfa_plfa-part2-Subtyping-34700" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34702" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34704" href="../Subtyping/#plfa_plfa-part2-Subtyping-18862" class="InductiveConstructor">⊢rcd</a> <a id="plfa_plfa-part2-Subtyping-34709" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34710" href="../Subtyping/#plfa_plfa-part2-Subtyping-34158" class="Function">subst-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-34725" href="../Subtyping/#plfa_plfa-part2-Subtyping-34684" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34728" href="../Subtyping/#plfa_plfa-part2-Subtyping-34693" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-34732" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34734" href="../Subtyping/#plfa_plfa-part2-Subtyping-34697" class="Bound">dls</a>
<a id="plfa_plfa-part2-Subtyping-34738" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34749" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34750" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34752" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34754" href="../Subtyping/#plfa_plfa-part2-Subtyping-34754" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34755" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34757" href="../Subtyping/#plfa_plfa-part2-Subtyping-34757" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34760" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34761" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-34764" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34765" class="Argument">d</a> <a id="plfa_plfa-part2-Subtyping-34767" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34769" href="../Subtyping/#plfa_plfa-part2-Subtyping-34769" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-34770" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34772" href="../Subtyping/#plfa_plfa-part2-Subtyping-34772" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-34775" href="../Subtyping/#plfa_plfa-part2-Subtyping-34775" class="Bound">lif</a> <a id="plfa_plfa-part2-Subtyping-34779" href="../Subtyping/#plfa_plfa-part2-Subtyping-34779" class="Bound">liA</a><a id="plfa_plfa-part2-Subtyping-34782" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34784" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-34790" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-34793" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34794" class="Argument">d</a> <a id="plfa_plfa-part2-Subtyping-34796" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34798" href="../Subtyping/#plfa_plfa-part2-Subtyping-34769" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-34799" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34801" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34802" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34813" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34814" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34816" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34818" href="../Subtyping/#plfa_plfa-part2-Subtyping-34754" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34819" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34821" href="../Subtyping/#plfa_plfa-part2-Subtyping-34757" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34824" href="../Subtyping/#plfa_plfa-part2-Subtyping-34772" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-34826" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34828" href="../Subtyping/#plfa_plfa-part2-Subtyping-34775" class="Bound">lif</a> <a id="plfa_plfa-part2-Subtyping-34832" href="../Subtyping/#plfa_plfa-part2-Subtyping-34779" class="Bound">liA</a>
<a id="plfa_plfa-part2-Subtyping-34836" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34847" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34848" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34850" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34852" href="../Subtyping/#plfa_plfa-part2-Subtyping-34852" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34853" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34855" href="../Subtyping/#plfa_plfa-part2-Subtyping-34855" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34858" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34859" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-34863" href="../Subtyping/#plfa_plfa-part2-Subtyping-34863" class="Bound">⊢N</a> <a id="plfa_plfa-part2-Subtyping-34866" href="../Subtyping/#plfa_plfa-part2-Subtyping-34866" class="Bound">lt</a><a id="plfa_plfa-part2-Subtyping-34868" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34870" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34872" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-34876" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34877" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34888" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-34889" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-34891" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34893" href="../Subtyping/#plfa_plfa-part2-Subtyping-34852" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-34894" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-34896" href="../Subtyping/#plfa_plfa-part2-Subtyping-34855" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34899" href="../Subtyping/#plfa_plfa-part2-Subtyping-34863" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-34901" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34903" href="../Subtyping/#plfa_plfa-part2-Subtyping-34866" class="Bound">lt</a>
<a id="plfa_plfa-part2-Subtyping-34906" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34917" href="../Subtyping/#plfa_plfa-part2-Subtyping-34917" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34920" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a> <a id="plfa_plfa-part2-Subtyping-34926" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34928" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a>
<a id="plfa_plfa-part2-Subtyping-34934" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34945" href="../Subtyping/#plfa_plfa-part2-Subtyping-34945" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34948" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34949" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-34954" href="../Subtyping/#plfa_plfa-part2-Subtyping-34954" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-34956" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-34958" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-34960" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-34965" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34966" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34977" href="../Subtyping/#plfa_plfa-part2-Subtyping-34945" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34980" href="../Subtyping/#plfa_plfa-part2-Subtyping-34954" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-34982" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-34984" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-34995" href="../Subtyping/#plfa_plfa-part2-Subtyping-34995" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-34998" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-34999" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-35005" href="../Subtyping/#plfa_plfa-part2-Subtyping-35005" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-35008" href="../Subtyping/#plfa_plfa-part2-Subtyping-35008" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-35011" href="../Subtyping/#plfa_plfa-part2-Subtyping-35011" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-35013" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35015" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-35021" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-35027" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35028" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-35039" href="../Subtyping/#plfa_plfa-part2-Subtyping-34995" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-35042" href="../Subtyping/#plfa_plfa-part2-Subtyping-35005" class="Bound">⊢L</a><a id="plfa_plfa-part2-Subtyping-35044" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35046" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35047" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-35058" href="../Subtyping/#plfa_plfa-part2-Subtyping-34995" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-35061" href="../Subtyping/#plfa_plfa-part2-Subtyping-35008" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-35063" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35065" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35066" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-35077" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35078" href="../Subtyping/#plfa_plfa-part2-Subtyping-33775" class="Function">exts-pres</a> <a id="plfa_plfa-part2-Subtyping-35088" href="../Subtyping/#plfa_plfa-part2-Subtyping-34995" class="Bound">σ⦂</a><a id="plfa_plfa-part2-Subtyping-35090" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35092" href="../Subtyping/#plfa_plfa-part2-Subtyping-35011" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-35094" class="Symbol">)</a>

<a id="plfa_plfa-part2-Subtyping-35097" href="../Subtyping/#plfa_plfa-part2-Subtyping-34158" class="Function">subst-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-35112" href="../Subtyping/#plfa_plfa-part2-Subtyping-35112" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-35115" href="../Subtyping/#plfa_plfa-part2-Subtyping-19291" class="InductiveConstructor">⊢*-[]</a> <a id="plfa_plfa-part2-Subtyping-35121" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35123" href="../Subtyping/#plfa_plfa-part2-Subtyping-19291" class="InductiveConstructor">⊢*-[]</a>
<a id="plfa_plfa-part2-Subtyping-35129" href="../Subtyping/#plfa_plfa-part2-Subtyping-34158" class="Function">subst-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-35144" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35145" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-35147" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35149" href="../Subtyping/#plfa_plfa-part2-Subtyping-35149" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-35150" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35152" href="../Subtyping/#plfa_plfa-part2-Subtyping-35152" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-35155" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35156" href="../Subtyping/#plfa_plfa-part2-Subtyping-19322" class="InductiveConstructor">⊢*-∷</a> <a id="plfa_plfa-part2-Subtyping-35161" href="../Subtyping/#plfa_plfa-part2-Subtyping-35161" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-35164" href="../Subtyping/#plfa_plfa-part2-Subtyping-35164" class="Bound">⊢Ms</a><a id="plfa_plfa-part2-Subtyping-35167" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35169" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-35175" href="../Subtyping/#plfa_plfa-part2-Subtyping-19322" class="InductiveConstructor">⊢*-∷</a> <a id="plfa_plfa-part2-Subtyping-35180" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35181" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-35192" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35193" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-35195" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35197" href="../Subtyping/#plfa_plfa-part2-Subtyping-35149" class="Bound">σ</a><a id="plfa_plfa-part2-Subtyping-35198" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35200" href="../Subtyping/#plfa_plfa-part2-Subtyping-35152" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-35203" href="../Subtyping/#plfa_plfa-part2-Subtyping-35161" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-35205" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35207" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35208" href="../Subtyping/#plfa_plfa-part2-Subtyping-34158" class="Function">subst-vec-pres</a> <a id="plfa_plfa-part2-Subtyping-35223" href="../Subtyping/#plfa_plfa-part2-Subtyping-35152" class="Bound">σ⦂</a> <a id="plfa_plfa-part2-Subtyping-35226" href="../Subtyping/#plfa_plfa-part2-Subtyping-35164" class="Bound">⊢Ms</a><a id="plfa_plfa-part2-Subtyping-35229" class="Symbol">)</a>
</pre>The fact that single substitution preserves types is a corollary of <code>subst-pres</code>.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-substitution"></a><a id="plfa_plfa-part2-Subtyping-35326" href="../Subtyping/#plfa_plfa-part2-Subtyping-35326" class="Function">substitution</a> <a id="plfa_plfa-part2-Subtyping-35339" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35341" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-35343" href="../Subtyping/#plfa_plfa-part2-Subtyping-35343" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-35345" href="../Subtyping/#plfa_plfa-part2-Subtyping-35345" class="Bound">A</a> <a id="plfa_plfa-part2-Subtyping-35347" href="../Subtyping/#plfa_plfa-part2-Subtyping-35347" class="Bound">B</a> <a id="plfa_plfa-part2-Subtyping-35349" href="../Subtyping/#plfa_plfa-part2-Subtyping-35349" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-35351" href="../Subtyping/#plfa_plfa-part2-Subtyping-35351" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-35352" class="Symbol">}</a>
   <a id="plfa_plfa-part2-Subtyping-35357" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35359" href="../Subtyping/#plfa_plfa-part2-Subtyping-35343" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-35361" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-35363" href="../Subtyping/#plfa_plfa-part2-Subtyping-35349" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-35365" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-35367" href="../Subtyping/#plfa_plfa-part2-Subtyping-35345" class="Bound">A</a>
   <a id="plfa_plfa-part2-Subtyping-35372" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35374" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35375" href="../Subtyping/#plfa_plfa-part2-Subtyping-35343" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-35377" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-35379" href="../Subtyping/#plfa_plfa-part2-Subtyping-35345" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-35380" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35382" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-35384" href="../Subtyping/#plfa_plfa-part2-Subtyping-35351" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-35386" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-35388" href="../Subtyping/#plfa_plfa-part2-Subtyping-35347" class="Bound">B</a>
     <a id="plfa_plfa-part2-Subtyping-35395" class="Comment">---------------</a>
   <a id="plfa_plfa-part2-Subtyping-35414" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35416" href="../Subtyping/#plfa_plfa-part2-Subtyping-35343" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-35418" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-35420" href="../Subtyping/#plfa_plfa-part2-Subtyping-35351" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-35422" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">[</a> <a id="plfa_plfa-part2-Subtyping-35424" href="../Subtyping/#plfa_plfa-part2-Subtyping-35349" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-35426" href="../Subtyping/#plfa_plfa-part2-Subtyping-22644" class="Function Operator">]</a> <a id="plfa_plfa-part2-Subtyping-35428" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-35430" href="../Subtyping/#plfa_plfa-part2-Subtyping-35347" class="Bound">B</a>
<a id="plfa_plfa-part2-Subtyping-35432" href="../Subtyping/#plfa_plfa-part2-Subtyping-35326" class="Function">substitution</a> <a id="plfa_plfa-part2-Subtyping-35445" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35446" href="../Subtyping/#plfa_plfa-part2-Subtyping-35446" class="Bound">Γ</a><a id="plfa_plfa-part2-Subtyping-35447" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35449" href="../Subtyping/#plfa_plfa-part2-Subtyping-35449" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-35450" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35452" href="../Subtyping/#plfa_plfa-part2-Subtyping-35452" class="Bound">B</a><a id="plfa_plfa-part2-Subtyping-35453" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35455" href="../Subtyping/#plfa_plfa-part2-Subtyping-35455" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-35456" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35458" href="../Subtyping/#plfa_plfa-part2-Subtyping-35458" class="Bound">N</a><a id="plfa_plfa-part2-Subtyping-35459" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35461" href="../Subtyping/#plfa_plfa-part2-Subtyping-35461" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-35464" href="../Subtyping/#plfa_plfa-part2-Subtyping-35464" class="Bound">⊢N</a> <a id="plfa_plfa-part2-Subtyping-35467" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35469" href="../Subtyping/#plfa_plfa-part2-Subtyping-34267" class="Function">subst-pres</a> <a id="plfa_plfa-part2-Subtyping-35480" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35481" class="Argument">σ</a> <a id="plfa_plfa-part2-Subtyping-35483" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35485" href="../Subtyping/#plfa_plfa-part2-Subtyping-22559" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Subtyping-35496" href="../Subtyping/#plfa_plfa-part2-Subtyping-35455" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-35497" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35499" href="../Subtyping/#plfa_plfa-part2-Subtyping-35518" class="Function">G</a> <a id="plfa_plfa-part2-Subtyping-35501" href="../Subtyping/#plfa_plfa-part2-Subtyping-35464" class="Bound">⊢N</a>
    <a id="plfa_plfa-part2-Subtyping-35508" class="Keyword">where</a>
    <a id="plfa_plfa-part2-Subtyping-35518" href="../Subtyping/#plfa_plfa-part2-Subtyping-35518" class="Function">G</a> <a id="plfa_plfa-part2-Subtyping-35520" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35522" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-35524" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35525" href="../Subtyping/#plfa_plfa-part2-Subtyping-35525" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-35527" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35529" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a><a id="plfa_plfa-part2-Subtyping-35533" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35535" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35536" href="../Subtyping/#plfa_plfa-part2-Subtyping-35536" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-35538" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35540" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="plfa_plfa-part2-Subtyping-35541" class="Symbol">}</a>
      <a id="plfa_plfa-part2-Subtyping-35549" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35551" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35552" href="../Subtyping/#plfa_plfa-part2-Subtyping-35446" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-35554" href="../Subtyping/#plfa_plfa-part2-Subtyping-16535" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-35556" href="../Subtyping/#plfa_plfa-part2-Subtyping-35449" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-35557" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35559" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">∋</a> <a id="plfa_plfa-part2-Subtyping-35561" href="../Subtyping/#plfa_plfa-part2-Subtyping-35536" class="Bound">x</a> <a id="plfa_plfa-part2-Subtyping-35563" href="../Subtyping/#plfa_plfa-part2-Subtyping-16717" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-35565" href="../Subtyping/#plfa_plfa-part2-Subtyping-35525" class="Bound">C</a> <a id="plfa_plfa-part2-Subtyping-35567" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35569" href="../Subtyping/#plfa_plfa-part2-Subtyping-35446" class="Bound">Γ</a> <a id="plfa_plfa-part2-Subtyping-35571" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-35573" href="../Subtyping/#plfa_plfa-part2-Subtyping-21897" class="Function">subst</a> <a id="plfa_plfa-part2-Subtyping-35579" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35580" href="../Subtyping/#plfa_plfa-part2-Subtyping-22559" class="Function">subst-zero</a> <a id="plfa_plfa-part2-Subtyping-35591" href="../Subtyping/#plfa_plfa-part2-Subtyping-35455" class="Bound">M</a><a id="plfa_plfa-part2-Subtyping-35592" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35594" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35595" href="../Subtyping/#plfa_plfa-part2-Subtyping-17467" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part2-Subtyping-35597" href="../Subtyping/#plfa_plfa-part2-Subtyping-35536" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-35598" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35600" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-35602" href="../Subtyping/#plfa_plfa-part2-Subtyping-35525" class="Bound">C</a>
    <a id="plfa_plfa-part2-Subtyping-35608" href="../Subtyping/#plfa_plfa-part2-Subtyping-35518" class="Function">G</a> <a id="plfa_plfa-part2-Subtyping-35610" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35611" href="../Subtyping/#plfa_plfa-part2-Subtyping-35611" class="Bound">C</a><a id="plfa_plfa-part2-Subtyping-35612" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35614" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35615" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-35619" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35621" href="../Subtyping/#plfa_plfa-part2-Subtyping-16759" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part2-Subtyping-35623" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35625" href="../Subtyping/#plfa_plfa-part2-Subtyping-35461" class="Bound">⊢M</a>
    <a id="plfa_plfa-part2-Subtyping-35632" href="../Subtyping/#plfa_plfa-part2-Subtyping-35518" class="Function">G</a> <a id="plfa_plfa-part2-Subtyping-35634" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35635" href="../Subtyping/#plfa_plfa-part2-Subtyping-35635" class="Bound">C</a><a id="plfa_plfa-part2-Subtyping-35636" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35638" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35639" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-35643" href="../Subtyping/#plfa_plfa-part2-Subtyping-35643" class="Bound">x</a><a id="plfa_plfa-part2-Subtyping-35644" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35646" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35647" href="../Subtyping/#plfa_plfa-part2-Subtyping-16819" class="InductiveConstructor">S</a> <a id="plfa_plfa-part2-Subtyping-35649" href="../Subtyping/#plfa_plfa-part2-Subtyping-35649" class="Bound">∋x</a><a id="plfa_plfa-part2-Subtyping-35651" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-35653" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35655" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-35658" href="../Subtyping/#plfa_plfa-part2-Subtyping-35649" class="Bound">∋x</a>
</pre>We require just one last lemma before we get to the proof of preservation. The following lemma establishes that field access preserves types.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-field-pres"></a><a id="plfa_plfa-part2-Subtyping-35816" href="../Subtyping/#plfa_plfa-part2-Subtyping-35816" class="Function">field-pres</a> <a id="plfa_plfa-part2-Subtyping-35827" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35829" class="Symbol">∀{</a><a id="plfa_plfa-part2-Subtyping-35831" href="../Subtyping/#plfa_plfa-part2-Subtyping-35831" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-35832" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35834" href="../Subtyping/#plfa_plfa-part2-Subtyping-35834" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-35837" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35839" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-35843" href="../Subtyping/#plfa_plfa-part2-Subtyping-8355" class="Datatype">Type</a> <a id="plfa_plfa-part2-Subtyping-35848" href="../Subtyping/#plfa_plfa-part2-Subtyping-35831" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-35849" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35851" href="../Subtyping/#plfa_plfa-part2-Subtyping-35851" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-35852" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35854" href="../Subtyping/#plfa_plfa-part2-Subtyping-35854" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-35857" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35859" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#959" class="Datatype">Vec</a> <a id="plfa_plfa-part2-Subtyping-35863" href="../Subtyping/#plfa_plfa-part2-Subtyping-17448" class="Datatype">Term</a> <a id="plfa_plfa-part2-Subtyping-35868" href="../Subtyping/#plfa_plfa-part2-Subtyping-35831" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-35869" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-35871" href="../Subtyping/#plfa_plfa-part2-Subtyping-35871" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-35873" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-35875" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1066" class="Datatype">Fin</a> <a id="plfa_plfa-part2-Subtyping-35879" href="../Subtyping/#plfa_plfa-part2-Subtyping-35831" class="Bound">n</a><a id="plfa_plfa-part2-Subtyping-35880" class="Symbol">}</a>
         <a id="plfa_plfa-part2-Subtyping-35891" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35893" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-35895" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⊢*</a> <a id="plfa_plfa-part2-Subtyping-35898" href="../Subtyping/#plfa_plfa-part2-Subtyping-35854" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-35901" href="../Subtyping/#plfa_plfa-part2-Subtyping-18124" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-35903" href="../Subtyping/#plfa_plfa-part2-Subtyping-35834" class="Bound">As</a>
         <a id="plfa_plfa-part2-Subtyping-35915" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35917" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-35924" href="../Subtyping/#plfa_plfa-part2-Subtyping-35834" class="Bound">As</a> <a id="plfa_plfa-part2-Subtyping-35927" href="../Subtyping/#plfa_plfa-part2-Subtyping-35871" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-35929" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part2-Subtyping-35931" href="../Subtyping/#plfa_plfa-part2-Subtyping-35851" class="Bound">A</a>
         <a id="plfa_plfa-part2-Subtyping-35942" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-35944" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-35946" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-35948" href="https://agda.github.io/agda-stdlib/v1.3/Data.Vec.Base.html#1566" class="Function">lookup</a> <a id="plfa_plfa-part2-Subtyping-35955" href="../Subtyping/#plfa_plfa-part2-Subtyping-35854" class="Bound">Ms</a> <a id="plfa_plfa-part2-Subtyping-35958" href="../Subtyping/#plfa_plfa-part2-Subtyping-35871" class="Bound">i</a> <a id="plfa_plfa-part2-Subtyping-35960" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-35962" href="../Subtyping/#plfa_plfa-part2-Subtyping-35851" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-35964" href="../Subtyping/#plfa_plfa-part2-Subtyping-35816" class="Function">field-pres</a> <a id="plfa_plfa-part2-Subtyping-35975" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-35976" class="Argument">i</a> <a id="plfa_plfa-part2-Subtyping-35978" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-35980" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1088" class="InductiveConstructor">zero</a><a id="plfa_plfa-part2-Subtyping-35984" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-35986" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-35987" href="../Subtyping/#plfa_plfa-part2-Subtyping-19322" class="InductiveConstructor">⊢*-∷</a> <a id="plfa_plfa-part2-Subtyping-35992" href="../Subtyping/#plfa_plfa-part2-Subtyping-35992" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-35995" href="../Subtyping/#plfa_plfa-part2-Subtyping-35995" class="Bound">⊢Ms</a><a id="plfa_plfa-part2-Subtyping-35998" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-36000" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Subtyping-36005" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-36007" href="../Subtyping/#plfa_plfa-part2-Subtyping-35992" class="Bound">⊢M</a>
<a id="plfa_plfa-part2-Subtyping-36010" href="../Subtyping/#plfa_plfa-part2-Subtyping-35816" class="Function">field-pres</a> <a id="plfa_plfa-part2-Subtyping-36021" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-36022" class="Argument">i</a> <a id="plfa_plfa-part2-Subtyping-36024" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-36026" href="https://agda.github.io/agda-stdlib/v1.3/Data.Fin.Base.html#1119" class="InductiveConstructor">suc</a> <a id="plfa_plfa-part2-Subtyping-36030" href="../Subtyping/#plfa_plfa-part2-Subtyping-36030" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-36031" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-36033" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36034" href="../Subtyping/#plfa_plfa-part2-Subtyping-19322" class="InductiveConstructor">⊢*-∷</a> <a id="plfa_plfa-part2-Subtyping-36039" href="../Subtyping/#plfa_plfa-part2-Subtyping-36039" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-36042" href="../Subtyping/#plfa_plfa-part2-Subtyping-36042" class="Bound">⊢Ms</a><a id="plfa_plfa-part2-Subtyping-36045" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-36047" href="../Subtyping/#plfa_plfa-part2-Subtyping-36047" class="Bound">As[i]=A</a> <a id="plfa_plfa-part2-Subtyping-36055" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-36057" href="../Subtyping/#plfa_plfa-part2-Subtyping-35816" class="Function">field-pres</a> <a id="plfa_plfa-part2-Subtyping-36068" href="../Subtyping/#plfa_plfa-part2-Subtyping-36042" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-36072" href="../Subtyping/#plfa_plfa-part2-Subtyping-36047" class="Bound">As[i]=A</a>
</pre><p>The proof is by induction on the typing derivation.</p><ul><li><p>Case <code>⊢-*-[]</code>: This case yields a contradiction because <code>Fin 0</code> is uninhabitable.</p></li><li><p>Case <code>⊢-*-∷</code>: So we have <code>∅ ⊢ M ⦂ B</code> and <code>∅ ⊢* Ms ⦂ As</code>. We proceed by cases on <code>i</code>.</p><ul><li><p>If it is <code>0</code>, then lookup yields term <code>M</code> and <code>A ≡ B</code>, so we conclude that <code>∅ ⊢ M ⦂ A</code>.</p></li><li><p>If it is <code>suc i</code>, then we conclude by the induction hypothesis.</p></li></ul></li></ul>We conclude this chapter with the proof of preservation. We discuss the cases particular to records and subtyping in the paragraph following the Agda proof.<pre class="Agda"><a id="plfa_plfa-part2-Subtyping-preserve"></a><a id="plfa_plfa-part2-Subtyping-36642" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36651" class="Symbol">:</a> <a id="plfa_plfa-part2-Subtyping-36653" class="Symbol">∀</a> <a id="plfa_plfa-part2-Subtyping-36655" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-36656" href="../Subtyping/#plfa_plfa-part2-Subtyping-36656" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-36658" href="../Subtyping/#plfa_plfa-part2-Subtyping-36658" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-36660" href="../Subtyping/#plfa_plfa-part2-Subtyping-36660" class="Bound">A</a><a id="plfa_plfa-part2-Subtyping-36661" class="Symbol">}</a>
  <a id="plfa_plfa-part2-Subtyping-36665" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-36667" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-36669" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-36671" href="../Subtyping/#plfa_plfa-part2-Subtyping-36656" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-36673" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-36675" href="../Subtyping/#plfa_plfa-part2-Subtyping-36660" class="Bound">A</a>
  <a id="plfa_plfa-part2-Subtyping-36679" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-36681" href="../Subtyping/#plfa_plfa-part2-Subtyping-36656" class="Bound">M</a> <a id="plfa_plfa-part2-Subtyping-36683" href="../Subtyping/#plfa_plfa-part2-Subtyping-23504" class="Datatype Operator">—→</a> <a id="plfa_plfa-part2-Subtyping-36686" href="../Subtyping/#plfa_plfa-part2-Subtyping-36658" class="Bound">N</a>
    <a id="plfa_plfa-part2-Subtyping-36692" class="Comment">----------</a>
  <a id="plfa_plfa-part2-Subtyping-36705" class="Symbol">→</a> <a id="plfa_plfa-part2-Subtyping-36707" href="../Subtyping/#plfa_plfa-part2-Subtyping-16519" class="InductiveConstructor">∅</a> <a id="plfa_plfa-part2-Subtyping-36709" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part2-Subtyping-36711" href="../Subtyping/#plfa_plfa-part2-Subtyping-36658" class="Bound">N</a> <a id="plfa_plfa-part2-Subtyping-36713" href="../Subtyping/#plfa_plfa-part2-Subtyping-18187" class="Datatype Operator">⦂</a> <a id="plfa_plfa-part2-Subtyping-36715" href="../Subtyping/#plfa_plfa-part2-Subtyping-36660" class="Bound">A</a>
<a id="plfa_plfa-part2-Subtyping-36717" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36726" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36727" href="../Subtyping/#plfa_plfa-part2-Subtyping-18232" class="InductiveConstructor">⊢`</a> <a id="plfa_plfa-part2-Subtyping-36730" class="Symbol">())</a>
<a id="plfa_plfa-part2-Subtyping-36734" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36743" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36744" href="../Subtyping/#plfa_plfa-part2-Subtyping-18302" class="InductiveConstructor">⊢ƛ</a> <a id="plfa_plfa-part2-Subtyping-36747" href="../Subtyping/#plfa_plfa-part2-Subtyping-36747" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-36749" class="Symbol">)</a>                 <a id="plfa_plfa-part2-Subtyping-36767" class="Symbol">()</a>
<a id="plfa_plfa-part2-Subtyping-36770" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36779" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36780" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-36783" href="../Subtyping/#plfa_plfa-part2-Subtyping-36783" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-36786" href="../Subtyping/#plfa_plfa-part2-Subtyping-36786" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-36788" class="Symbol">)</a>              <a id="plfa_plfa-part2-Subtyping-36803" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36804" href="../Subtyping/#plfa_plfa-part2-Subtyping-23538" class="InductiveConstructor">ξ-·₁</a> <a id="plfa_plfa-part2-Subtyping-36809" href="../Subtyping/#plfa_plfa-part2-Subtyping-36809" class="Bound">L—→L′</a><a id="plfa_plfa-part2-Subtyping-36814" class="Symbol">)</a>     <a id="plfa_plfa-part2-Subtyping-36820" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-36823" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-36826" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36827" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36836" href="../Subtyping/#plfa_plfa-part2-Subtyping-36783" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-36839" href="../Subtyping/#plfa_plfa-part2-Subtyping-36809" class="Bound">L—→L′</a><a id="plfa_plfa-part2-Subtyping-36844" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-36846" href="../Subtyping/#plfa_plfa-part2-Subtyping-36786" class="Bound">⊢M</a>
<a id="plfa_plfa-part2-Subtyping-36849" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36858" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36859" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-36862" href="../Subtyping/#plfa_plfa-part2-Subtyping-36862" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-36865" href="../Subtyping/#plfa_plfa-part2-Subtyping-36865" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-36867" class="Symbol">)</a>              <a id="plfa_plfa-part2-Subtyping-36882" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36883" href="../Subtyping/#plfa_plfa-part2-Subtyping-23624" class="InductiveConstructor">ξ-·₂</a> <a id="plfa_plfa-part2-Subtyping-36888" href="../Subtyping/#plfa_plfa-part2-Subtyping-36888" class="Bound">VL</a> <a id="plfa_plfa-part2-Subtyping-36891" href="../Subtyping/#plfa_plfa-part2-Subtyping-36891" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-36896" class="Symbol">)</a>  <a id="plfa_plfa-part2-Subtyping-36899" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-36902" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-36905" href="../Subtyping/#plfa_plfa-part2-Subtyping-36862" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-36908" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36909" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36918" href="../Subtyping/#plfa_plfa-part2-Subtyping-36865" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-36921" href="../Subtyping/#plfa_plfa-part2-Subtyping-36891" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-36926" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-36928" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-36937" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36938" href="../Subtyping/#plfa_plfa-part2-Subtyping-18391" class="InductiveConstructor">⊢·</a> <a id="plfa_plfa-part2-Subtyping-36941" href="../Subtyping/#plfa_plfa-part2-Subtyping-36941" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-36944" href="../Subtyping/#plfa_plfa-part2-Subtyping-36944" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-36946" class="Symbol">)</a>              <a id="plfa_plfa-part2-Subtyping-36961" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-36962" href="../Subtyping/#plfa_plfa-part2-Subtyping-23725" class="InductiveConstructor">β-ƛ</a> <a id="plfa_plfa-part2-Subtyping-36966" href="../Subtyping/#plfa_plfa-part2-Subtyping-36966" class="Bound">VL</a><a id="plfa_plfa-part2-Subtyping-36968" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-36974" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-36979" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-36989" href="../Subtyping/#plfa_plfa-part2-Subtyping-36941" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-36992" href="../Subtyping/#plfa_plfa-part2-Subtyping-23066" class="InductiveConstructor">V-ƛ</a>
<a id="plfa_plfa-part2-Subtyping-36996" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-37000" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-37002" href="../Subtyping/#plfa_plfa-part2-Subtyping-25308" class="InductiveConstructor">C-ƛ</a> <a id="plfa_plfa-part2-Subtyping-37006" href="../Subtyping/#plfa_plfa-part2-Subtyping-37006" class="Bound">⊢N</a> <a id="plfa_plfa-part2-Subtyping-37009" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37010" href="../Subtyping/#plfa_plfa-part2-Subtyping-9261" class="InductiveConstructor">&lt;:-fun</a> <a id="plfa_plfa-part2-Subtyping-37017" href="../Subtyping/#plfa_plfa-part2-Subtyping-37017" class="Bound">CA</a> <a id="plfa_plfa-part2-Subtyping-37020" href="../Subtyping/#plfa_plfa-part2-Subtyping-37020" class="Bound">BC</a><a id="plfa_plfa-part2-Subtyping-37022" class="Symbol">)</a>                       <a id="plfa_plfa-part2-Subtyping-37046" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-37049" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-37053" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37054" href="../Subtyping/#plfa_plfa-part2-Subtyping-35326" class="Function">substitution</a> <a id="plfa_plfa-part2-Subtyping-37067" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37068" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-37072" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37075" href="../Subtyping/#plfa_plfa-part2-Subtyping-37017" class="Bound">CA</a><a id="plfa_plfa-part2-Subtyping-37077" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37079" href="../Subtyping/#plfa_plfa-part2-Subtyping-37006" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-37081" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37083" href="../Subtyping/#plfa_plfa-part2-Subtyping-37020" class="Bound">BC</a>
<a id="plfa_plfa-part2-Subtyping-37086" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37095" href="../Subtyping/#plfa_plfa-part2-Subtyping-18489" class="InductiveConstructor">⊢zero</a>                   <a id="plfa_plfa-part2-Subtyping-37119" class="Symbol">()</a>
<a id="plfa_plfa-part2-Subtyping-37122" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37131" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37132" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-37137" href="../Subtyping/#plfa_plfa-part2-Subtyping-37137" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-37139" class="Symbol">)</a>               <a id="plfa_plfa-part2-Subtyping-37155" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37156" href="../Subtyping/#plfa_plfa-part2-Subtyping-23817" class="InductiveConstructor">ξ-suc</a> <a id="plfa_plfa-part2-Subtyping-37162" href="../Subtyping/#plfa_plfa-part2-Subtyping-37162" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-37167" class="Symbol">)</a>    <a id="plfa_plfa-part2-Subtyping-37172" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-37175" href="../Subtyping/#plfa_plfa-part2-Subtyping-18548" class="InductiveConstructor">⊢suc</a> <a id="plfa_plfa-part2-Subtyping-37180" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37181" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37190" href="../Subtyping/#plfa_plfa-part2-Subtyping-37137" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37193" href="../Subtyping/#plfa_plfa-part2-Subtyping-37162" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-37198" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-37200" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37209" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37210" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-37216" href="../Subtyping/#plfa_plfa-part2-Subtyping-37216" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-37219" href="../Subtyping/#plfa_plfa-part2-Subtyping-37219" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37222" href="../Subtyping/#plfa_plfa-part2-Subtyping-37222" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-37224" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-37233" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37234" href="../Subtyping/#plfa_plfa-part2-Subtyping-23906" class="InductiveConstructor">ξ-case</a> <a id="plfa_plfa-part2-Subtyping-37241" href="../Subtyping/#plfa_plfa-part2-Subtyping-37241" class="Bound">L—→L′</a><a id="plfa_plfa-part2-Subtyping-37246" class="Symbol">)</a>   <a id="plfa_plfa-part2-Subtyping-37250" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-37253" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-37259" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37260" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37269" href="../Subtyping/#plfa_plfa-part2-Subtyping-37216" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-37272" href="../Subtyping/#plfa_plfa-part2-Subtyping-37241" class="Bound">L—→L′</a><a id="plfa_plfa-part2-Subtyping-37277" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37279" href="../Subtyping/#plfa_plfa-part2-Subtyping-37219" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37282" href="../Subtyping/#plfa_plfa-part2-Subtyping-37222" class="Bound">⊢N</a>
<a id="plfa_plfa-part2-Subtyping-37285" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37294" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37295" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-37301" href="../Subtyping/#plfa_plfa-part2-Subtyping-37301" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-37304" href="../Subtyping/#plfa_plfa-part2-Subtyping-37304" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37307" href="../Subtyping/#plfa_plfa-part2-Subtyping-37307" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-37309" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-37318" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37319" href="../Subtyping/#plfa_plfa-part2-Subtyping-24076" class="InductiveConstructor">β-zero</a><a id="plfa_plfa-part2-Subtyping-37325" class="Symbol">)</a>         <a id="plfa_plfa-part2-Subtyping-37335" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-37338" href="../Subtyping/#plfa_plfa-part2-Subtyping-37304" class="Bound">⊢M</a>
<a id="plfa_plfa-part2-Subtyping-37341" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37350" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37351" href="../Subtyping/#plfa_plfa-part2-Subtyping-18627" class="InductiveConstructor">⊢case</a> <a id="plfa_plfa-part2-Subtyping-37357" href="../Subtyping/#plfa_plfa-part2-Subtyping-37357" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-37360" href="../Subtyping/#plfa_plfa-part2-Subtyping-37360" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37363" href="../Subtyping/#plfa_plfa-part2-Subtyping-37363" class="Bound">⊢N</a><a id="plfa_plfa-part2-Subtyping-37365" class="Symbol">)</a>        <a id="plfa_plfa-part2-Subtyping-37374" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37375" href="../Subtyping/#plfa_plfa-part2-Subtyping-24186" class="InductiveConstructor">β-suc</a> <a id="plfa_plfa-part2-Subtyping-37381" href="../Subtyping/#plfa_plfa-part2-Subtyping-37381" class="Bound">VV</a><a id="plfa_plfa-part2-Subtyping-37383" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-37389" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-37394" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-37404" href="../Subtyping/#plfa_plfa-part2-Subtyping-37357" class="Bound">⊢L</a> <a id="plfa_plfa-part2-Subtyping-37407" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37408" href="../Subtyping/#plfa_plfa-part2-Subtyping-23169" class="InductiveConstructor">V-suc</a> <a id="plfa_plfa-part2-Subtyping-37414" href="../Subtyping/#plfa_plfa-part2-Subtyping-37381" class="Bound">VV</a><a id="plfa_plfa-part2-Subtyping-37416" class="Symbol">)</a>
<a id="plfa_plfa-part2-Subtyping-37418" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-37422" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-37424" href="../Subtyping/#plfa_plfa-part2-Subtyping-25503" class="InductiveConstructor">C-suc</a> <a id="plfa_plfa-part2-Subtyping-37430" href="../Subtyping/#plfa_plfa-part2-Subtyping-37430" class="Bound">CV</a>                                    <a id="plfa_plfa-part2-Subtyping-37468" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-37471" href="../Subtyping/#plfa_plfa-part2-Subtyping-35326" class="Function">substitution</a> <a id="plfa_plfa-part2-Subtyping-37484" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37485" href="../Subtyping/#plfa_plfa-part2-Subtyping-27892" class="Function">typed</a> <a id="plfa_plfa-part2-Subtyping-37491" href="../Subtyping/#plfa_plfa-part2-Subtyping-37430" class="Bound">CV</a><a id="plfa_plfa-part2-Subtyping-37493" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37495" class="Bound">⊢N</a>
<a id="plfa_plfa-part2-Subtyping-37498" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37507" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37508" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-37511" href="../Subtyping/#plfa_plfa-part2-Subtyping-37511" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-37513" class="Symbol">)</a>                 <a id="plfa_plfa-part2-Subtyping-37531" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37532" href="../Subtyping/#plfa_plfa-part2-Subtyping-24328" class="InductiveConstructor">β-μ</a><a id="plfa_plfa-part2-Subtyping-37535" class="Symbol">)</a>            <a id="plfa_plfa-part2-Subtyping-37548" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-37551" href="../Subtyping/#plfa_plfa-part2-Subtyping-35326" class="Function">substitution</a> <a id="plfa_plfa-part2-Subtyping-37564" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37565" href="../Subtyping/#plfa_plfa-part2-Subtyping-18786" class="InductiveConstructor">⊢μ</a> <a id="plfa_plfa-part2-Subtyping-37568" href="../Subtyping/#plfa_plfa-part2-Subtyping-37511" class="Bound">⊢M</a><a id="plfa_plfa-part2-Subtyping-37570" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37572" href="../Subtyping/#plfa_plfa-part2-Subtyping-37511" class="Bound">⊢M</a>
<a id="plfa_plfa-part2-Subtyping-37575" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37584" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37585" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-37588" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37589" class="Argument">d</a> <a id="plfa_plfa-part2-Subtyping-37591" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37593" href="../Subtyping/#plfa_plfa-part2-Subtyping-37593" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-37594" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37596" href="../Subtyping/#plfa_plfa-part2-Subtyping-37596" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37599" href="../Subtyping/#plfa_plfa-part2-Subtyping-37599" class="Bound">lsi</a> <a id="plfa_plfa-part2-Subtyping-37603" href="../Subtyping/#plfa_plfa-part2-Subtyping-37603" class="Bound">Asi</a><a id="plfa_plfa-part2-Subtyping-37606" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37608" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37609" href="../Subtyping/#plfa_plfa-part2-Subtyping-24396" class="InductiveConstructor">ξ-#</a> <a id="plfa_plfa-part2-Subtyping-37613" href="../Subtyping/#plfa_plfa-part2-Subtyping-37613" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-37618" class="Symbol">)</a>      <a id="plfa_plfa-part2-Subtyping-37625" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-37628" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-37631" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37632" class="Argument">d</a> <a id="plfa_plfa-part2-Subtyping-37634" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37636" href="../Subtyping/#plfa_plfa-part2-Subtyping-37593" class="Bound">d</a><a id="plfa_plfa-part2-Subtyping-37637" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37639" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37640" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37649" href="../Subtyping/#plfa_plfa-part2-Subtyping-37596" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37652" href="../Subtyping/#plfa_plfa-part2-Subtyping-37613" class="Bound">M—→M′</a><a id="plfa_plfa-part2-Subtyping-37657" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37659" href="../Subtyping/#plfa_plfa-part2-Subtyping-37599" class="Bound">lsi</a> <a id="plfa_plfa-part2-Subtyping-37663" href="../Subtyping/#plfa_plfa-part2-Subtyping-37603" class="Bound">Asi</a>
<a id="plfa_plfa-part2-Subtyping-37667" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-37676" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37677" href="../Subtyping/#plfa_plfa-part2-Subtyping-19019" class="InductiveConstructor">⊢#</a> <a id="plfa_plfa-part2-Subtyping-37680" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37681" class="Argument">ls</a> <a id="plfa_plfa-part2-Subtyping-37684" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37686" href="../Subtyping/#plfa_plfa-part2-Subtyping-37686" class="Bound">ls</a><a id="plfa_plfa-part2-Subtyping-37688" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-37690" class="Argument">i</a> <a id="plfa_plfa-part2-Subtyping-37692" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37694" href="../Subtyping/#plfa_plfa-part2-Subtyping-37694" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-37695" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37697" href="../Subtyping/#plfa_plfa-part2-Subtyping-37697" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37700" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part2-Subtyping-37705" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part2-Subtyping-37709" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-37711" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37712" href="../Subtyping/#plfa_plfa-part2-Subtyping-24460" class="InductiveConstructor">β-#</a> <a id="plfa_plfa-part2-Subtyping-37716" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37717" class="Argument">ls</a> <a id="plfa_plfa-part2-Subtyping-37720" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37722" href="../Subtyping/#plfa_plfa-part2-Subtyping-37722" class="Bound">ks</a><a id="plfa_plfa-part2-Subtyping-37724" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-37726" href="../Subtyping/#plfa_plfa-part2-Subtyping-37726" class="Bound">Ms</a><a id="plfa_plfa-part2-Subtyping-37728" class="Symbol">}{</a><a id="plfa_plfa-part2-Subtyping-37730" class="Argument">j</a> <a id="plfa_plfa-part2-Subtyping-37732" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37734" href="../Subtyping/#plfa_plfa-part2-Subtyping-37734" class="Bound">j</a><a id="plfa_plfa-part2-Subtyping-37735" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37737" href="../Subtyping/#plfa_plfa-part2-Subtyping-37737" class="Bound">ks[j]=l</a><a id="plfa_plfa-part2-Subtyping-37744" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-37750" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-37755" href="../Subtyping/#plfa_plfa-part2-Subtyping-25859" class="Function">canonical</a> <a id="plfa_plfa-part2-Subtyping-37765" href="../Subtyping/#plfa_plfa-part2-Subtyping-37697" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-37768" href="../Subtyping/#plfa_plfa-part2-Subtyping-23242" class="InductiveConstructor">V-rcd</a>
<a id="plfa_plfa-part2-Subtyping-37774" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-37778" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-37780" href="../Subtyping/#plfa_plfa-part2-Subtyping-25599" class="InductiveConstructor">C-rcd</a> <a id="plfa_plfa-part2-Subtyping-37786" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37787" class="Argument">As</a> <a id="plfa_plfa-part2-Subtyping-37790" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37792" href="../Subtyping/#plfa_plfa-part2-Subtyping-37792" class="Bound">Bs</a><a id="plfa_plfa-part2-Subtyping-37794" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37796" href="../Subtyping/#plfa_plfa-part2-Subtyping-37796" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-37800" href="../Subtyping/#plfa_plfa-part2-Subtyping-37800" class="Bound">dks</a> <a id="plfa_plfa-part2-Subtyping-37804" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37805" href="../Subtyping/#plfa_plfa-part2-Subtyping-9358" class="InductiveConstructor">&lt;:-rcd</a> <a id="plfa_plfa-part2-Subtyping-37812" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37813" class="Argument">ks</a> <a id="plfa_plfa-part2-Subtyping-37816" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37818" href="../Subtyping/#plfa_plfa-part2-Subtyping-37818" class="Bound">ks</a><a id="plfa_plfa-part2-Subtyping-37820" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37822" href="../Subtyping/#plfa_plfa-part2-Subtyping-37822" class="Bound">ls⊆ks</a> <a id="plfa_plfa-part2-Subtyping-37828" href="../Subtyping/#plfa_plfa-part2-Subtyping-37828" class="Bound">Bs&lt;:As</a><a id="plfa_plfa-part2-Subtyping-37834" class="Symbol">)</a>
    <a id="plfa_plfa-part2-Subtyping-37840" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-37845" href="../Subtyping/#plfa_plfa-part2-Subtyping-7943" class="Function">lookup-⊆</a> <a id="plfa_plfa-part2-Subtyping-37854" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37855" class="Argument">i</a> <a id="plfa_plfa-part2-Subtyping-37857" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37859" class="Bound">i</a><a id="plfa_plfa-part2-Subtyping-37860" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37862" href="../Subtyping/#plfa_plfa-part2-Subtyping-37822" class="Bound">ls⊆ks</a>
<a id="plfa_plfa-part2-Subtyping-37868" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-37872" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-37874" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part2-Subtyping-37876" href="../Subtyping/#plfa_plfa-part2-Subtyping-37876" class="Bound">k</a> <a id="plfa_plfa-part2-Subtyping-37878" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part2-Subtyping-37880" href="../Subtyping/#plfa_plfa-part2-Subtyping-37880" class="Bound">ls[i]=ks[k]</a> <a id="plfa_plfa-part2-Subtyping-37892" href="../Subtyping/#plfa_plfa-part2-Subtyping-3528" class="InductiveConstructor Operator">⟩</a>
    <a id="plfa_plfa-part2-Subtyping-37898" class="Keyword">with</a> <a id="plfa_plfa-part2-Subtyping-37903" href="../Subtyping/#plfa_plfa-part2-Subtyping-35816" class="Function">field-pres</a> <a id="plfa_plfa-part2-Subtyping-37914" class="Symbol">{</a><a id="plfa_plfa-part2-Subtyping-37915" class="Argument">i</a> <a id="plfa_plfa-part2-Subtyping-37917" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-37919" href="../Subtyping/#plfa_plfa-part2-Subtyping-37876" class="Bound">k</a><a id="plfa_plfa-part2-Subtyping-37920" class="Symbol">}</a> <a id="plfa_plfa-part2-Subtyping-37922" class="Bound">⊢Ms</a> <a id="plfa_plfa-part2-Subtyping-37926" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part2-Subtyping-37931" class="Symbol">...</a> <a id="plfa_plfa-part2-Subtyping-37935" class="Symbol">|</a> <a id="plfa_plfa-part2-Subtyping-37937" href="../Subtyping/#plfa_plfa-part2-Subtyping-37937" class="Bound">⊢Ms[k]⦂Bs[k]</a>
    <a id="plfa_plfa-part2-Subtyping-37954" class="Keyword">rewrite</a> <a id="plfa_plfa-part2-Subtyping-37962" href="../Subtyping/#plfa_plfa-part2-Subtyping-5488" class="Function">distinct-lookup-inj</a> <a id="plfa_plfa-part2-Subtyping-37982" class="Bound">dks</a> <a id="plfa_plfa-part2-Subtyping-37986" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-37987" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1025" class="Function">trans</a> <a id="plfa_plfa-part2-Subtyping-37993" class="Bound">ks[j]=l</a> <a id="plfa_plfa-part2-Subtyping-38001" class="Bound">ls[i]=ks[k]</a><a id="plfa_plfa-part2-Subtyping-38012" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-38014" class="Symbol">=</a>
    <a id="plfa_plfa-part2-Subtyping-38020" class="Keyword">let</a> <a id="plfa_plfa-part2-Subtyping-38024" href="../Subtyping/#plfa_plfa-part2-Subtyping-38024" class="Bound">Ms[k]⦂As[i]</a> <a id="plfa_plfa-part2-Subtyping-38036" class="Symbol">=</a> <a id="plfa_plfa-part2-Subtyping-38038" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-38042" href="../Subtyping/#plfa_plfa-part2-Subtyping-37937" class="Bound">⊢Ms[k]⦂Bs[k]</a> <a id="plfa_plfa-part2-Subtyping-38055" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-38056" class="Bound">Bs&lt;:As</a> <a id="plfa_plfa-part2-Subtyping-38063" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-38064" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part2-Subtyping-38068" class="Bound">ls[i]=ks[k]</a><a id="plfa_plfa-part2-Subtyping-38079" class="Symbol">))</a> <a id="plfa_plfa-part2-Subtyping-38082" class="Keyword">in</a>
    <a id="plfa_plfa-part2-Subtyping-38089" href="../Subtyping/#plfa_plfa-part2-Subtyping-38024" class="Bound">Ms[k]⦂As[i]</a>
<a id="plfa_plfa-part2-Subtyping-38101" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-38110" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-38111" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-38115" href="../Subtyping/#plfa_plfa-part2-Subtyping-38115" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-38118" href="../Subtyping/#plfa_plfa-part2-Subtyping-38118" class="Bound">B&lt;:A</a><a id="plfa_plfa-part2-Subtyping-38122" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-38124" href="../Subtyping/#plfa_plfa-part2-Subtyping-38124" class="Bound">M—→N</a>                       <a id="plfa_plfa-part2-Subtyping-38151" class="Symbol">=</a>  <a id="plfa_plfa-part2-Subtyping-38154" href="../Subtyping/#plfa_plfa-part2-Subtyping-19183" class="InductiveConstructor">⊢&lt;:</a> <a id="plfa_plfa-part2-Subtyping-38158" class="Symbol">(</a><a id="plfa_plfa-part2-Subtyping-38159" href="../Subtyping/#plfa_plfa-part2-Subtyping-36642" class="Function">preserve</a> <a id="plfa_plfa-part2-Subtyping-38168" href="../Subtyping/#plfa_plfa-part2-Subtyping-38115" class="Bound">⊢M</a> <a id="plfa_plfa-part2-Subtyping-38171" href="../Subtyping/#plfa_plfa-part2-Subtyping-38124" class="Bound">M—→N</a><a id="plfa_plfa-part2-Subtyping-38175" class="Symbol">)</a> <a id="plfa_plfa-part2-Subtyping-38177" href="../Subtyping/#plfa_plfa-part2-Subtyping-38118" class="Bound">B&lt;:A</a>
</pre><p>Recall that the proof is by induction on the derivation of <code>∅ ⊢ M ⦂ A</code> with cases on <code>M —→ N</code>.</p><ul><li><p>Case <code>⊢#</code> and <code>ξ-#</code>: So <code>∅ ⊢ M ⦂ ｛ ls ⦂ As ｝</code>, <code>lookup ls i ≡ l</code>, <code>lookup As i ≡ A</code>, and <code>M —→ M′</code>. We apply the induction hypothesis to obtain <code>∅ ⊢ M′ ⦂ ｛ ls ⦂ As ｝</code> and then conclude by rule <code>⊢#</code>.</p></li><li><p>Case <code>⊢#</code> and <code>β-#</code>. We have <code>∅ ⊢ ｛ ks := Ms ｝ ⦂ ｛ ls ⦂ As ｝</code>, <code>lookup ls i ≡ l</code>, <code>lookup As i ≡ A</code>, <code>lookup ks j ≡ l</code>, and <code>｛ ks := Ms ｝ # l —→ lookup Ms j</code>. By the canonical forms lemma, we have <code>∅ ⊢* Ms ⦂ Bs</code>, <code>ls ⊆ ks</code> and <code>ks ⦂ Bs &lt;: ls ⦂ As</code>. By lemma <code>lookup-⊆</code> we have <code>lookup ls i ≡ lookup ks k</code> for some <code>k</code>. Also, we have <code>∅ ⊢ lookup Ms k ⦂ lookup Bs k</code> by lemma <code>field-pres</code>. Then because <code>ks ⦂ Bs &lt;: ls ⦂ As</code> and <code>lookup ks k ≡ lookup ls i</code>, we have <code>lookup Bs k &lt;: lookup As i</code>. So by rule <code>⊢&lt;:</code> we have <code>∅ ⊢ lookup Ms k ⦂ lookup As i</code>. Finally, because <code>lookup</code> is injective and <code>lookup ks j ≡ lookup ks k</code>, we have <code>j ≡ k</code> and conclude that <code>∅ ⊢ lookup Ms j ⦂ lookup As i</code>.</p></li><li><p>Case <code>⊢&lt;:</code>. We have <code>∅ ⊢ M ⦂ B</code>, <code>B &lt;: A</code>, and <code>M —→ N</code>. We apply the induction hypothesis to obtain <code>∅ ⊢ N ⦂ B</code> and then subsumption to conclude that <code>∅ ⊢ N ⦂ A</code>.</p></li></ul><h4 id="exercise-intrinsic-records-stretch">Exercise <code>intrinsic-records</code> (stretch)</h4><p>Formulate the language of this chapter, STLC with records, using intrinsically typed terms. This requires taking an algorithmic approach to the type system, which means that there is no subsumption rule and instead subtyping is used in the elimination rules. For example, the rule for function application would be:</p><pre><code>_·_ : ∀ {Γ A B C}
  → Γ ⊢ A ⇒ B
  → Γ ⊢ C
  → C &lt;: A
    -------
  → Γ ⊢ B</code></pre><h4 id="exercise-type-check-records-practice">Exercise <code>type-check-records</code> (practice)</h4><p>Write a recursive function whose input is a <code>Term</code> and whose output is a typing derivation for that term, if one exists.</p><pre><code>type-check : (M : Term) → (Γ : Context) → Maybe (Σ[ A ∈ Type ] Γ ⊢ M ⦂ A)</code></pre><h4 id="exercise-variants-recommended">Exercise <code>variants</code> (recommended)</h4><p>Add variants to the language of this chapter and update the proofs of progress and preservation. The variant type is a generalization of a sum type, similar to the way the record type is a generalization of product. The following summarizes the treatment of variants in the book Types and Programming Languages. A variant type is traditionally written:</p><pre><code>〈l₁:A₁, ..., lᵤ:Aᵤ〉</code></pre><p>The term for introducing a variant is</p><pre><code>〈l=t〉</code></pre><p>and the term for eliminating a variant is</p><pre><code>case L of 〈l₁=x₁〉 ⇒ M₁ | ... | 〈lᵤ=xᵤ〉 ⇒ Mᵤ</code></pre><p>The typing rules for these terms are</p><pre><code>(T-Variant)
Γ ⊢ Mⱼ : Aⱼ
---------------------------------
Γ ⊢ 〈lⱼ=Mⱼ〉 : 〈l₁=A₁, ... , lᵤ=Aᵤ〉


(T-Case)
Γ ⊢ L : 〈l₁=A₁, ... , lᵤ=Aᵤ〉
∀ i ∈ 1..u,   Γ,xᵢ:Aᵢ ⊢ Mᵢ : B
---------------------------------------------------
Γ ⊢ case L of 〈l₁=x₁〉 ⇒ M₁ | ... | 〈lᵤ=xᵤ〉 ⇒ Mᵤ  : B</code></pre><p>The non-algorithmic subtyping rules for variants are</p><pre><code>(S-VariantWidth)
------------------------------------------------------------
〈l₁=A₁, ..., lᵤ=Aᵤ〉   &lt;:   〈l₁=A₁, ..., lᵤ=Aᵤ, ..., lᵤ₊ₓ=Aᵤ₊ₓ〉

(S-VariantDepth)
∀ i ∈ 1..u,    Aᵢ &lt;: Bᵢ
---------------------------------------------
〈l₁=A₁, ..., lᵤ=Aᵤ〉   &lt;:   〈l₁=B₁, ..., lᵤ=Bᵤ〉

(S-VariantPerm)
∀i∈1..u, ∃j∈1..u, kⱼ = lᵢ and Aⱼ = Bᵢ
----------------------------------------------
〈k₁=A₁, ..., kᵤ=Aᵤ〉   &lt;:   〈l₁=B₁, ..., lᵤ=Bᵤ〉</code></pre><p>Come up with an algorithmic subtyping rule for variant types.</p><h4 id="exercise--alternative-stretch">Exercise <code>&lt;:-alternative</code> (stretch)</h4><p>Revise this formalisation of records with subtyping (including proofs of progress and preservation) to use the non-algorithmic subtyping rules for Chapter 15 of Types and Programming Languages, which we list here:</p><pre><code>(S-RcdWidth)
--------------------------------------------------------------
{ l₁:A₁, ..., lᵤ:Aᵤ, ..., lᵤ₊ₓ:Aᵤ₊ₓ } &lt;: { l₁:A₁, ..., lᵤ:Aᵤ }

(S-RcdDepth)
    ∀i∈1..u, Aᵢ &lt;: Bᵢ
----------------------------------------------
{ l₁:A₁, ..., lᵤ:Aᵤ } &lt;: { l₁:B₁, ..., lᵤ:Bᵤ }

(S-RcdPerm)
∀i∈1..u, ∃j∈1..u, kⱼ = lᵢ and Aⱼ = Bᵢ
----------------------------------------------
{ k₁:A₁, ..., kᵤ:Aᵤ } &lt;: { l₁:B₁, ..., lᵤ:Bᵤ }</code></pre><p>You will most likely need to prove inversion lemmas for the subtype relation of the form:</p><pre><code>If S &lt;: T₁ ⇒ T₂, then S ≡ S₁ ⇒ S₂, T₁ &lt;: S₁, and S₂ &lt;: T₂, for some S₁, S₂.

If S &lt;: { lᵢ : Tᵢ | i ∈ 1..n }, then S ≡ { kⱼ : Sⱼ | j ∈ 1..m }
and { lᵢ | i ∈ 1..n } ⊆ { kⱼ | j ∈ 1..m }
and Sⱼ &lt;: Tᵢ for every i and j such that lᵢ = kⱼ.</code></pre><h2 id="references">References</h2><ul><li><p>John C. Reynolds. Using Category Theory to Design Implicit Conversions and Generic Operators. In Semantics-Directed Compiler Generation, 1980. LNCS Volume 94.</p></li><li><p>Luca Cardelli. A semantics of multiple inheritance. In Semantics of Data Types, 1984. Springer.</p></li><li><p>Barbara H. Liskov and Jeannette M. Wing. A Behavioral Notion of Subtyping. In ACM Trans. Program. Lang. Syst. Volume 16, 1994.</p></li><li><p>Types and Programming Languages. Benjamin C. Pierce. The MIT Press. 2002.</p></li></ul></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part2/Subtyping.lagda.md">Source</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works">me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#twitter"></use></svg>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#twitter"></use></svg>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>