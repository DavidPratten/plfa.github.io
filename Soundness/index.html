<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="../assets/css/style.css"><title>Programming Language Foundations in Agda – Soundness</title></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="../">Programming Language Foundations in Agda</a><nav class="site-nav"><span class="menu-icon"><svg viewBox="0 0 18 15" width="18px" height="15px"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path></svg></span><div class="trigger"><a class="page-link" href="../">The Book</a> <a class="page-link" href="../Announcements/">Announcements</a> <a class="page-link" href="../GettingStarted/">Getting Started</a> <a class="page-link" href="../Citing/">Citing</a> <a class="page-link" href="https://agda-zh.github.io/PLFA-zh/">中文</a></div></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><article class="post"><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Soundness.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">Next</a></li><li class="separator">•</li></ul></nav><header class="post-header"><h1 class="post-title">Soundness: Soundness of reduction with respect to denotational semantics</h1></header><div class="post-content"><pre class="Agda"><a id="plfa_plfa-part3-Soundness-129" class="Keyword">module</a> <a id="plfa_plfa-part3-Soundness-136" href="../Soundness/#" class="Module">plfa.part3.Soundness</a> <a id="plfa_plfa-part3-Soundness-157" class="Keyword">where</a>
</pre><h2 id="introduction">Introduction</h2><p>In this chapter we prove that the reduction semantics is sound with respect to the denotational semantics, i.e., for any term L</p><pre><code>L —↠ ƛ N  implies  ℰ L ≃ ℰ (ƛ N)</code></pre><p>The proof is by induction on the reduction sequence, so the main lemma concerns a single reduction step. We prove that if any term <code>M</code> steps to a term <code>N</code>, then <code>M</code> and <code>N</code> are denotationally equal. We shall prove each direction of this if-and-only-if separately. One direction will look just like a type preservation proof. The other direction is like proving type preservation for reduction going in reverse. Recall that type preservation is sometimes called subject reduction. Preservation in reverse is a well-known property and is called <em>subject expansion</em>. It is also well-known that subject expansion is false for most typed lambda calculi!</p><h2 id="imports">Imports</h2><pre class="Agda"><a id="plfa_plfa-part3-Soundness-1025" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1030" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1037" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
  <a id="plfa_plfa-part3-Soundness-1077" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1083" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1084" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="plfa_plfa-part3-Soundness-1087" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1089" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#840" class="Function Operator">_≢_</a><a id="plfa_plfa-part3-Soundness-1092" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1094" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-1098" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1100" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a><a id="plfa_plfa-part3-Soundness-1103" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1105" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a><a id="plfa_plfa-part3-Soundness-1109" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1111" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html#1524" class="Function">cong₂</a><a id="plfa_plfa-part3-Soundness-1116" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1118" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.html#1396" class="Function">cong-app</a><a id="plfa_plfa-part3-Soundness-1126" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1128" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1133" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1140" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html" class="Module">Data.Product</a> <a id="plfa_plfa-part3-Soundness-1153" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1159" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1160" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">_×_</a><a id="plfa_plfa-part3-Soundness-1163" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1165" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#166" class="Record">Σ</a><a id="plfa_plfa-part3-Soundness-1166" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1168" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ-syntax</a><a id="plfa_plfa-part3-Soundness-1176" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1178" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1369" class="Function">∃</a><a id="plfa_plfa-part3-Soundness-1179" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1181" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1788" class="Function">∃-syntax</a><a id="plfa_plfa-part3-Soundness-1189" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1191" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="plfa_plfa-part3-Soundness-1196" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1198" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#264" class="Field">proj₂</a><a id="plfa_plfa-part3-Soundness-1203" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-1207" class="Keyword">renaming</a> <a id="plfa_plfa-part3-Soundness-1216" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1217" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="plfa_plfa-part3-Soundness-1221" class="Symbol">to</a> <a id="plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="plfa_plfa-part3-Soundness-1229" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1231" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1236" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1243" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="plfa_plfa-part3-Soundness-1258" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1264" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1265" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#764" class="Primitive">lzero</a><a id="plfa_plfa-part3-Soundness-1270" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1272" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1277" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1284" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1301" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1307" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1308" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#653" class="Function Operator">¬_</a><a id="plfa_plfa-part3-Soundness-1310" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1312" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1317" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1324" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="plfa_plfa-part3-Soundness-1350" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1356" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1357" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.Negation.html#858" class="Function">contradiction</a><a id="plfa_plfa-part3-Soundness-1370" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1372" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1377" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1384" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html" class="Module">Data.Empty</a> <a id="plfa_plfa-part3-Soundness-1395" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1401" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1402" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a><a id="plfa_plfa-part3-Soundness-1408" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1410" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1415" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1422" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="plfa_plfa-part3-Soundness-1439" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1445" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1446" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a><a id="plfa_plfa-part3-Soundness-1449" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1451" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a><a id="plfa_plfa-part3-Soundness-1454" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1456" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a><a id="plfa_plfa-part3-Soundness-1458" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1460" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1465" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1472" href="https://agda.github.io/agda-stdlib/v1.3/Function.html" class="Module">Function</a> <a id="plfa_plfa-part3-Soundness-1481" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1487" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1488" href="https://agda.github.io/agda-stdlib/v1.3/Function.Base.html#992" class="Function Operator">_∘_</a><a id="plfa_plfa-part3-Soundness-1491" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1493" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1498" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1505" href="../Untyped/#" class="Module">plfa.part2.Untyped</a>
     <a id="plfa_plfa-part3-Soundness-1529" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1535" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1536" href="../Untyped/#plfa_plfa-part2-Untyped-3093" class="Datatype">Context</a><a id="plfa_plfa-part3-Soundness-1543" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1545" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">_,_</a><a id="plfa_plfa-part3-Soundness-1548" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1550" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">_∋_</a><a id="plfa_plfa-part3-Soundness-1553" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1555" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">_⊢_</a><a id="plfa_plfa-part3-Soundness-1558" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1560" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-1561" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1563" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-1564" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1566" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S_</a><a id="plfa_plfa-part3-Soundness-1568" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1570" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`_</a><a id="plfa_plfa-part3-Soundness-1572" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1574" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ_</a><a id="plfa_plfa-part3-Soundness-1576" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1578" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">_·_</a><a id="plfa_plfa-part3-Soundness-1581" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1595" href="../Untyped/#plfa_plfa-part2-Untyped-6943" class="Function">subst</a><a id="plfa_plfa-part3-Soundness-1600" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1602" href="../Untyped/#plfa_plfa-part2-Untyped-7475" class="Function Operator">_[_]</a><a id="plfa_plfa-part3-Soundness-1606" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1608" href="../Untyped/#plfa_plfa-part2-Untyped-7359" class="Function">subst-zero</a><a id="plfa_plfa-part3-Soundness-1618" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1620" href="../Untyped/#plfa_plfa-part2-Untyped-5893" class="Function">ext</a><a id="plfa_plfa-part3-Soundness-1623" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1625" href="../Untyped/#plfa_plfa-part2-Untyped-6207" class="Function">rename</a><a id="plfa_plfa-part3-Soundness-1631" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1633" href="../Untyped/#plfa_plfa-part2-Untyped-6647" class="Function">exts</a><a id="plfa_plfa-part3-Soundness-1637" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1651" href="../Untyped/#plfa_plfa-part2-Untyped-9956" class="Datatype Operator">_—→_</a><a id="plfa_plfa-part3-Soundness-1655" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1657" href="../Untyped/#plfa_plfa-part2-Untyped-10006" class="InductiveConstructor">ξ₁</a><a id="plfa_plfa-part3-Soundness-1659" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1661" href="../Untyped/#plfa_plfa-part2-Untyped-10096" class="InductiveConstructor">ξ₂</a><a id="plfa_plfa-part3-Soundness-1663" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1665" href="../Untyped/#plfa_plfa-part2-Untyped-10186" class="InductiveConstructor">β</a><a id="plfa_plfa-part3-Soundness-1666" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1668" href="../Untyped/#plfa_plfa-part2-Untyped-10294" class="InductiveConstructor">ζ</a><a id="plfa_plfa-part3-Soundness-1669" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1671" href="../Untyped/#plfa_plfa-part2-Untyped-11088" class="Datatype Operator">_—↠_</a><a id="plfa_plfa-part3-Soundness-1675" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1677" href="../Untyped/#plfa_plfa-part2-Untyped-11194" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="plfa_plfa-part3-Soundness-1684" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1686" href="../Untyped/#plfa_plfa-part2-Untyped-11138" class="InductiveConstructor Operator">_∎</a><a id="plfa_plfa-part3-Soundness-1688" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1690" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1695" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1702" href="../Substitution/#" class="Module">plfa.part2.Substitution</a> <a id="plfa_plfa-part3-Soundness-1726" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1732" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1733" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a><a id="plfa_plfa-part3-Soundness-1739" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1741" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a><a id="plfa_plfa-part3-Soundness-1746" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1748" href="../Substitution/#plfa_plfa-part2-Substitution-2996" class="Function">ids</a><a id="plfa_plfa-part3-Soundness-1751" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-1753" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-1758" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-1765" href="../Denotational/#" class="Module">plfa.part3.Denotational</a>
     <a id="plfa_plfa-part3-Soundness-1794" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-1800" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-1801" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a><a id="plfa_plfa-part3-Soundness-1806" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1808" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a><a id="plfa_plfa-part3-Soundness-1809" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1811" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a><a id="plfa_plfa-part3-Soundness-1814" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1816" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">_⊢_↓_</a><a id="plfa_plfa-part3-Soundness-1821" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1823" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">_`,_</a><a id="plfa_plfa-part3-Soundness-1827" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1829" href="../Denotational/#plfa_plfa-part3-Denotational-4335" class="Datatype Operator">_⊑_</a><a id="plfa_plfa-part3-Soundness-1832" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1834" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">_`⊑_</a><a id="plfa_plfa-part3-Soundness-1838" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1840" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a><a id="plfa_plfa-part3-Soundness-1842" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1844" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">_`⊔_</a><a id="plfa_plfa-part3-Soundness-1848" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1850" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a><a id="plfa_plfa-part3-Soundness-1854" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1856" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a><a id="plfa_plfa-part3-Soundness-1860" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1862" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a><a id="plfa_plfa-part3-Soundness-1871" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1885" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-1891" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1893" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a><a id="plfa_plfa-part3-Soundness-1900" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1902" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a><a id="plfa_plfa-part3-Soundness-1909" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1911" href="../Denotational/#plfa_plfa-part3-Denotational-25659" class="Function">⊑-env</a><a id="plfa_plfa-part3-Soundness-1916" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1918" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a><a id="plfa_plfa-part3-Soundness-1931" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1933" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a><a id="plfa_plfa-part3-Soundness-1946" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1948" href="../Denotational/#plfa_plfa-part3-Denotational-26108" class="Function">up-env</a><a id="plfa_plfa-part3-Soundness-1954" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-1968" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-1971" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1973" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a><a id="plfa_plfa-part3-Soundness-1979" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1981" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a><a id="plfa_plfa-part3-Soundness-1988" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1990" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a><a id="plfa_plfa-part3-Soundness-1997" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-1999" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a><a id="plfa_plfa-part3-Soundness-2006" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2008" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a><a id="plfa_plfa-part3-Soundness-2011" class="Symbol">;</a>
            <a id="plfa_plfa-part3-Soundness-2025" href="../Denotational/#plfa_plfa-part3-Denotational-24086" class="Function">rename-pres</a><a id="plfa_plfa-part3-Soundness-2036" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2038" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a><a id="plfa_plfa-part3-Soundness-2039" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2041" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">_≃_</a><a id="plfa_plfa-part3-Soundness-2044" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2046" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a><a id="plfa_plfa-part3-Soundness-2053" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-2055" class="Keyword">open</a> <a id="plfa_plfa-part3-Soundness-2060" class="Keyword">import</a> <a id="plfa_plfa-part3-Soundness-2067" href="../Compositional/#" class="Module">plfa.part3.Compositional</a> <a id="plfa_plfa-part3-Soundness-2092" class="Keyword">using</a> <a id="plfa_plfa-part3-Soundness-2098" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-2099" href="../Compositional/#plfa_plfa-part3-Compositional-3796" class="Function">lambda-inversion</a><a id="plfa_plfa-part3-Soundness-2115" class="Symbol">;</a> <a id="plfa_plfa-part3-Soundness-2117" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a><a id="plfa_plfa-part3-Soundness-2124" class="Symbol">)</a>
</pre><h2 id="forward-reduction-preserves-denotations">Forward reduction preserves denotations</h2><p>The proof of preservation in this section mixes techniques from previous chapters. Like the proof of preservation for the STLC, we are preserving a relation defined separately from the syntax, in contrast to the intrinsically-typed terms. On the other hand, we are using de Bruijn indices for variables.</p><p>The outline of the proof remains the same in that we must prove lemmas concerning all of the auxiliary functions used in the reduction relation: substitution, renaming, and extension.</p><h3 id="simultaneous-substitution-preserves-denotations">Simultaneous substitution preserves denotations</h3><p>Our next goal is to prove that simultaneous substitution preserves meaning. That is, if <code>M</code> results in <code>v</code> in environment <code>γ</code>, then applying a substitution <code>σ</code> to <code>M</code> gives us a program that also results in <code>v</code>, but in an environment <code>δ</code> in which, for every variable <code>x</code>, <code>σ x</code> results in the same value as the one for <code>x</code> in the original environment <code>γ</code>. We write <code>δ ⊢ σ ↓ γ</code> for this condition.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-3126" class="Keyword">infix</a> <a id="plfa_plfa-part3-Soundness-3132" class="Number">3</a> <a id="plfa_plfa-part3-Soundness-3134" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">_`⊢_↓_</a>
<a id="plfa_plfa-part3-Soundness-_`⊢_↓_"></a><a id="plfa_plfa-part3-Soundness-3141" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3148" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3150" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-3152" href="../Soundness/#plfa_plfa-part3-Soundness-3152" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3154" href="../Soundness/#plfa_plfa-part3-Soundness-3154" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3155" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3157" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3159" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3163" href="../Soundness/#plfa_plfa-part3-Soundness-3152" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3165" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3167" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3173" href="../Soundness/#plfa_plfa-part3-Soundness-3154" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3175" href="../Soundness/#plfa_plfa-part3-Soundness-3152" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3177" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3179" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3183" href="../Soundness/#plfa_plfa-part3-Soundness-3154" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3185" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3187" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="plfa_plfa-part3-Soundness-3191" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">_`⊢_↓_</a> <a id="plfa_plfa-part3-Soundness-3198" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3199" href="../Soundness/#plfa_plfa-part3-Soundness-3199" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3200" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-3202" href="../Soundness/#plfa_plfa-part3-Soundness-3202" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3203" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3205" href="../Soundness/#plfa_plfa-part3-Soundness-3205" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3207" href="../Soundness/#plfa_plfa-part3-Soundness-3207" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3209" href="../Soundness/#plfa_plfa-part3-Soundness-3209" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3211" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3213" class="Symbol">(∀</a> <a id="plfa_plfa-part3-Soundness-3216" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3217" href="../Soundness/#plfa_plfa-part3-Soundness-3217" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3219" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3221" href="../Soundness/#plfa_plfa-part3-Soundness-3202" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3223" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-3225" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-3226" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3228" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3230" href="../Soundness/#plfa_plfa-part3-Soundness-3205" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3232" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-3234" href="../Soundness/#plfa_plfa-part3-Soundness-3207" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3236" href="../Soundness/#plfa_plfa-part3-Soundness-3217" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-3238" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3240" href="../Soundness/#plfa_plfa-part3-Soundness-3209" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3242" href="../Soundness/#plfa_plfa-part3-Soundness-3217" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-3243" class="Symbol">)</a>
</pre><p>As usual, to prepare for lambda abstraction, we prove an extension lemma. It says that applying the <code>exts</code> function to a substitution produces a new substitution that maps variables to terms that when evaluated in <code>δ , v</code> produce the values in <code>γ , v</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-ext"></a><a id="plfa_plfa-part3-Soundness-3512" href="../Soundness/#plfa_plfa-part3-Soundness-3512" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3522" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3524" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-3526" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3527" href="../Soundness/#plfa_plfa-part3-Soundness-3527" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3529" href="../Soundness/#plfa_plfa-part3-Soundness-3529" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-3531" href="../Soundness/#plfa_plfa-part3-Soundness-3531" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-3532" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3534" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3535" href="../Soundness/#plfa_plfa-part3-Soundness-3535" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3537" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3539" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3543" href="../Soundness/#plfa_plfa-part3-Soundness-3527" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-3544" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-3546" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-3547" href="../Soundness/#plfa_plfa-part3-Soundness-3547" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3549" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3551" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-3555" href="../Soundness/#plfa_plfa-part3-Soundness-3529" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3556" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-3560" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3562" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3563" href="../Soundness/#plfa_plfa-part3-Soundness-3563" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3565" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-3567" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-3573" href="../Soundness/#plfa_plfa-part3-Soundness-3527" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-3575" href="../Soundness/#plfa_plfa-part3-Soundness-3529" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-3576" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-3580" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3582" href="../Soundness/#plfa_plfa-part3-Soundness-3547" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3584" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3587" href="../Soundness/#plfa_plfa-part3-Soundness-3563" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3589" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3591" href="../Soundness/#plfa_plfa-part3-Soundness-3535" class="Bound">γ</a>
   <a id="plfa_plfa-part3-Soundness-3596" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-3625" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3627" href="../Soundness/#plfa_plfa-part3-Soundness-3547" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-3629" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3632" href="../Soundness/#plfa_plfa-part3-Soundness-3531" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-3634" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-3637" href="../Untyped/#plfa_plfa-part2-Untyped-6647" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-3642" href="../Soundness/#plfa_plfa-part3-Soundness-3563" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3644" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-3646" href="../Soundness/#plfa_plfa-part3-Soundness-3535" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-3648" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-3651" href="../Soundness/#plfa_plfa-part3-Soundness-3531" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-3653" href="../Soundness/#plfa_plfa-part3-Soundness-3512" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3663" href="../Soundness/#plfa_plfa-part3-Soundness-3663" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3665" href="../Soundness/#plfa_plfa-part3-Soundness-3665" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3667" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-3669" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3671" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>
<a id="plfa_plfa-part3-Soundness-3675" href="../Soundness/#plfa_plfa-part3-Soundness-3512" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-3685" href="../Soundness/#plfa_plfa-part3-Soundness-3685" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-3687" href="../Soundness/#plfa_plfa-part3-Soundness-3687" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3689" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3690" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-3692" href="../Soundness/#plfa_plfa-part3-Soundness-3692" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3694" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3696" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-3698" href="../Denotational/#plfa_plfa-part3-Denotational-24086" class="Function">rename-pres</a> <a id="plfa_plfa-part3-Soundness-3710" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-3713" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-3716" href="../Soundness/#plfa_plfa-part3-Soundness-3716" class="Bound">_</a> <a id="plfa_plfa-part3-Soundness-3718" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-3720" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a><a id="plfa_plfa-part3-Soundness-3726" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-3728" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-3729" href="../Soundness/#plfa_plfa-part3-Soundness-3687" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-3731" href="../Soundness/#plfa_plfa-part3-Soundness-3692" class="Bound">x′</a><a id="plfa_plfa-part3-Soundness-3733" class="Symbol">)</a>
</pre><p>The proof is by cases on the de Bruijn index <code>x</code>.</p><ul><li><p>If it is <code>Z</code>, then we need to show that <code>δ , v ⊢ # 0 ↓ v</code>, which we have by rule <code>var</code>.</p></li><li><p>If it is <code>S x′</code>,then we need to show that <code>δ , v ⊢ rename S_ (σ x′) ↓ γ x′</code>, which we obtain by the <code>rename-pres</code> lemma.</p></li></ul><p>With the extension lemma in hand, the proof that simultaneous substitution preserves meaning is straightforward. Let’s dive in!</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-pres"></a><a id="plfa_plfa-part3-Soundness-4150" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4161" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4163" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-4165" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4166" href="../Soundness/#plfa_plfa-part3-Soundness-4166" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4168" href="../Soundness/#plfa_plfa-part3-Soundness-4168" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-4170" href="../Soundness/#plfa_plfa-part3-Soundness-4170" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-4171" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4173" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4174" href="../Soundness/#plfa_plfa-part3-Soundness-4174" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4176" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4178" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4182" href="../Soundness/#plfa_plfa-part3-Soundness-4166" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-4183" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4185" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4186" href="../Soundness/#plfa_plfa-part3-Soundness-4186" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4188" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4190" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-4194" href="../Soundness/#plfa_plfa-part3-Soundness-4168" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4195" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4197" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4198" href="../Soundness/#plfa_plfa-part3-Soundness-4198" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4200" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4202" href="../Soundness/#plfa_plfa-part3-Soundness-4166" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4204" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4206" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-4207" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-4211" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4213" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4214" href="../Soundness/#plfa_plfa-part3-Soundness-4214" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4216" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-4218" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-4224" href="../Soundness/#plfa_plfa-part3-Soundness-4166" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-4226" href="../Soundness/#plfa_plfa-part3-Soundness-4168" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-4227" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-4231" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4233" href="../Soundness/#plfa_plfa-part3-Soundness-4186" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4235" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-4238" href="../Soundness/#plfa_plfa-part3-Soundness-4214" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4240" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4242" href="../Soundness/#plfa_plfa-part3-Soundness-4174" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-4246" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4248" href="../Soundness/#plfa_plfa-part3-Soundness-4174" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-4250" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4252" href="../Soundness/#plfa_plfa-part3-Soundness-4198" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4254" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4256" href="../Soundness/#plfa_plfa-part3-Soundness-4170" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-4262" class="Comment">------------------</a>
  <a id="plfa_plfa-part3-Soundness-4283" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4285" href="../Soundness/#plfa_plfa-part3-Soundness-4186" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-4287" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-4289" href="../Untyped/#plfa_plfa-part2-Untyped-6943" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-4295" href="../Soundness/#plfa_plfa-part3-Soundness-4214" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4297" href="../Soundness/#plfa_plfa-part3-Soundness-4198" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-4299" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-4301" href="../Soundness/#plfa_plfa-part3-Soundness-4170" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-4303" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4314" href="../Soundness/#plfa_plfa-part3-Soundness-4314" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4316" href="../Soundness/#plfa_plfa-part3-Soundness-4316" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4318" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4319" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-4323" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4324" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-4326" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4328" href="../Soundness/#plfa_plfa-part3-Soundness-4328" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4329" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-4332" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4334" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4335" href="../Soundness/#plfa_plfa-part3-Soundness-4316" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4337" href="../Soundness/#plfa_plfa-part3-Soundness-4328" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-4338" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4340" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4351" href="../Soundness/#plfa_plfa-part3-Soundness-4351" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4353" href="../Soundness/#plfa_plfa-part3-Soundness-4353" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4355" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4356" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4363" href="../Soundness/#plfa_plfa-part3-Soundness-4363" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4366" href="../Soundness/#plfa_plfa-part3-Soundness-4366" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4368" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4370" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4374" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-4381" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4382" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4393" href="../Soundness/#plfa_plfa-part3-Soundness-4351" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4395" href="../Soundness/#plfa_plfa-part3-Soundness-4353" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4397" href="../Soundness/#plfa_plfa-part3-Soundness-4363" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4399" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4401" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4402" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4413" href="../Soundness/#plfa_plfa-part3-Soundness-4351" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4415" href="../Soundness/#plfa_plfa-part3-Soundness-4353" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4417" href="../Soundness/#plfa_plfa-part3-Soundness-4366" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4419" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4421" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4432" href="../Soundness/#plfa_plfa-part3-Soundness-4432" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4434" href="../Soundness/#plfa_plfa-part3-Soundness-4434" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4436" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4437" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4445" href="../Soundness/#plfa_plfa-part3-Soundness-4445" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4446" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4448" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4452" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-4460" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4461" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4472" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-4475" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-4476" href="../Soundness/#plfa_plfa-part3-Soundness-4476" class="Bound">A</a><a id="plfa_plfa-part3-Soundness-4477" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-4479" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-4481" href="../Untyped/#plfa_plfa-part2-Untyped-6647" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-4486" href="../Soundness/#plfa_plfa-part3-Soundness-4432" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-4487" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4489" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4490" href="../Soundness/#plfa_plfa-part3-Soundness-3512" class="Function">subst-ext</a> <a id="plfa_plfa-part3-Soundness-4500" href="../Soundness/#plfa_plfa-part3-Soundness-4432" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4502" href="../Soundness/#plfa_plfa-part3-Soundness-4434" class="Bound">s</a><a id="plfa_plfa-part3-Soundness-4503" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4505" href="../Soundness/#plfa_plfa-part3-Soundness-4445" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4506" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4508" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4519" href="../Soundness/#plfa_plfa-part3-Soundness-4519" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4521" href="../Soundness/#plfa_plfa-part3-Soundness-4521" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4523" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-4531" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4533" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-4541" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4552" href="../Soundness/#plfa_plfa-part3-Soundness-4552" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4554" href="../Soundness/#plfa_plfa-part3-Soundness-4554" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4556" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4557" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4565" href="../Soundness/#plfa_plfa-part3-Soundness-4565" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-4568" href="../Soundness/#plfa_plfa-part3-Soundness-4568" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4570" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4572" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-4576" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-4584" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4585" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4596" href="../Soundness/#plfa_plfa-part3-Soundness-4552" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4598" href="../Soundness/#plfa_plfa-part3-Soundness-4554" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4600" href="../Soundness/#plfa_plfa-part3-Soundness-4565" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-4602" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4604" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4605" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4616" href="../Soundness/#plfa_plfa-part3-Soundness-4552" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4618" href="../Soundness/#plfa_plfa-part3-Soundness-4554" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4620" href="../Soundness/#plfa_plfa-part3-Soundness-4568" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-4622" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-4624" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4635" href="../Soundness/#plfa_plfa-part3-Soundness-4635" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4637" href="../Soundness/#plfa_plfa-part3-Soundness-4637" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4639" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4640" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4644" href="../Soundness/#plfa_plfa-part3-Soundness-4644" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-4646" href="../Soundness/#plfa_plfa-part3-Soundness-4646" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-4648" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4650" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-4652" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-4656" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-4657" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-4668" href="../Soundness/#plfa_plfa-part3-Soundness-4635" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-4670" href="../Soundness/#plfa_plfa-part3-Soundness-4637" class="Bound">s</a> <a id="plfa_plfa-part3-Soundness-4672" href="../Soundness/#plfa_plfa-part3-Soundness-4644" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-4673" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-4675" href="../Soundness/#plfa_plfa-part3-Soundness-4646" class="Bound">lt</a>
</pre><p>The proof is by induction on the semantics of <code>M</code>. The two interesting cases are for variables and lambda abstractions.</p><ul><li><p>For a variable <code>x</code>, we have that <code>v ⊑ γ x</code> and we need to show that <code>δ ⊢ σ x ↓ v</code>. From the premise applied to <code>x</code>, we have that <code>δ ⊢ σ x ↓ γ x</code>, so we conclude by the <code>sub</code> rule.</p></li><li><p>For a lambda abstraction, we must extend the substitution for the induction hypothesis. We apply the <code>subst-ext</code> lemma to show that the extended substitution maps variables to terms that result in the appropriate values.</p></li></ul><h3 id="single-substitution-preserves-denotations">Single substitution preserves denotations</h3><p>For β reduction, <code>(ƛ N) · M —→ N [ M ]</code>, we need to show that the semantics is preserved when substituting <code>M</code> for de Bruijn index 0 in term <code>N</code>. By inversion on the rules <code>↦-elim</code> and <code>↦-intro</code>, we have that <code>γ , v ⊢ M ↓ w</code> and <code>γ ⊢ N ↓ v</code>. So we need to show that <code>γ ⊢ M [ N ] ↓ w</code>, or equivalently, that <code>γ ⊢ subst (subst-zero N) M ↓ w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution"></a><a id="plfa_plfa-part3-Soundness-5621" href="../Soundness/#plfa_plfa-part3-Soundness-5621" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-5634" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5636" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-5638" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5639" href="../Soundness/#plfa_plfa-part3-Soundness-5639" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5640" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5642" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5643" href="../Soundness/#plfa_plfa-part3-Soundness-5643" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5645" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5647" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-5651" href="../Soundness/#plfa_plfa-part3-Soundness-5639" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5652" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5654" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5655" href="../Soundness/#plfa_plfa-part3-Soundness-5655" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5657" href="../Soundness/#plfa_plfa-part3-Soundness-5657" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5659" href="../Soundness/#plfa_plfa-part3-Soundness-5659" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5661" href="../Soundness/#plfa_plfa-part3-Soundness-5661" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5662" class="Symbol">}</a>
   <a id="plfa_plfa-part3-Soundness-5667" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5669" href="../Soundness/#plfa_plfa-part3-Soundness-5643" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5671" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5674" href="../Soundness/#plfa_plfa-part3-Soundness-5659" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-5676" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5678" href="../Soundness/#plfa_plfa-part3-Soundness-5655" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5680" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5682" href="../Soundness/#plfa_plfa-part3-Soundness-5661" class="Bound">w</a>
   <a id="plfa_plfa-part3-Soundness-5687" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5689" href="../Soundness/#plfa_plfa-part3-Soundness-5643" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5691" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5693" href="../Soundness/#plfa_plfa-part3-Soundness-5657" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5695" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5697" href="../Soundness/#plfa_plfa-part3-Soundness-5659" class="Bound">v</a>
     <a id="plfa_plfa-part3-Soundness-5704" class="Comment">---------------</a>
   <a id="plfa_plfa-part3-Soundness-5723" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-5725" href="../Soundness/#plfa_plfa-part3-Soundness-5643" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5727" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-5729" href="../Soundness/#plfa_plfa-part3-Soundness-5655" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-5731" href="../Untyped/#plfa_plfa-part2-Untyped-7475" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-5733" href="../Soundness/#plfa_plfa-part3-Soundness-5657" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5735" href="../Untyped/#plfa_plfa-part2-Untyped-7475" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-5737" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5739" href="../Soundness/#plfa_plfa-part3-Soundness-5661" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-5741" href="../Soundness/#plfa_plfa-part3-Soundness-5621" class="Function">substitution</a><a id="plfa_plfa-part3-Soundness-5753" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-5754" href="../Soundness/#plfa_plfa-part3-Soundness-5754" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-5755" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5757" href="../Soundness/#plfa_plfa-part3-Soundness-5757" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-5758" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5760" href="../Soundness/#plfa_plfa-part3-Soundness-5760" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-5761" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5763" href="../Soundness/#plfa_plfa-part3-Soundness-5763" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5764" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5766" href="../Soundness/#plfa_plfa-part3-Soundness-5766" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5767" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-5769" href="../Soundness/#plfa_plfa-part3-Soundness-5769" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-5770" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-5772" href="../Soundness/#plfa_plfa-part3-Soundness-5772" class="Bound">dn</a> <a id="plfa_plfa-part3-Soundness-5775" href="../Soundness/#plfa_plfa-part3-Soundness-5775" class="Bound">dm</a> <a id="plfa_plfa-part3-Soundness-5778" class="Symbol">=</a>
  <a id="plfa_plfa-part3-Soundness-5782" href="../Soundness/#plfa_plfa-part3-Soundness-4150" class="Function">subst-pres</a> <a id="plfa_plfa-part3-Soundness-5793" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5794" href="../Untyped/#plfa_plfa-part2-Untyped-7359" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5805" href="../Soundness/#plfa_plfa-part3-Soundness-5763" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-5806" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5808" href="../Soundness/#plfa_plfa-part3-Soundness-5830" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5817" href="../Soundness/#plfa_plfa-part3-Soundness-5772" class="Bound">dn</a>
  <a id="plfa_plfa-part3-Soundness-5822" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-5830" href="../Soundness/#plfa_plfa-part3-Soundness-5830" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5839" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-5841" href="../Soundness/#plfa_plfa-part3-Soundness-5757" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5843" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-5846" href="../Untyped/#plfa_plfa-part2-Untyped-7359" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-5857" href="../Soundness/#plfa_plfa-part3-Soundness-5763" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-5859" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-5861" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5862" href="../Soundness/#plfa_plfa-part3-Soundness-5757" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-5864" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-5867" href="../Soundness/#plfa_plfa-part3-Soundness-5766" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-5868" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-5872" href="../Soundness/#plfa_plfa-part3-Soundness-5830" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5881" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-5883" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5885" href="../Soundness/#plfa_plfa-part3-Soundness-5775" class="Bound">dm</a>
  <a id="plfa_plfa-part3-Soundness-5890" href="../Soundness/#plfa_plfa-part3-Soundness-5830" class="Function">sub-z-ok</a> <a id="plfa_plfa-part3-Soundness-5899" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-5900" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-5902" href="../Soundness/#plfa_plfa-part3-Soundness-5902" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-5903" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-5905" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-5907" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a>
</pre><p>This result is a corollary of the lemma for simultaneous substitution. To use the lemma, we just need to show that <code>subst-zero M</code> maps variables to terms that produces the same values as those in <code>γ , v</code>. Let <code>y</code> be an arbitrary variable (de Bruijn index).</p><ul><li><p>If it is <code>Z</code>, then <code>(subst-zero M) y = M</code> and <code>(γ , v) y = v</code>. By the premise we conclude that <code>γ ⊢ M ↓ v</code>.</p></li><li><p>If it is <code>S x</code>, then <code>(subst-zero M) (S x) = x</code> and <code>(γ , v) (S x) = γ x</code>. So we conclude that <code>γ ⊢ x ↓ γ x</code> by rule <code>var</code>.</p></li></ul><h3 id="reduction-preserves-denotations">Reduction preserves denotations</h3><p>With the substitution lemma in hand, it is straightforward to prove that reduction preserves denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-preserve"></a><a id="plfa_plfa-part3-Soundness-6572" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6581" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6583" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-6585" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6586" href="../Soundness/#plfa_plfa-part3-Soundness-6586" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6587" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6589" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6590" href="../Soundness/#plfa_plfa-part3-Soundness-6590" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6592" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-6594" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-6598" href="../Soundness/#plfa_plfa-part3-Soundness-6586" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-6599" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-6601" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-6602" href="../Soundness/#plfa_plfa-part3-Soundness-6602" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6604" href="../Soundness/#plfa_plfa-part3-Soundness-6604" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6606" href="../Soundness/#plfa_plfa-part3-Soundness-6606" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-6607" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-6611" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6613" href="../Soundness/#plfa_plfa-part3-Soundness-6590" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6615" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6617" href="../Soundness/#plfa_plfa-part3-Soundness-6602" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6619" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6621" href="../Soundness/#plfa_plfa-part3-Soundness-6606" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-6625" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6627" href="../Soundness/#plfa_plfa-part3-Soundness-6602" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-6629" href="../Untyped/#plfa_plfa-part2-Untyped-9956" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-6632" href="../Soundness/#plfa_plfa-part3-Soundness-6604" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-6638" class="Comment">----------</a>
  <a id="plfa_plfa-part3-Soundness-6651" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-6653" href="../Soundness/#plfa_plfa-part3-Soundness-6590" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-6655" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-6657" href="../Soundness/#plfa_plfa-part3-Soundness-6604" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-6659" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-6661" href="../Soundness/#plfa_plfa-part3-Soundness-6606" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-6663" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6672" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6673" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-6676" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6678" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-6681" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6690" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6691" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6698" href="../Soundness/#plfa_plfa-part3-Soundness-6698" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6701" href="../Soundness/#plfa_plfa-part3-Soundness-6701" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6703" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6705" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6706" href="../Untyped/#plfa_plfa-part2-Untyped-10006" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-6709" href="../Soundness/#plfa_plfa-part3-Soundness-6709" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6710" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6712" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6714" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6721" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6722" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6731" href="../Soundness/#plfa_plfa-part3-Soundness-6698" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6734" href="../Soundness/#plfa_plfa-part3-Soundness-6709" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6735" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6737" href="../Soundness/#plfa_plfa-part3-Soundness-6701" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6740" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6749" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6750" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6757" href="../Soundness/#plfa_plfa-part3-Soundness-6757" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6760" href="../Soundness/#plfa_plfa-part3-Soundness-6760" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6762" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6764" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6765" href="../Untyped/#plfa_plfa-part2-Untyped-10096" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-6768" href="../Soundness/#plfa_plfa-part3-Soundness-6768" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6769" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6771" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6773" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6780" href="../Soundness/#plfa_plfa-part3-Soundness-6757" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6783" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6784" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6793" href="../Soundness/#plfa_plfa-part3-Soundness-6760" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-6796" href="../Soundness/#plfa_plfa-part3-Soundness-6768" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6797" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6799" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6808" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6809" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-6816" href="../Soundness/#plfa_plfa-part3-Soundness-6816" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-6819" href="../Soundness/#plfa_plfa-part3-Soundness-6819" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-6821" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6823" href="../Untyped/#plfa_plfa-part2-Untyped-10186" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-6825" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6827" href="../Soundness/#plfa_plfa-part3-Soundness-5621" class="Function">substitution</a> <a id="plfa_plfa-part3-Soundness-6840" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6841" href="../Compositional/#plfa_plfa-part3-Compositional-3796" class="Function">lambda-inversion</a> <a id="plfa_plfa-part3-Soundness-6858" href="../Soundness/#plfa_plfa-part3-Soundness-6816" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6860" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6862" href="../Soundness/#plfa_plfa-part3-Soundness-6819" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-6865" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6874" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6875" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6883" href="../Soundness/#plfa_plfa-part3-Soundness-6883" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-6884" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6886" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6887" href="../Untyped/#plfa_plfa-part2-Untyped-10294" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-6889" href="../Soundness/#plfa_plfa-part3-Soundness-6889" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6890" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6892" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6894" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-6902" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6903" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6912" href="../Soundness/#plfa_plfa-part3-Soundness-6883" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6914" href="../Soundness/#plfa_plfa-part3-Soundness-6889" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6915" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-6917" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6926" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-6934" href="../Soundness/#plfa_plfa-part3-Soundness-6934" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6936" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6938" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-6946" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6955" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6956" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6964" href="../Soundness/#plfa_plfa-part3-Soundness-6964" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6966" href="../Soundness/#plfa_plfa-part3-Soundness-6966" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-6968" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6970" href="../Soundness/#plfa_plfa-part3-Soundness-6970" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-6972" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-6974" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-6982" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6983" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-6992" href="../Soundness/#plfa_plfa-part3-Soundness-6964" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-6994" href="../Soundness/#plfa_plfa-part3-Soundness-6970" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-6995" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-6997" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-6998" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-7007" href="../Soundness/#plfa_plfa-part3-Soundness-6966" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-7010" href="../Soundness/#plfa_plfa-part3-Soundness-6970" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-7011" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-7013" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-7022" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7023" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-7027" href="../Soundness/#plfa_plfa-part3-Soundness-7027" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-7029" href="../Soundness/#plfa_plfa-part3-Soundness-7029" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-7031" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7033" href="../Soundness/#plfa_plfa-part3-Soundness-7033" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-7035" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-7037" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-7041" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-7042" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-7051" href="../Soundness/#plfa_plfa-part3-Soundness-7027" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-7053" href="../Soundness/#plfa_plfa-part3-Soundness-7033" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-7054" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-7056" href="../Soundness/#plfa_plfa-part3-Soundness-7029" class="Bound">lt</a>
</pre><p>We proceed by induction on the semantics of <code>M</code> with case analysis on the reduction.</p><ul><li><p>If <code>M</code> is a variable, then there is no such reduction.</p></li><li><p>If <code>M</code> is an application, then the reduction is either a congruence (ξ₁ or ξ₂) or β. For each congruence, we use the induction hypothesis. For β reduction we use the substitution lemma and the <code>sub</code> rule.</p></li><li><p>The rest of the cases are straightforward.</p></li></ul><h2 id="reduction-reflects-denotations">Reduction reflects denotations</h2><p>This section proves that reduction reflects the denotation of a term. That is, if <code>N</code> results in <code>v</code>, and if <code>M</code> reduces to <code>N</code>, then <code>M</code> also results in <code>v</code>. While there are some broad similarities between this proof and the above proof of semantic preservation, we shall require a few more technical lemmas to obtain this result.</p><p>The main challenge is dealing with the substitution in β reduction:</p><pre><code>(ƛ N) · M —→ N [ M ]</code></pre><p>We have that <code>γ ⊢ N [ M ] ↓ v</code> and need to show that <code>γ ⊢ (ƛ N) · M ↓ v</code>. Now consider the derivation of <code>γ ⊢ N [ M ] ↓ v</code>. The term <code>M</code> may occur 0, 1, or many times inside <code>N [ M ]</code>. At each of those occurrences, <code>M</code> may result in a different value. But to build a derivation for <code>(ƛ N) · M</code>, we need a single value for <code>M</code>. If <code>M</code> occurred more than 1 time, then we can join all of the different values using <code>⊔</code>. If <code>M</code> occurred 0 times, then we do not need any information about <code>M</code> and can therefore use <code>⊥</code> for the value of <code>M</code>.</p><h3 id="renaming-reflects-meaning">Renaming reflects meaning</h3><p>Previously we showed that renaming variables preserves meaning. Now we prove the opposite, that it reflects meaning. That is, if <code>δ ⊢ rename ρ M ↓ v</code>, then <code>γ ⊢ M ↓ v</code>, where <code>(δ ∘ ρ)</code>⊑ γ`.</p>First, we need a variant of a lemma given earlier.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-ext-⊑′"></a><a id="plfa_plfa-part3-Soundness-8753" href="../Soundness/#plfa_plfa-part3-Soundness-8753" class="Function">ext-⊑′</a> <a id="plfa_plfa-part3-Soundness-8760" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8762" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-8764" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8765" href="../Soundness/#plfa_plfa-part3-Soundness-8765" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8767" href="../Soundness/#plfa_plfa-part3-Soundness-8767" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-8769" href="../Soundness/#plfa_plfa-part3-Soundness-8769" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8770" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8772" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8773" href="../Soundness/#plfa_plfa-part3-Soundness-8773" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8775" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8777" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8781" href="../Soundness/#plfa_plfa-part3-Soundness-8765" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-8782" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-8784" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-8785" href="../Soundness/#plfa_plfa-part3-Soundness-8785" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8787" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8789" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-8793" href="../Soundness/#plfa_plfa-part3-Soundness-8767" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8794" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-8798" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8800" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8801" href="../Soundness/#plfa_plfa-part3-Soundness-8801" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8803" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-8805" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-8812" href="../Soundness/#plfa_plfa-part3-Soundness-8765" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-8814" href="../Soundness/#plfa_plfa-part3-Soundness-8767" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-8815" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-8819" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8821" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8822" href="../Soundness/#plfa_plfa-part3-Soundness-8785" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8824" href="https://agda.github.io/agda-stdlib/v1.3/Function.Base.html#992" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8826" href="../Soundness/#plfa_plfa-part3-Soundness-8801" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8827" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8829" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8832" href="../Soundness/#plfa_plfa-part3-Soundness-8773" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-8838" class="Comment">------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-8871" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-8873" class="Symbol">((</a><a id="plfa_plfa-part3-Soundness-8875" href="../Soundness/#plfa_plfa-part3-Soundness-8785" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-8877" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8880" href="../Soundness/#plfa_plfa-part3-Soundness-8769" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8881" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8883" href="https://agda.github.io/agda-stdlib/v1.3/Function.Base.html#992" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-8885" href="../Untyped/#plfa_plfa-part2-Untyped-5893" class="Function">ext</a> <a id="plfa_plfa-part3-Soundness-8889" href="../Soundness/#plfa_plfa-part3-Soundness-8801" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-8890" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8892" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-8895" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8896" href="../Soundness/#plfa_plfa-part3-Soundness-8773" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-8898" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-8901" href="../Soundness/#plfa_plfa-part3-Soundness-8769" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-8902" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-8904" href="../Soundness/#plfa_plfa-part3-Soundness-8753" class="Function">ext-⊑′</a> <a id="plfa_plfa-part3-Soundness-8911" href="../Soundness/#plfa_plfa-part3-Soundness-8911" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8913" href="../Soundness/#plfa_plfa-part3-Soundness-8913" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8916" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-8918" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8920" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
<a id="plfa_plfa-part3-Soundness-8927" href="../Soundness/#plfa_plfa-part3-Soundness-8753" class="Function">ext-⊑′</a> <a id="plfa_plfa-part3-Soundness-8934" href="../Soundness/#plfa_plfa-part3-Soundness-8934" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-8936" href="../Soundness/#plfa_plfa-part3-Soundness-8936" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8939" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-8940" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-8942" href="../Soundness/#plfa_plfa-part3-Soundness-8942" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-8943" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-8945" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-8947" href="../Soundness/#plfa_plfa-part3-Soundness-8936" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-8950" href="../Soundness/#plfa_plfa-part3-Soundness-8942" class="Bound">x</a>
</pre>The proof is then as follows.<pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-reflect"></a><a id="plfa_plfa-part3-Soundness-8995" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9010" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9012" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-9014" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9015" href="../Soundness/#plfa_plfa-part3-Soundness-9015" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9017" href="../Soundness/#plfa_plfa-part3-Soundness-9017" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-9019" href="../Soundness/#plfa_plfa-part3-Soundness-9019" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-9020" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9022" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9023" href="../Soundness/#plfa_plfa-part3-Soundness-9023" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-9025" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9027" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-9031" href="../Soundness/#plfa_plfa-part3-Soundness-9015" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-9032" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9034" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9035" href="../Soundness/#plfa_plfa-part3-Soundness-9035" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9037" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9039" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-9043" href="../Soundness/#plfa_plfa-part3-Soundness-9017" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-9044" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9046" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-9048" href="../Soundness/#plfa_plfa-part3-Soundness-9048" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9050" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9052" href="../Soundness/#plfa_plfa-part3-Soundness-9015" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9054" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9056" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-9057" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-9061" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9063" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9064" href="../Soundness/#plfa_plfa-part3-Soundness-9064" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9066" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-9068" href="../Substitution/#plfa_plfa-part2-Substitution-2124" class="Function">Rename</a> <a id="plfa_plfa-part3-Soundness-9075" href="../Soundness/#plfa_plfa-part3-Soundness-9015" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-9077" href="../Soundness/#plfa_plfa-part3-Soundness-9017" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-9078" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-9082" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9084" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9085" href="../Soundness/#plfa_plfa-part3-Soundness-9035" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9087" href="https://agda.github.io/agda-stdlib/v1.3/Function.Base.html#992" class="Function Operator">∘</a> <a id="plfa_plfa-part3-Soundness-9089" href="../Soundness/#plfa_plfa-part3-Soundness-9064" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-9090" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9092" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-9095" href="../Soundness/#plfa_plfa-part3-Soundness-9023" class="Bound">γ</a>
  <a id="plfa_plfa-part3-Soundness-9099" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9101" href="../Soundness/#plfa_plfa-part3-Soundness-9035" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-9103" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9105" href="../Untyped/#plfa_plfa-part2-Untyped-6207" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-9112" href="../Soundness/#plfa_plfa-part3-Soundness-9064" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9114" href="../Soundness/#plfa_plfa-part3-Soundness-9048" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9116" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-9118" href="../Soundness/#plfa_plfa-part3-Soundness-9019" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-9124" class="Comment">------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-9163" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-9165" href="../Soundness/#plfa_plfa-part3-Soundness-9023" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-9167" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-9169" href="../Soundness/#plfa_plfa-part3-Soundness-9048" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-9171" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-9173" href="../Soundness/#plfa_plfa-part3-Soundness-9019" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-9175" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9190" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9191" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9193" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9195" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-9197" href="../Soundness/#plfa_plfa-part3-Soundness-9197" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9198" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9200" href="../Soundness/#plfa_plfa-part3-Soundness-9200" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9206" href="../Soundness/#plfa_plfa-part3-Soundness-9206" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-9208" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-9213" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-9221" href="../Soundness/#plfa_plfa-part3-Soundness-9206" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-9223" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-9227" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-9229" href="../Soundness/#plfa_plfa-part3-Soundness-9229" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9232" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-9235" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9239" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-9243" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9244" href="../Denotational/#plfa_plfa-part3-Denotational-4625" class="InductiveConstructor">⊑-trans</a> <a id="plfa_plfa-part3-Soundness-9252" href="../Soundness/#plfa_plfa-part3-Soundness-9229" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-9255" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9256" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9262" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-9263" class="Symbol">))</a>
<a id="plfa_plfa-part3-Soundness-9266" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9281" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9282" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9284" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9286" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9288" href="../Soundness/#plfa_plfa-part3-Soundness-9288" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9289" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-9291" class="Argument">ρ</a> <a id="plfa_plfa-part3-Soundness-9293" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9295" href="../Soundness/#plfa_plfa-part3-Soundness-9295" class="Bound">ρ</a><a id="plfa_plfa-part3-Soundness-9296" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9298" href="../Soundness/#plfa_plfa-part3-Soundness-9298" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9304" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9305" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9313" href="../Soundness/#plfa_plfa-part3-Soundness-9313" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9314" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9316" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9321" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-9329" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9330" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9345" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9346" href="../Soundness/#plfa_plfa-part3-Soundness-8753" class="Function">ext-⊑′</a> <a id="plfa_plfa-part3-Soundness-9353" href="../Soundness/#plfa_plfa-part3-Soundness-9295" class="Bound">ρ</a> <a id="plfa_plfa-part3-Soundness-9355" href="../Soundness/#plfa_plfa-part3-Soundness-9298" class="Bound">all-n</a><a id="plfa_plfa-part3-Soundness-9360" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9362" href="../Soundness/#plfa_plfa-part3-Soundness-9313" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-9363" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9365" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9380" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9381" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9383" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9385" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9387" href="../Soundness/#plfa_plfa-part3-Soundness-9387" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9388" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9390" href="../Soundness/#plfa_plfa-part3-Soundness-9390" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9396" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9404" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9406" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9414" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9429" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9430" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9432" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9434" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9436" href="../Soundness/#plfa_plfa-part3-Soundness-9436" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9437" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9439" href="../Soundness/#plfa_plfa-part3-Soundness-9439" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9445" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9446" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9454" href="../Soundness/#plfa_plfa-part3-Soundness-9454" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9457" href="../Soundness/#plfa_plfa-part3-Soundness-9457" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9459" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9461" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9466" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9474" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9475" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9490" href="../Soundness/#plfa_plfa-part3-Soundness-9439" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9496" href="../Soundness/#plfa_plfa-part3-Soundness-9454" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9498" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9500" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9501" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9516" href="../Soundness/#plfa_plfa-part3-Soundness-9439" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9522" href="../Soundness/#plfa_plfa-part3-Soundness-9457" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9524" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9526" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9541" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9542" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9544" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9546" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-9548" href="../Soundness/#plfa_plfa-part3-Soundness-9548" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-9549" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9551" href="../Soundness/#plfa_plfa-part3-Soundness-9551" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9557" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9558" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9562" href="../Soundness/#plfa_plfa-part3-Soundness-9562" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9565" href="../Soundness/#plfa_plfa-part3-Soundness-9565" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9567" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9569" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9574" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9578" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9579" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9594" href="../Soundness/#plfa_plfa-part3-Soundness-9551" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9600" href="../Soundness/#plfa_plfa-part3-Soundness-9562" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9602" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9604" href="../Soundness/#plfa_plfa-part3-Soundness-9565" class="Bound">lt</a>
<a id="plfa_plfa-part3-Soundness-9607" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9622" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9623" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9625" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9627" href="../Soundness/#plfa_plfa-part3-Soundness-9627" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9629" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9631" href="../Soundness/#plfa_plfa-part3-Soundness-9631" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9632" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9634" href="../Soundness/#plfa_plfa-part3-Soundness-9634" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9640" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9641" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9648" href="../Soundness/#plfa_plfa-part3-Soundness-9648" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9651" href="../Soundness/#plfa_plfa-part3-Soundness-9651" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9653" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9655" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9660" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-9667" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9668" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9683" href="../Soundness/#plfa_plfa-part3-Soundness-9634" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9689" href="../Soundness/#plfa_plfa-part3-Soundness-9648" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9691" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9693" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9694" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9709" href="../Soundness/#plfa_plfa-part3-Soundness-9634" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9715" href="../Soundness/#plfa_plfa-part3-Soundness-9651" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9717" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9719" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9734" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9735" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9737" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9739" href="../Soundness/#plfa_plfa-part3-Soundness-9739" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9741" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9743" href="../Soundness/#plfa_plfa-part3-Soundness-9743" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9744" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9746" href="../Soundness/#plfa_plfa-part3-Soundness-9746" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9752" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-9760" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9762" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-9770" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9785" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9786" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9788" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9790" href="../Soundness/#plfa_plfa-part3-Soundness-9790" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9792" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9794" href="../Soundness/#plfa_plfa-part3-Soundness-9794" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9795" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9797" href="../Soundness/#plfa_plfa-part3-Soundness-9797" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9803" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9804" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9812" href="../Soundness/#plfa_plfa-part3-Soundness-9812" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9815" href="../Soundness/#plfa_plfa-part3-Soundness-9815" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9817" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9819" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9824" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-9832" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9833" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9848" href="../Soundness/#plfa_plfa-part3-Soundness-9797" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9854" href="../Soundness/#plfa_plfa-part3-Soundness-9812" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9856" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9858" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9859" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9874" href="../Soundness/#plfa_plfa-part3-Soundness-9797" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9880" href="../Soundness/#plfa_plfa-part3-Soundness-9815" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-9882" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-9884" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9899" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-9900" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-9902" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-9904" href="../Soundness/#plfa_plfa-part3-Soundness-9904" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-9906" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-9908" href="../Soundness/#plfa_plfa-part3-Soundness-9908" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-9909" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-9911" href="../Soundness/#plfa_plfa-part3-Soundness-9911" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9917" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9918" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9922" href="../Soundness/#plfa_plfa-part3-Soundness-9922" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-9925" href="../Soundness/#plfa_plfa-part3-Soundness-9925" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-9927" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9929" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-9934" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-9938" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-9939" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-9954" href="../Soundness/#plfa_plfa-part3-Soundness-9911" class="Bound">all-n</a> <a id="plfa_plfa-part3-Soundness-9960" href="../Soundness/#plfa_plfa-part3-Soundness-9922" class="Bound">d₁</a><a id="plfa_plfa-part3-Soundness-9962" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-9964" href="../Soundness/#plfa_plfa-part3-Soundness-9925" class="Bound">lt</a>
</pre><p>We cannot prove this lemma by induction on the derivation of <code>δ ⊢ rename ρ M ↓ v</code>, so instead we proceed by induction on <code>M</code>.</p><ul><li><p>If it is a variable, we apply the inversion lemma to obtain that <code>v ⊑ δ (ρ x)</code>. Instantiating the premise to <code>x</code> we have <code>δ (ρ x) = γ x</code>, so we conclude by the <code>var</code> rule.</p></li><li><p>If it is a lambda abstraction <code>ƛ N</code>, we have rename <code>ρ (ƛ N) = ƛ (rename (ext ρ) N)</code>. We proceed by cases on <code>δ ⊢ ƛ (rename (ext ρ) N) ↓ v</code>.</p><ul><li><p>Rule <code>↦-intro</code>: To satisfy the premise of the induction hypothesis, we prove that the renaming can be extended to be a mapping from <code>γ , v₁ to δ , v₁</code>.</p></li><li><p>Rule <code>⊥-intro</code>: We simply apply <code>⊥-intro</code>.</p></li><li><p>Rule <code>⊔-intro</code>: We apply the induction hypotheses and <code>⊔-intro</code>.</p></li><li><p>Rule <code>sub</code>: We apply the induction hypothesis and <code>sub</code>.</p></li></ul></li><li><p>If it is an application <code>L · M</code>, we have <code>rename ρ (L · M) = (rename ρ L) · (rename ρ M)</code>. We proceed by cases on <code>δ ⊢ (rename ρ L) · (rename ρ M) ↓ v</code> and all the cases are straightforward.</p></li></ul><p>In the upcoming uses of <code>rename-reflect</code>, the renaming will always be the increment function. So we prove a corollary for that special case.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-rename-inc-reflect"></a><a id="plfa_plfa-part3-Soundness-11121" href="../Soundness/#plfa_plfa-part3-Soundness-11121" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11140" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11142" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-11144" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11145" href="../Soundness/#plfa_plfa-part3-Soundness-11145" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11147" href="../Soundness/#plfa_plfa-part3-Soundness-11147" class="Bound">v′</a> <a id="plfa_plfa-part3-Soundness-11150" href="../Soundness/#plfa_plfa-part3-Soundness-11150" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-11151" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11153" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-11154" href="../Soundness/#plfa_plfa-part3-Soundness-11154" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11156" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11158" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-11162" href="../Soundness/#plfa_plfa-part3-Soundness-11145" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-11163" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-11165" class="Symbol">{</a> <a id="plfa_plfa-part3-Soundness-11167" href="../Soundness/#plfa_plfa-part3-Soundness-11167" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11169" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-11171" href="../Soundness/#plfa_plfa-part3-Soundness-11145" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-11173" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11175" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-11176" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-11180" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11182" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-11183" href="../Soundness/#plfa_plfa-part3-Soundness-11154" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11185" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-11188" href="../Soundness/#plfa_plfa-part3-Soundness-11147" class="Bound">v′</a><a id="plfa_plfa-part3-Soundness-11190" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-11192" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11194" href="../Untyped/#plfa_plfa-part2-Untyped-6207" class="Function">rename</a> <a id="plfa_plfa-part3-Soundness-11201" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S_</a> <a id="plfa_plfa-part3-Soundness-11204" href="../Soundness/#plfa_plfa-part3-Soundness-11167" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11206" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11208" href="../Soundness/#plfa_plfa-part3-Soundness-11150" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-11214" class="Comment">----------------------------</a>
  <a id="plfa_plfa-part3-Soundness-11245" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-11247" href="../Soundness/#plfa_plfa-part3-Soundness-11154" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-11249" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-11251" href="../Soundness/#plfa_plfa-part3-Soundness-11167" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-11253" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-11255" href="../Soundness/#plfa_plfa-part3-Soundness-11150" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-11257" href="../Soundness/#plfa_plfa-part3-Soundness-11121" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-11276" href="../Soundness/#plfa_plfa-part3-Soundness-11276" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-11278" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-11280" href="../Soundness/#plfa_plfa-part3-Soundness-8995" class="Function">rename-reflect</a> <a id="plfa_plfa-part3-Soundness-11295" href="../Denotational/#plfa_plfa-part3-Denotational-8466" class="Function">`⊑-refl</a> <a id="plfa_plfa-part3-Soundness-11303" href="../Soundness/#plfa_plfa-part3-Soundness-11276" class="Bound">d</a>
</pre><h3 id="substitution-reflects-denotations-the-variable-case">Substitution reflects denotations, the variable case</h3><p>We are almost ready to begin proving that simultaneous substitution reflects denotations. That is, if <code>γ ⊢ (subst σ M) ↓ v</code>, then <code>γ ⊢ σ k ↓ δ k</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code> and some <code>δ</code>. We shall start with the case in which <code>M</code> is a variable <code>x</code>. So instead the premise is <code>γ ⊢ σ x ↓ v</code> and we need to show that <code>δ ⊢ x ↓ v</code> for some <code>δ</code>. The <code>δ</code> that we choose shall be the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>.</p><p>Next we define the environment that maps <code>x</code> to <code>v</code> and every other variable to <code>⊥</code>, that is <code>const-env x v</code>. To tell variables apart, we define the following function for deciding equality of variables.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-_var≟_"></a><a id="plfa_plfa-part3-Soundness-12025" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">_var≟_</a> <a id="plfa_plfa-part3-Soundness-12032" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12034" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-12036" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12037" href="../Soundness/#plfa_plfa-part3-Soundness-12037" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12038" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12040" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12042" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12043" href="../Soundness/#plfa_plfa-part3-Soundness-12043" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12045" href="../Soundness/#plfa_plfa-part3-Soundness-12045" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12047" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12049" href="../Soundness/#plfa_plfa-part3-Soundness-12037" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12051" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12053" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12054" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12056" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12058" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1508" class="Record">Dec</a> <a id="plfa_plfa-part3-Soundness-12062" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12063" href="../Soundness/#plfa_plfa-part3-Soundness-12043" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12065" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12067" href="../Soundness/#plfa_plfa-part3-Soundness-12045" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12068" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-12070" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12072" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12077" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-12080" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12083" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12087" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12092" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12094" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12099" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12100" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12102" class="Symbol">_)</a>  <a id="plfa_plfa-part3-Soundness-12106" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12109" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12112" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-12116" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12117" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12119" class="Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-12122" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12127" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-12130" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12133" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12136" class="Symbol">λ()</a>
<a id="plfa_plfa-part3-Soundness-12140" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12141" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12143" href="../Soundness/#plfa_plfa-part3-Soundness-12143" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12144" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12146" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12151" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12152" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12154" href="../Soundness/#plfa_plfa-part3-Soundness-12154" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12155" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12157" class="Keyword">with</a>  <a id="plfa_plfa-part3-Soundness-12163" href="../Soundness/#plfa_plfa-part3-Soundness-12143" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12165" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12170" href="../Soundness/#plfa_plfa-part3-Soundness-12154" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12172" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12192" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12195" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12199" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12204" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12207" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12211" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12216" class="Symbol">...</a>                 <a id="plfa_plfa-part3-Soundness-12236" class="Symbol">|</a>  <a id="plfa_plfa-part3-Soundness-12239" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12242" href="../Soundness/#plfa_plfa-part3-Soundness-12242" class="Bound">neq</a>   <a id="plfa_plfa-part3-Soundness-12248" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12251" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12254" class="Symbol">λ{</a><a id="plfa_plfa-part3-Soundness-12256" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-12261" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12263" href="../Soundness/#plfa_plfa-part3-Soundness-12242" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12267" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-12271" class="Symbol">}</a>

<a id="plfa_plfa-part3-Soundness-var≟-refl"></a><a id="plfa_plfa-part3-Soundness-12274" href="../Soundness/#plfa_plfa-part3-Soundness-12274" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12284" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12286" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-12288" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12289" href="../Soundness/#plfa_plfa-part3-Soundness-12289" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12290" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12292" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12293" href="../Soundness/#plfa_plfa-part3-Soundness-12293" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12295" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12297" href="../Soundness/#plfa_plfa-part3-Soundness-12289" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12299" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12301" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12302" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12304" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12306" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12307" href="../Soundness/#plfa_plfa-part3-Soundness-12293" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12309" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12314" href="../Soundness/#plfa_plfa-part3-Soundness-12293" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12315" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12317" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12319" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12323" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12328" href="../Soundness/#plfa_plfa-part3-Soundness-12274" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12338" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-12340" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12342" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-12347" href="../Soundness/#plfa_plfa-part3-Soundness-12274" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12357" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12358" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-12360" href="../Soundness/#plfa_plfa-part3-Soundness-12360" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12361" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12363" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12371" href="../Soundness/#plfa_plfa-part3-Soundness-12274" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12381" href="../Soundness/#plfa_plfa-part3-Soundness-12360" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12383" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12385" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><p>Now we use <code>var≟</code> to define <code>const-env</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-const-env"></a><a id="plfa_plfa-part3-Soundness-12445" href="../Soundness/#plfa_plfa-part3-Soundness-12445" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12455" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12457" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12459" href="../Soundness/#plfa_plfa-part3-Soundness-12459" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12460" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12462" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12464" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12465" href="../Soundness/#plfa_plfa-part3-Soundness-12465" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12467" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12469" href="../Soundness/#plfa_plfa-part3-Soundness-12459" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12471" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12473" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12474" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12476" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12478" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-12484" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12486" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-12490" href="../Soundness/#plfa_plfa-part3-Soundness-12459" class="Bound">Γ</a>
<a id="plfa_plfa-part3-Soundness-12492" href="../Soundness/#plfa_plfa-part3-Soundness-12445" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12502" href="../Soundness/#plfa_plfa-part3-Soundness-12502" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12504" href="../Soundness/#plfa_plfa-part3-Soundness-12504" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12506" href="../Soundness/#plfa_plfa-part3-Soundness-12506" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12508" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12513" href="../Soundness/#plfa_plfa-part3-Soundness-12502" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12515" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12520" href="../Soundness/#plfa_plfa-part3-Soundness-12506" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12522" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12538" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12540" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12544" class="Symbol">_</a>       <a id="plfa_plfa-part3-Soundness-12552" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12554" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12556" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-12572" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12574" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-12577" class="Symbol">_</a>        <a id="plfa_plfa-part3-Soundness-12586" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12588" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
</pre><p>Of course, <code>const-env x v</code> maps <code>x</code> to value <code>v</code></p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-same-const-env"></a><a id="plfa_plfa-part3-Soundness-12653" href="../Soundness/#plfa_plfa-part3-Soundness-12653" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12668" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12670" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12672" href="../Soundness/#plfa_plfa-part3-Soundness-12672" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12673" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12675" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12676" href="../Soundness/#plfa_plfa-part3-Soundness-12676" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12678" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12680" href="../Soundness/#plfa_plfa-part3-Soundness-12672" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12682" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12684" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12685" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12687" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12688" href="../Soundness/#plfa_plfa-part3-Soundness-12688" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12689" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12691" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12693" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-12694" href="../Soundness/#plfa_plfa-part3-Soundness-12445" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12704" href="../Soundness/#plfa_plfa-part3-Soundness-12676" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12706" href="../Soundness/#plfa_plfa-part3-Soundness-12688" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12707" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-12709" href="../Soundness/#plfa_plfa-part3-Soundness-12676" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12711" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12713" href="../Soundness/#plfa_plfa-part3-Soundness-12688" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-12715" href="../Soundness/#plfa_plfa-part3-Soundness-12653" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-12730" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12731" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-12733" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12735" href="../Soundness/#plfa_plfa-part3-Soundness-12735" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12736" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12738" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-12746" href="../Soundness/#plfa_plfa-part3-Soundness-12274" class="Function">var≟-refl</a> <a id="plfa_plfa-part3-Soundness-12756" href="../Soundness/#plfa_plfa-part3-Soundness-12735" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12758" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-12760" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><p>and <code>const-env x v</code> maps <code>y</code> to <code>⊥, so long as</code>x ≢ y`.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-diff-const-env"></a><a id="plfa_plfa-part3-Soundness-12835" href="../Soundness/#plfa_plfa-part3-Soundness-12835" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12850" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12852" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-12854" href="../Soundness/#plfa_plfa-part3-Soundness-12854" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12855" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12857" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12858" href="../Soundness/#plfa_plfa-part3-Soundness-12858" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12860" href="../Soundness/#plfa_plfa-part3-Soundness-12860" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12862" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-12864" href="../Soundness/#plfa_plfa-part3-Soundness-12854" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-12866" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-12868" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-12869" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12871" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12872" href="../Soundness/#plfa_plfa-part3-Soundness-12872" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-12873" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-12877" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12879" href="../Soundness/#plfa_plfa-part3-Soundness-12858" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12881" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#840" class="Function Operator">≢</a> <a id="plfa_plfa-part3-Soundness-12883" href="../Soundness/#plfa_plfa-part3-Soundness-12860" class="Bound">y</a>
    <a id="plfa_plfa-part3-Soundness-12889" class="Comment">-------------------</a>
  <a id="plfa_plfa-part3-Soundness-12911" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-12913" href="../Soundness/#plfa_plfa-part3-Soundness-12445" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-12923" href="../Soundness/#plfa_plfa-part3-Soundness-12858" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12925" href="../Soundness/#plfa_plfa-part3-Soundness-12872" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-12927" href="../Soundness/#plfa_plfa-part3-Soundness-12860" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-12929" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-12931" href="../Denotational/#plfa_plfa-part3-Denotational-3994" class="InductiveConstructor">⊥</a>
<a id="plfa_plfa-part3-Soundness-12933" href="../Soundness/#plfa_plfa-part3-Soundness-12835" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-12948" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12949" href="../Soundness/#plfa_plfa-part3-Soundness-12949" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-12950" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12952" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12953" href="../Soundness/#plfa_plfa-part3-Soundness-12953" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-12954" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12956" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-12957" href="../Soundness/#plfa_plfa-part3-Soundness-12957" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-12958" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-12960" href="../Soundness/#plfa_plfa-part3-Soundness-12960" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-12964" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-12969" href="../Soundness/#plfa_plfa-part3-Soundness-12953" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-12971" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-12976" href="../Soundness/#plfa_plfa-part3-Soundness-12957" class="Bound">y</a>
<a id="plfa_plfa-part3-Soundness-12978" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-12983" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-12985" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-12989" href="../Soundness/#plfa_plfa-part3-Soundness-12989" class="Bound">eq</a>  <a id="plfa_plfa-part3-Soundness-12993" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-12996" href="https://agda.github.io/agda-stdlib/v1.3/Data.Empty.html#628" class="Function">⊥-elim</a> <a id="plfa_plfa-part3-Soundness-13003" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-13004" class="Bound">neq</a> <a id="plfa_plfa-part3-Soundness-13008" href="../Soundness/#plfa_plfa-part3-Soundness-12989" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-13010" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-13012" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-13017" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-13019" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-13022" class="Symbol">_</a>    <a id="plfa_plfa-part3-Soundness-13027" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-13030" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><p>So we choose <code>const-env x v</code> for <code>δ</code> and obtain <code>δ ⊢ x ↓ v</code> with the <code>var</code> rule.</p><p>It remains to prove that <code>γ ⊢ σ ↓ δ</code> and <code>δ ⊢ M ↓ v</code> for any <code>k</code>, given that we have chosen <code>const-env x v</code> for <code>δ</code>. We shall have two cases to consider, <code>x ≡ y</code> or <code>x ≢ y</code>.</p><p>Now to finish the two cases of the proof.</p><ul><li>In the case where <code>x ≡ y</code>, we need to show that <code>γ ⊢ σ y ↓ v</code>, but that’s just our premise.</li><li>In the case where <code>x ≢ y,</code> we need to show that <code>γ ⊢ σ y ↓ ⊥</code>, which we do via rule <code>⊥-intro</code>.</li></ul><p>Thus, we have completed the variable case of the proof that simultaneous substitution reflects denotations. Here is the proof again, formally.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-reflect-var"></a><a id="plfa_plfa-part3-Soundness-13690" href="../Soundness/#plfa_plfa-part3-Soundness-13690" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13708" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13710" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-13712" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13713" href="../Soundness/#plfa_plfa-part3-Soundness-13713" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13715" href="../Soundness/#plfa_plfa-part3-Soundness-13715" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13716" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13718" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13719" href="../Soundness/#plfa_plfa-part3-Soundness-13719" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13721" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13723" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13727" href="../Soundness/#plfa_plfa-part3-Soundness-13715" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13728" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13730" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13731" href="../Soundness/#plfa_plfa-part3-Soundness-13731" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13733" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13735" href="../Soundness/#plfa_plfa-part3-Soundness-13713" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13737" href="../Untyped/#plfa_plfa-part2-Untyped-3469" class="Datatype Operator">∋</a> <a id="plfa_plfa-part3-Soundness-13739" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-13740" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13742" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13743" href="../Soundness/#plfa_plfa-part3-Soundness-13743" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13744" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13746" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13747" href="../Soundness/#plfa_plfa-part3-Soundness-13747" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13749" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-13751" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-13757" href="../Soundness/#plfa_plfa-part3-Soundness-13713" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13759" href="../Soundness/#plfa_plfa-part3-Soundness-13715" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13760" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-13764" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13766" href="../Soundness/#plfa_plfa-part3-Soundness-13719" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13768" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13770" href="../Soundness/#plfa_plfa-part3-Soundness-13747" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13772" href="../Soundness/#plfa_plfa-part3-Soundness-13731" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13774" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13776" href="../Soundness/#plfa_plfa-part3-Soundness-13743" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-13782" class="Comment">-----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-13826" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-13828" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-13831" href="../Soundness/#plfa_plfa-part3-Soundness-13831" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13833" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-13835" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-13839" href="../Soundness/#plfa_plfa-part3-Soundness-13713" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-13841" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-13843" href="../Soundness/#plfa_plfa-part3-Soundness-13719" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-13845" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-13848" href="../Soundness/#plfa_plfa-part3-Soundness-13747" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-13850" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13852" href="../Soundness/#plfa_plfa-part3-Soundness-13831" class="Bound">δ</a>  <a id="plfa_plfa-part3-Soundness-13855" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-13858" href="../Soundness/#plfa_plfa-part3-Soundness-13831" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-13860" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-13862" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-13864" href="../Soundness/#plfa_plfa-part3-Soundness-13731" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13866" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-13868" href="../Soundness/#plfa_plfa-part3-Soundness-13743" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-13870" href="../Soundness/#plfa_plfa-part3-Soundness-13690" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-13888" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13889" href="../Soundness/#plfa_plfa-part3-Soundness-13889" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13890" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13892" href="../Soundness/#plfa_plfa-part3-Soundness-13892" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-13893" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13895" href="../Soundness/#plfa_plfa-part3-Soundness-13895" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-13896" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13898" href="../Soundness/#plfa_plfa-part3-Soundness-13898" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13899" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13901" href="../Soundness/#plfa_plfa-part3-Soundness-13901" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13902" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13904" href="../Soundness/#plfa_plfa-part3-Soundness-13904" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-13905" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-13907" href="../Soundness/#plfa_plfa-part3-Soundness-13907" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-13912" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-13920" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-13924" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-13925" href="../Soundness/#plfa_plfa-part3-Soundness-12653" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-13940" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-13941" href="../Soundness/#plfa_plfa-part3-Soundness-13889" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-13942" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13944" href="../Soundness/#plfa_plfa-part3-Soundness-13898" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-13945" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-13947" href="../Soundness/#plfa_plfa-part3-Soundness-13901" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-13948" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-13951" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-13957" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13959" href="../Soundness/#plfa_plfa-part3-Soundness-12445" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-13969" href="../Soundness/#plfa_plfa-part3-Soundness-13898" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-13971" href="../Soundness/#plfa_plfa-part3-Soundness-13901" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-13973" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13975" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-13977" href="../Soundness/#plfa_plfa-part3-Soundness-14010" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-13990" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-13992" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-13996" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-13998" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-14002" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-14010" href="../Soundness/#plfa_plfa-part3-Soundness-14010" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-14023" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14025" href="../Soundness/#plfa_plfa-part3-Soundness-13895" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14027" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14030" href="../Soundness/#plfa_plfa-part3-Soundness-13904" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14032" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14034" href="../Soundness/#plfa_plfa-part3-Soundness-12445" class="Function">const-env</a> <a id="plfa_plfa-part3-Soundness-14044" href="../Soundness/#plfa_plfa-part3-Soundness-13898" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14046" href="../Soundness/#plfa_plfa-part3-Soundness-13901" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-14050" href="../Soundness/#plfa_plfa-part3-Soundness-14010" class="Function">const-env-ok</a> <a id="plfa_plfa-part3-Soundness-14063" href="../Soundness/#plfa_plfa-part3-Soundness-14063" class="Bound">y</a> <a id="plfa_plfa-part3-Soundness-14065" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-14070" href="../Soundness/#plfa_plfa-part3-Soundness-13898" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14072" href="../Soundness/#plfa_plfa-part3-Soundness-12025" class="Function Operator">var≟</a> <a id="plfa_plfa-part3-Soundness-14077" href="../Soundness/#plfa_plfa-part3-Soundness-14063" class="Bound">y</a>
  <a id="plfa_plfa-part3-Soundness-14081" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-14085" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14087" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="plfa_plfa-part3-Soundness-14091" href="../Soundness/#plfa_plfa-part3-Soundness-14091" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-14095" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-14103" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-14107" href="../Soundness/#plfa_plfa-part3-Soundness-14091" class="Bound">x≡y</a> <a id="plfa_plfa-part3-Soundness-14111" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14113" href="../Soundness/#plfa_plfa-part3-Soundness-12653" class="Function">same-const-env</a> <a id="plfa_plfa-part3-Soundness-14128" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14129" href="../Soundness/#plfa_plfa-part3-Soundness-13889" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14130" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14132" href="../Soundness/#plfa_plfa-part3-Soundness-13898" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14133" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14135" href="../Soundness/#plfa_plfa-part3-Soundness-13901" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14136" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14138" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14140" href="../Soundness/#plfa_plfa-part3-Soundness-13907" class="Bound">xv</a>
  <a id="plfa_plfa-part3-Soundness-14145" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-14149" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-14151" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="plfa_plfa-part3-Soundness-14154" href="../Soundness/#plfa_plfa-part3-Soundness-14154" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14158" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-14166" href="../Soundness/#plfa_plfa-part3-Soundness-12835" class="Function">diff-const-env</a> <a id="plfa_plfa-part3-Soundness-14181" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14182" href="../Soundness/#plfa_plfa-part3-Soundness-13889" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14183" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14185" href="../Soundness/#plfa_plfa-part3-Soundness-13898" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14186" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14188" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-14189" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14191" href="../Soundness/#plfa_plfa-part3-Soundness-13901" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-14192" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14194" href="../Soundness/#plfa_plfa-part3-Soundness-14154" class="Bound">x≢y</a> <a id="plfa_plfa-part3-Soundness-14198" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14200" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
</pre><h3 id="substitutions-and-environment-construction">Substitutions and environment construction</h3><p>Every substitution produces terms that can evaluate to <code>⊥</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊥"></a><a id="plfa_plfa-part3-Soundness-14331" href="../Soundness/#plfa_plfa-part3-Soundness-14331" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14339" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14341" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14343" href="../Soundness/#plfa_plfa-part3-Soundness-14343" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14345" href="../Soundness/#plfa_plfa-part3-Soundness-14345" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14346" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14348" href="../Soundness/#plfa_plfa-part3-Soundness-14348" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14350" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14352" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14356" href="../Soundness/#plfa_plfa-part3-Soundness-14345" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14357" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14359" href="../Soundness/#plfa_plfa-part3-Soundness-14359" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14361" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14363" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14369" href="../Soundness/#plfa_plfa-part3-Soundness-14343" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14371" href="../Soundness/#plfa_plfa-part3-Soundness-14345" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14372" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-14378" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-14398" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14400" href="../Soundness/#plfa_plfa-part3-Soundness-14348" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14402" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14405" href="../Soundness/#plfa_plfa-part3-Soundness-14359" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14407" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14409" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a>
<a id="plfa_plfa-part3-Soundness-14412" href="../Soundness/#plfa_plfa-part3-Soundness-14331" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-14420" href="../Soundness/#plfa_plfa-part3-Soundness-14420" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14422" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14424" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
</pre><p>If a substitution produces terms that evaluate to the values in both <code>γ₁</code> and <code>γ₂</code>, then those terms also evaluate to the values in <code>γ₁ ⊔ γ₂</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-⊔"></a><a id="plfa_plfa-part3-Soundness-14589" href="../Soundness/#plfa_plfa-part3-Soundness-14589" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14597" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14599" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-14601" href="../Soundness/#plfa_plfa-part3-Soundness-14601" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14603" href="../Soundness/#plfa_plfa-part3-Soundness-14603" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14604" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14606" href="../Soundness/#plfa_plfa-part3-Soundness-14606" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14608" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14610" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14614" href="../Soundness/#plfa_plfa-part3-Soundness-14603" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14615" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14617" href="../Soundness/#plfa_plfa-part3-Soundness-14617" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14620" href="../Soundness/#plfa_plfa-part3-Soundness-14620" class="Bound">γ₂</a> <a id="plfa_plfa-part3-Soundness-14623" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14625" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-14629" href="../Soundness/#plfa_plfa-part3-Soundness-14601" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14630" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-14632" href="../Soundness/#plfa_plfa-part3-Soundness-14632" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14634" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14636" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-14642" href="../Soundness/#plfa_plfa-part3-Soundness-14601" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14644" href="../Soundness/#plfa_plfa-part3-Soundness-14603" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-14645" class="Symbol">}</a>
           <a id="plfa_plfa-part3-Soundness-14658" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14660" href="../Soundness/#plfa_plfa-part3-Soundness-14606" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14662" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14665" href="../Soundness/#plfa_plfa-part3-Soundness-14632" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14667" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14669" href="../Soundness/#plfa_plfa-part3-Soundness-14617" class="Bound">γ₁</a>
           <a id="plfa_plfa-part3-Soundness-14683" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14685" href="../Soundness/#plfa_plfa-part3-Soundness-14606" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14687" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14690" href="../Soundness/#plfa_plfa-part3-Soundness-14632" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14692" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14694" href="../Soundness/#plfa_plfa-part3-Soundness-14620" class="Bound">γ₂</a>
             <a id="plfa_plfa-part3-Soundness-14710" class="Comment">-------------------------</a>
           <a id="plfa_plfa-part3-Soundness-14747" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14749" href="../Soundness/#plfa_plfa-part3-Soundness-14606" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-14751" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-14754" href="../Soundness/#plfa_plfa-part3-Soundness-14632" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-14756" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-14758" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14759" href="../Soundness/#plfa_plfa-part3-Soundness-14617" class="Bound">γ₁</a> <a id="plfa_plfa-part3-Soundness-14762" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-14765" href="../Soundness/#plfa_plfa-part3-Soundness-14620" class="Bound">γ₂</a><a id="plfa_plfa-part3-Soundness-14767" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-14769" href="../Soundness/#plfa_plfa-part3-Soundness-14589" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-14777" href="../Soundness/#plfa_plfa-part3-Soundness-14777" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14783" href="../Soundness/#plfa_plfa-part3-Soundness-14783" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14789" href="../Soundness/#plfa_plfa-part3-Soundness-14789" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-14791" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14793" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-14801" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14802" href="../Soundness/#plfa_plfa-part3-Soundness-14777" class="Bound">γ₁-ok</a> <a id="plfa_plfa-part3-Soundness-14808" href="../Soundness/#plfa_plfa-part3-Soundness-14789" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14809" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14811" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14812" href="../Soundness/#plfa_plfa-part3-Soundness-14783" class="Bound">γ₂-ok</a> <a id="plfa_plfa-part3-Soundness-14818" href="../Soundness/#plfa_plfa-part3-Soundness-14789" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-14819" class="Symbol">)</a>
</pre><h3 id="the-lambda-constructor-is-injective">The Lambda constructor is injective</h3><pre class="Agda"><a id="plfa_plfa-part3-Soundness-lambda-inj"></a><a id="plfa_plfa-part3-Soundness-14875" href="../Soundness/#plfa_plfa-part3-Soundness-14875" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-14886" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14888" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-14890" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14891" href="../Soundness/#plfa_plfa-part3-Soundness-14891" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-14892" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14894" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14895" href="../Soundness/#plfa_plfa-part3-Soundness-14895" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14897" href="../Soundness/#plfa_plfa-part3-Soundness-14897" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-14899" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-14901" href="../Soundness/#plfa_plfa-part3-Soundness-14891" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14903" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-14905" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14907" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14909" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-14911" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-14915" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14917" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="plfa_plfa-part3-Soundness-14921" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-14922" class="Argument">A</a> <a id="plfa_plfa-part3-Soundness-14924" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-14926" href="../Soundness/#plfa_plfa-part3-Soundness-14891" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-14928" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-14930" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-14931" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-14933" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14934" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14936" href="../Soundness/#plfa_plfa-part3-Soundness-14895" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-14937" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-14939" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-14940" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-14942" href="../Soundness/#plfa_plfa-part3-Soundness-14897" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-14943" class="Symbol">)</a>
    <a id="plfa_plfa-part3-Soundness-14949" class="Comment">---------------------------</a>
  <a id="plfa_plfa-part3-Soundness-14979" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-14981" href="../Soundness/#plfa_plfa-part3-Soundness-14895" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-14983" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-14985" href="../Soundness/#plfa_plfa-part3-Soundness-14897" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-14987" href="../Soundness/#plfa_plfa-part3-Soundness-14875" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-14998" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-15003" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15005" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre><h3 id="simultaneous-substitution-reflects-denotations">Simultaneous substitution reflects denotations</h3><p>In this section we prove a central lemma, that substitution reflects denotations. That is, if <code>γ ⊢ subst σ M ↓ v</code>, then <code>δ ⊢ M ↓ v</code> and <code>γ ⊢ σ ↓ δ</code> for some <code>δ</code>. We shall proceed by induction on the derivation of <code>γ ⊢ subst σ M ↓ v</code>. This requires a minor restatement of the lemma, changing the premise to <code>γ ⊢ L ↓ v</code> and <code>L ≡ subst σ M</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-split"></a><a id="plfa_plfa-part3-Soundness-15415" href="../Soundness/#plfa_plfa-part3-Soundness-15415" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15421" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15423" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15425" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15426" href="../Soundness/#plfa_plfa-part3-Soundness-15426" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-15427" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15429" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15430" href="../Soundness/#plfa_plfa-part3-Soundness-15430" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15432" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15434" href="../Soundness/#plfa_plfa-part3-Soundness-15426" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15436" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15438" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-15440" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15442" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15443" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15445" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15446" href="../Soundness/#plfa_plfa-part3-Soundness-15446" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15448" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15450" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15454" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15455" href="../Soundness/#plfa_plfa-part3-Soundness-15426" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15457" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-15459" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15460" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-15463" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15464" href="../Soundness/#plfa_plfa-part3-Soundness-15464" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15465" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15469" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15471" href="../Soundness/#plfa_plfa-part3-Soundness-15446" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15473" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15475" href="../Soundness/#plfa_plfa-part3-Soundness-15430" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15477" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15479" href="../Soundness/#plfa_plfa-part3-Soundness-15464" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-15485" class="Comment">--------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15514" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15516" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15517" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-15522" href="../Soundness/#plfa_plfa-part3-Soundness-15446" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15524" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-15527" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-15532" href="../Soundness/#plfa_plfa-part3-Soundness-15446" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15533" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-15535" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15537" href="../Soundness/#plfa_plfa-part3-Soundness-15430" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15539" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15541" href="../Soundness/#plfa_plfa-part3-Soundness-15464" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-15543" href="../Soundness/#plfa_plfa-part3-Soundness-15415" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-15549" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15550" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-15552" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15554" href="../Soundness/#plfa_plfa-part3-Soundness-15554" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-15555" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15557" href="../Soundness/#plfa_plfa-part3-Soundness-15557" class="Bound">δMv</a> <a id="plfa_plfa-part3-Soundness-15561" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15569" href="../Denotational/#plfa_plfa-part3-Denotational-7645" class="Function">init-last</a> <a id="plfa_plfa-part3-Soundness-15579" href="../Soundness/#plfa_plfa-part3-Soundness-15554" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15581" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15583" href="../Soundness/#plfa_plfa-part3-Soundness-15557" class="Bound">δMv</a>

<a id="plfa_plfa-part3-Soundness-subst-reflect"></a><a id="plfa_plfa-part3-Soundness-15588" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15602" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15604" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-15606" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15607" href="../Soundness/#plfa_plfa-part3-Soundness-15607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15609" href="../Soundness/#plfa_plfa-part3-Soundness-15609" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15610" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15612" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15613" href="../Soundness/#plfa_plfa-part3-Soundness-15613" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15615" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15617" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15621" href="../Soundness/#plfa_plfa-part3-Soundness-15609" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15622" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15624" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15625" href="../Soundness/#plfa_plfa-part3-Soundness-15625" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15627" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15629" href="../Soundness/#plfa_plfa-part3-Soundness-15607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15631" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15633" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15634" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15636" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15637" href="../Soundness/#plfa_plfa-part3-Soundness-15637" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-15638" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15640" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15641" href="../Soundness/#plfa_plfa-part3-Soundness-15641" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15643" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15645" href="../Soundness/#plfa_plfa-part3-Soundness-15609" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-15647" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15649" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-15650" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15652" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15653" href="../Soundness/#plfa_plfa-part3-Soundness-15653" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15655" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-15657" href="../Substitution/#plfa_plfa-part2-Substitution-2341" class="Function">Subst</a> <a id="plfa_plfa-part3-Soundness-15663" href="../Soundness/#plfa_plfa-part3-Soundness-15607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15665" href="../Soundness/#plfa_plfa-part3-Soundness-15609" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-15666" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-15670" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15672" href="../Soundness/#plfa_plfa-part3-Soundness-15613" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15674" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15676" href="../Soundness/#plfa_plfa-part3-Soundness-15641" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-15678" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15680" href="../Soundness/#plfa_plfa-part3-Soundness-15637" class="Bound">v</a>
  <a id="plfa_plfa-part3-Soundness-15684" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15686" href="../Untyped/#plfa_plfa-part2-Untyped-6943" class="Function">subst</a> <a id="plfa_plfa-part3-Soundness-15692" href="../Soundness/#plfa_plfa-part3-Soundness-15653" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15694" href="../Soundness/#plfa_plfa-part3-Soundness-15625" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15696" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-15698" href="../Soundness/#plfa_plfa-part3-Soundness-15641" class="Bound">L</a>
    <a id="plfa_plfa-part3-Soundness-15704" class="Comment">---------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-15746" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-15748" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-15751" href="../Soundness/#plfa_plfa-part3-Soundness-15751" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15753" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-15755" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-15759" href="../Soundness/#plfa_plfa-part3-Soundness-15607" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-15761" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-15763" href="../Soundness/#plfa_plfa-part3-Soundness-15613" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-15765" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-15768" href="../Soundness/#plfa_plfa-part3-Soundness-15653" class="Bound">σ</a> <a id="plfa_plfa-part3-Soundness-15770" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15772" href="../Soundness/#plfa_plfa-part3-Soundness-15751" class="Bound">γ</a>  <a id="plfa_plfa-part3-Soundness-15775" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-15778" href="../Soundness/#plfa_plfa-part3-Soundness-15751" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-15780" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-15782" href="../Soundness/#plfa_plfa-part3-Soundness-15625" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-15784" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-15786" href="../Soundness/#plfa_plfa-part3-Soundness-15637" class="Bound">v</a>

<a id="plfa_plfa-part3-Soundness-15789" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15803" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15804" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15806" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15808" href="../Soundness/#plfa_plfa-part3-Soundness-15808" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15809" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-15811" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15813" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15815" href="../Soundness/#plfa_plfa-part3-Soundness-15815" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15816" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15818" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15819" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15823" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15824" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15826" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15828" href="../Soundness/#plfa_plfa-part3-Soundness-15828" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15829" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15832" href="../Soundness/#plfa_plfa-part3-Soundness-15832" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15836" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15841" href="../Soundness/#plfa_plfa-part3-Soundness-15808" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-15843" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-15847" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15849" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-15851" href="../Soundness/#plfa_plfa-part3-Soundness-15851" class="Bound">x</a>  <a id="plfa_plfa-part3-Soundness-15854" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-15859" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15863" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15864" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15866" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15868" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15869" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-15871" class="Symbol">...</a>           <a id="plfa_plfa-part3-Soundness-15885" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15887" href="../Soundness/#plfa_plfa-part3-Soundness-15887" class="Bound">yv</a>  <a id="plfa_plfa-part3-Soundness-15891" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-15899" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-15903" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-15907" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15909" href="../Soundness/#plfa_plfa-part3-Soundness-13690" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-15927" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15928" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-15930" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15932" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-15933" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15935" href="../Soundness/#plfa_plfa-part3-Soundness-15887" class="Bound">yv</a>
<a id="plfa_plfa-part3-Soundness-15938" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-15952" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15953" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-15955" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15957" href="../Soundness/#plfa_plfa-part3-Soundness-15957" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-15958" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-15960" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-15961" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-15965" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-15966" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-15968" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-15970" href="../Soundness/#plfa_plfa-part3-Soundness-15970" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-15971" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-15974" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-15977" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-15979" href="../Soundness/#plfa_plfa-part3-Soundness-15979" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-15982" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-15984" href="../Soundness/#plfa_plfa-part3-Soundness-15984" class="Bound">M₂</a>
<a id="plfa_plfa-part3-Soundness-15987" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16001" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16002" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16004" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16006" href="../Soundness/#plfa_plfa-part3-Soundness-16006" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16007" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16009" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16010" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-16014" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16015" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-16017" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16019" href="../Soundness/#plfa_plfa-part3-Soundness-16019" class="Bound">y</a><a id="plfa_plfa-part3-Soundness-16020" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-16023" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16026" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16028" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16030" href="../Soundness/#plfa_plfa-part3-Soundness-16030" class="Bound">M′</a>

<a id="plfa_plfa-part3-Soundness-16034" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16048" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16049" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16051" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16053" href="../Soundness/#plfa_plfa-part3-Soundness-16053" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16054" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16056" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16058" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16060" href="../Soundness/#plfa_plfa-part3-Soundness-16060" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16061" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16063" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16064" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16071" href="../Soundness/#plfa_plfa-part3-Soundness-16071" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16074" href="../Soundness/#plfa_plfa-part3-Soundness-16074" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16076" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16078" href="../Soundness/#plfa_plfa-part3-Soundness-16078" class="Bound">eqL</a>
         <a id="plfa_plfa-part3-Soundness-16091" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16096" href="../Soundness/#plfa_plfa-part3-Soundness-16053" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-16098" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16105" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16107" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16109" href="../Soundness/#plfa_plfa-part3-Soundness-16109" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16111" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16116" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16123" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16126" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-16129" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16136" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16138" href="../Soundness/#plfa_plfa-part3-Soundness-16138" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16141" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16149" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16153" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16157" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16159" href="../Soundness/#plfa_plfa-part3-Soundness-13690" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16177" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16178" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16180" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16182" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16183" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16185" href="../Soundness/#plfa_plfa-part3-Soundness-16138" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16188" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16202" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16203" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16210" href="../Soundness/#plfa_plfa-part3-Soundness-16210" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16213" href="../Soundness/#plfa_plfa-part3-Soundness-16213" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16215" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16217" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-16220" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16222" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16224" href="../Soundness/#plfa_plfa-part3-Soundness-16224" class="Bound">M′</a>
<a id="plfa_plfa-part3-Soundness-16227" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a><a id="plfa_plfa-part3-Soundness-16240" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16241" href="../Soundness/#plfa_plfa-part3-Soundness-16241" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-16242" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16244" href="../Soundness/#plfa_plfa-part3-Soundness-16244" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-16245" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16247" href="../Soundness/#plfa_plfa-part3-Soundness-16247" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-16248" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16250" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16252" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16254" href="../Soundness/#plfa_plfa-part3-Soundness-16254" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16255" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16257" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16258" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16265" href="../Soundness/#plfa_plfa-part3-Soundness-16265" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16268" href="../Soundness/#plfa_plfa-part3-Soundness-16268" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-16270" class="Symbol">)</a>
   <a id="plfa_plfa-part3-Soundness-16275" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16280" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16282" href="../Soundness/#plfa_plfa-part3-Soundness-16282" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-16285" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-16287" href="../Soundness/#plfa_plfa-part3-Soundness-16287" class="Bound">M₂</a>
     <a id="plfa_plfa-part3-Soundness-16295" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16300" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16314" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16315" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16317" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16319" href="../Soundness/#plfa_plfa-part3-Soundness-16282" class="Bound">M₁</a><a id="plfa_plfa-part3-Soundness-16321" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16323" href="../Soundness/#plfa_plfa-part3-Soundness-16265" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-16326" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-16331" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16333" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16347" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16348" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16350" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16352" href="../Soundness/#plfa_plfa-part3-Soundness-16287" class="Bound">M₂</a><a id="plfa_plfa-part3-Soundness-16354" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16356" href="../Soundness/#plfa_plfa-part3-Soundness-16268" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-16359" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-16364" class="Symbol">...</a>     <a id="plfa_plfa-part3-Soundness-16372" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16374" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16376" href="../Soundness/#plfa_plfa-part3-Soundness-16376" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16379" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16381" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16383" href="../Soundness/#plfa_plfa-part3-Soundness-16383" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16392" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16394" href="../Soundness/#plfa_plfa-part3-Soundness-16394" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16397" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16399" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16401" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16403" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16405" href="../Soundness/#plfa_plfa-part3-Soundness-16405" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16408" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16410" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16412" href="../Soundness/#plfa_plfa-part3-Soundness-16412" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16421" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16423" href="../Soundness/#plfa_plfa-part3-Soundness-16423" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16426" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16428" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16430" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-16437" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16439" href="../Soundness/#plfa_plfa-part3-Soundness-16376" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16442" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-16445" href="../Soundness/#plfa_plfa-part3-Soundness-16405" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-16448" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16450" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16452" href="../Soundness/#plfa_plfa-part3-Soundness-14589" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-16460" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16461" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-16464" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16466" href="../Soundness/#plfa_plfa-part3-Soundness-16376" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-16468" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16470" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-16473" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16475" href="../Soundness/#plfa_plfa-part3-Soundness-16405" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16477" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16479" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16481" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16483" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16484" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16486" href="../Soundness/#plfa_plfa-part3-Soundness-16383" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-16495" href="../Soundness/#plfa_plfa-part3-Soundness-16412" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-16504" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-16526" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-16533" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16534" href="../Denotational/#plfa_plfa-part3-Denotational-25659" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16540" href="../Soundness/#plfa_plfa-part3-Soundness-16394" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-16543" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16544" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-16558" href="../Soundness/#plfa_plfa-part3-Soundness-16376" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16561" href="../Soundness/#plfa_plfa-part3-Soundness-16405" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16563" class="Symbol">))</a>
                           <a id="plfa_plfa-part3-Soundness-16593" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16594" href="../Denotational/#plfa_plfa-part3-Denotational-25659" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-16600" href="../Soundness/#plfa_plfa-part3-Soundness-16423" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-16603" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16604" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-16618" href="../Soundness/#plfa_plfa-part3-Soundness-16376" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-16621" href="../Soundness/#plfa_plfa-part3-Soundness-16405" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-16623" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-16626" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16628" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-16631" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16645" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16646" class="Argument">M</a> <a id="plfa_plfa-part3-Soundness-16648" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16650" href="../Soundness/#plfa_plfa-part3-Soundness-16650" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-16651" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-16653" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16655" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16657" href="../Soundness/#plfa_plfa-part3-Soundness-16657" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16658" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16660" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16661" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16669" href="../Soundness/#plfa_plfa-part3-Soundness-16669" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16670" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16672" href="../Soundness/#plfa_plfa-part3-Soundness-16672" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16676" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16681" href="../Soundness/#plfa_plfa-part3-Soundness-16650" class="Bound">M</a>
<a id="plfa_plfa-part3-Soundness-16683" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-16690" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16692" href="../Untyped/#plfa_plfa-part2-Untyped-4282" class="InductiveConstructor Operator">`</a> <a id="plfa_plfa-part3-Soundness-16694" href="../Soundness/#plfa_plfa-part3-Soundness-16694" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16696" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16701" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16702" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16710" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16711" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16713" class="Symbol">...</a>             <a id="plfa_plfa-part3-Soundness-16729" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16731" href="../Soundness/#plfa_plfa-part3-Soundness-16731" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-16734" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-16742" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-16746" class="Bound">eqL</a> <a id="plfa_plfa-part3-Soundness-16750" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16752" href="../Soundness/#plfa_plfa-part3-Soundness-13690" class="Function">subst-reflect-var</a> <a id="plfa_plfa-part3-Soundness-16770" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16771" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16773" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16775" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16776" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16778" href="../Soundness/#plfa_plfa-part3-Soundness-16731" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-16781" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16795" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16796" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16798" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16800" href="../Soundness/#plfa_plfa-part3-Soundness-16800" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16801" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16803" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16804" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-16812" href="../Soundness/#plfa_plfa-part3-Soundness-16812" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-16813" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-16815" href="../Soundness/#plfa_plfa-part3-Soundness-16815" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-16818" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16820" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-16822" href="../Soundness/#plfa_plfa-part3-Soundness-16822" class="Bound">M′</a>
      <a id="plfa_plfa-part3-Soundness-16831" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-16836" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-16850" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-16851" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-16853" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-16855" href="../Untyped/#plfa_plfa-part2-Untyped-6647" class="Function">exts</a> <a id="plfa_plfa-part3-Soundness-16860" href="../Soundness/#plfa_plfa-part3-Soundness-16800" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-16861" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-16863" href="../Soundness/#plfa_plfa-part3-Soundness-16812" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-16865" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16866" href="../Soundness/#plfa_plfa-part3-Soundness-14875" class="Function">lambda-inj</a> <a id="plfa_plfa-part3-Soundness-16877" href="../Soundness/#plfa_plfa-part3-Soundness-16815" class="Bound">eq</a><a id="plfa_plfa-part3-Soundness-16879" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-16881" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-16885" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-16887" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16889" href="../Soundness/#plfa_plfa-part3-Soundness-16889" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16892" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16894" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16896" href="../Soundness/#plfa_plfa-part3-Soundness-16896" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16906" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16908" href="../Soundness/#plfa_plfa-part3-Soundness-16908" class="Bound">m′</a> <a id="plfa_plfa-part3-Soundness-16911" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16913" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-16915" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-16921" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16923" href="../Denotational/#plfa_plfa-part3-Denotational-7541" class="Function">init</a> <a id="plfa_plfa-part3-Soundness-16928" href="../Soundness/#plfa_plfa-part3-Soundness-16889" class="Bound">δ′</a> <a id="plfa_plfa-part3-Soundness-16931" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-16933" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-16935" class="Symbol">((λ</a> <a id="plfa_plfa-part3-Soundness-16939" href="../Soundness/#plfa_plfa-part3-Soundness-16939" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-16941" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-16943" href="../Soundness/#plfa_plfa-part3-Soundness-11121" class="Function">rename-inc-reflect</a> <a id="plfa_plfa-part3-Soundness-16962" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16963" href="../Soundness/#plfa_plfa-part3-Soundness-16896" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-16973" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-16974" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-16976" href="../Soundness/#plfa_plfa-part3-Soundness-16939" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-16977" class="Symbol">))))</a> <a id="plfa_plfa-part3-Soundness-16982" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
             <a id="plfa_plfa-part3-Soundness-16997" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-17005" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17006" href="../Denotational/#plfa_plfa-part3-Denotational-26108" class="Function">up-env</a> <a id="plfa_plfa-part3-Soundness-17013" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17014" href="../Soundness/#plfa_plfa-part3-Soundness-15415" class="Function">split</a> <a id="plfa_plfa-part3-Soundness-17020" href="../Soundness/#plfa_plfa-part3-Soundness-16908" class="Bound">m′</a><a id="plfa_plfa-part3-Soundness-17022" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17024" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17025" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-17033" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17034" href="../Soundness/#plfa_plfa-part3-Soundness-16896" class="Bound">exts-σ-δ′</a> <a id="plfa_plfa-part3-Soundness-17044" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a><a id="plfa_plfa-part3-Soundness-17045" class="Symbol">)))</a> <a id="plfa_plfa-part3-Soundness-17049" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17051" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-17053" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17067" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17068" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-17076" href="../Soundness/#plfa_plfa-part3-Soundness-17076" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-17077" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17079" class="Symbol">()</a> <a id="plfa_plfa-part3-Soundness-17082" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17084" href="../Soundness/#plfa_plfa-part3-Soundness-17084" class="Bound">M₁</a> <a id="plfa_plfa-part3-Soundness-17087" href="../Untyped/#plfa_plfa-part2-Untyped-4394" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-17089" href="../Soundness/#plfa_plfa-part3-Soundness-17089" class="Bound">M₂</a>

<a id="plfa_plfa-part3-Soundness-17093" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17107" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17108" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17110" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17112" href="../Soundness/#plfa_plfa-part3-Soundness-17112" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17113" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17115" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17123" href="../Soundness/#plfa_plfa-part3-Soundness-17123" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17126" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-17132" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17134" href="../Denotational/#plfa_plfa-part3-Denotational-8174" class="Function">`⊥</a> <a id="plfa_plfa-part3-Soundness-17137" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17139" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17141" href="../Soundness/#plfa_plfa-part3-Soundness-14331" class="Function">subst-⊥</a> <a id="plfa_plfa-part3-Soundness-17149" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17150" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17152" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17154" href="../Soundness/#plfa_plfa-part3-Soundness-17112" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17155" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17157" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17159" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-17167" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17169" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>

<a id="plfa_plfa-part3-Soundness-17172" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17186" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17187" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17189" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17191" href="../Soundness/#plfa_plfa-part3-Soundness-17191" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17192" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17194" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17195" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17203" href="../Soundness/#plfa_plfa-part3-Soundness-17203" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17206" href="../Soundness/#plfa_plfa-part3-Soundness-17206" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-17208" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17210" href="../Soundness/#plfa_plfa-part3-Soundness-17210" class="Bound">eq</a>
  <a id="plfa_plfa-part3-Soundness-17215" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17220" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17234" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17235" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17237" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17239" href="../Soundness/#plfa_plfa-part3-Soundness-17191" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17240" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17242" href="../Soundness/#plfa_plfa-part3-Soundness-17203" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-17245" href="../Soundness/#plfa_plfa-part3-Soundness-17210" class="Bound">eq</a> <a id="plfa_plfa-part3-Soundness-17248" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17250" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17264" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17265" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17267" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17269" href="../Soundness/#plfa_plfa-part3-Soundness-17191" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17270" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17272" href="../Soundness/#plfa_plfa-part3-Soundness-17206" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-17275" href="../Soundness/#plfa_plfa-part3-Soundness-17210" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17278" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17282" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17284" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17286" href="../Soundness/#plfa_plfa-part3-Soundness-17286" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17289" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17291" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17293" href="../Soundness/#plfa_plfa-part3-Soundness-17293" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17302" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17304" href="../Soundness/#plfa_plfa-part3-Soundness-17304" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17307" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17309" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17311" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17313" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17315" href="../Soundness/#plfa_plfa-part3-Soundness-17315" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17318" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17320" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17322" href="../Soundness/#plfa_plfa-part3-Soundness-17322" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17331" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17333" href="../Soundness/#plfa_plfa-part3-Soundness-17333" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17336" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17338" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17340" class="Symbol">=</a>
     <a id="plfa_plfa-part3-Soundness-17347" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17349" href="../Soundness/#plfa_plfa-part3-Soundness-17286" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17352" href="../Denotational/#plfa_plfa-part3-Denotational-8203" class="Function Operator">`⊔</a> <a id="plfa_plfa-part3-Soundness-17355" href="../Soundness/#plfa_plfa-part3-Soundness-17315" class="Bound">δ₂</a> <a id="plfa_plfa-part3-Soundness-17358" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17360" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17362" href="../Soundness/#plfa_plfa-part3-Soundness-14589" class="Function">subst-⊔</a> <a id="plfa_plfa-part3-Soundness-17370" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-17371" class="Argument">γ₁</a> <a id="plfa_plfa-part3-Soundness-17374" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17376" href="../Soundness/#plfa_plfa-part3-Soundness-17286" class="Bound">δ₁</a><a id="plfa_plfa-part3-Soundness-17378" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17380" class="Argument">γ₂</a> <a id="plfa_plfa-part3-Soundness-17383" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17385" href="../Soundness/#plfa_plfa-part3-Soundness-17315" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17387" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-17389" class="Argument">σ</a> <a id="plfa_plfa-part3-Soundness-17391" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17393" class="Bound">σ</a><a id="plfa_plfa-part3-Soundness-17394" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-17396" href="../Soundness/#plfa_plfa-part3-Soundness-17293" class="Bound">subst-δ₁</a> <a id="plfa_plfa-part3-Soundness-17405" href="../Soundness/#plfa_plfa-part3-Soundness-17322" class="Bound">subst-δ₂</a> <a id="plfa_plfa-part3-Soundness-17414" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a>
                    <a id="plfa_plfa-part3-Soundness-17436" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-17444" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17445" href="../Denotational/#plfa_plfa-part3-Denotational-25659" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17451" href="../Soundness/#plfa_plfa-part3-Soundness-17304" class="Bound">m1</a> <a id="plfa_plfa-part3-Soundness-17454" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17455" href="../Denotational/#plfa_plfa-part3-Denotational-8537" class="Function">⊑-env-conj-R1</a> <a id="plfa_plfa-part3-Soundness-17469" href="../Soundness/#plfa_plfa-part3-Soundness-17286" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17472" href="../Soundness/#plfa_plfa-part3-Soundness-17315" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17474" class="Symbol">))</a>
                            <a id="plfa_plfa-part3-Soundness-17505" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17506" href="../Denotational/#plfa_plfa-part3-Denotational-25659" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-17512" href="../Soundness/#plfa_plfa-part3-Soundness-17333" class="Bound">m2</a> <a id="plfa_plfa-part3-Soundness-17515" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17516" href="../Denotational/#plfa_plfa-part3-Denotational-8643" class="Function">⊑-env-conj-R2</a> <a id="plfa_plfa-part3-Soundness-17530" href="../Soundness/#plfa_plfa-part3-Soundness-17286" class="Bound">δ₁</a> <a id="plfa_plfa-part3-Soundness-17533" href="../Soundness/#plfa_plfa-part3-Soundness-17315" class="Bound">δ₂</a><a id="plfa_plfa-part3-Soundness-17535" class="Symbol">))</a> <a id="plfa_plfa-part3-Soundness-17538" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17540" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-17542" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17556" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-17557" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17561" href="../Soundness/#plfa_plfa-part3-Soundness-17561" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17563" href="../Soundness/#plfa_plfa-part3-Soundness-17563" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-17565" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-17567" href="../Soundness/#plfa_plfa-part3-Soundness-17567" class="Bound">eq</a>
    <a id="plfa_plfa-part3-Soundness-17574" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-17579" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-17593" href="../Soundness/#plfa_plfa-part3-Soundness-17561" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-17595" href="../Soundness/#plfa_plfa-part3-Soundness-17567" class="Bound">eq</a>
<a id="plfa_plfa-part3-Soundness-17598" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-17602" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-17604" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17606" href="../Soundness/#plfa_plfa-part3-Soundness-17606" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17608" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17610" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17612" href="../Soundness/#plfa_plfa-part3-Soundness-17612" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17620" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17622" href="../Soundness/#plfa_plfa-part3-Soundness-17622" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17624" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17626" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17628" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-17630" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17632" href="../Soundness/#plfa_plfa-part3-Soundness-17606" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-17634" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17636" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-17638" href="../Soundness/#plfa_plfa-part3-Soundness-17612" class="Bound">subst-δ</a> <a id="plfa_plfa-part3-Soundness-17646" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-17648" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-17652" href="../Soundness/#plfa_plfa-part3-Soundness-17622" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-17654" class="Bound">lt</a> <a id="plfa_plfa-part3-Soundness-17657" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-17659" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><ul><li><p>Case <code>var</code>: We have subst <code>σ M ≡ y</code>, so <code>M</code> must also be a variable, say <code>x</code>. We apply the lemma <code>subst-reflect-var</code> to conclude.</p></li><li><p>Case <code>↦-elim</code>: We have <code>subst σ M ≡ L₁ · L₂</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ x</code>: We apply the <code>subst-reflect-var</code> lemma again to conclude.</p></li><li><p>Case <code>M ≡ M₁ · M₂</code>: By the induction hypothesis, we have some <code>δ₁</code> and <code>δ₂</code> such that <code>δ₁ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>γ ⊢ σ ↓ δ₁</code>, as well as <code>δ₂ ⊢ M₂ ↓ v₁</code> and <code>γ ⊢ σ ↓ δ₂</code>. By <code>⊑-env</code> we have <code>δ₁ ⊔ δ₂ ⊢ M₁ ↓ v₁ ↦ v₃</code> and <code>δ₁ ⊔ δ₂ ⊢ M₂ ↓ v₁</code> (using <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>), and therefore <code>δ₁ ⊔ δ₂ ⊢ M₁ · M₂ ↓ v₃</code>. We conclude this case by obtaining <code>γ ⊢ σ ↓ δ₁ ⊔ δ₂</code> by the <code>subst-⊔</code> lemma.</p></li></ul></li><li><p>Case <code>↦-intro</code>: We have <code>subst σ M ≡ ƛ L′</code>. We proceed by cases on <code>M</code>.</p><ul><li><p>Case <code>M ≡ x</code>: We apply the <code>subst-reflect-var</code> lemma.</p></li><li><p>Case <code>M ≡ ƛ M′</code>: By the induction hypothesis, we have <code>(δ′ , v′) ⊢ M′ ↓ v₂</code> and <code>(δ , v₁) ⊢ exts σ ↓ (δ′ , v′)</code>. From the later we have <code>(δ , v₁) ⊢ # 0 ↓ v′</code>. By the lemma <code>var-inv</code> we have <code>v′ ⊑ v₁</code>, so by the <code>up-env</code> lemma we have <code>(δ′ , v₁) ⊢ M′ ↓ v₂</code> and therefore <code>δ′ ⊢ ƛ M′ ↓ v₁ → v₂</code>. We also need to show that <code>δ</code>⊢ σ ↓ δ′<code>. Fix</code>k<code>. We have</code>(δ , v₁) ⊢ rename S_ σ k ↓ δ k′<code>. We then apply the lemma</code>rename-inc-reflect<code>to obtain</code>δ ⊢ σ k ↓ δ k′`, so this case is complete.</p></li></ul></li><li><p>Case <code>⊥-intro</code>: We choose <code>⊥</code> for <code>δ</code>. We have <code>⊥ ⊢ M ↓ ⊥</code> by <code>⊥-intro</code>. We have <code>δ ⊢ σ ↓ ⊥</code> by the lemma <code>subst-empty</code>.</p></li><li><p>Case <code>⊔-intro</code>: By the induction hypothesis we have <code>δ₁ ⊢ M ↓ v₁</code>, <code>δ₂ ⊢ M ↓ v₂</code>, <code>δ ⊢ σ ↓ δ₁</code>, and <code>δ ⊢ σ ↓ δ₂</code>. We have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁</code> and <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₂</code> by <code>⊑-env</code> with <code>⊑-env-conj-R1</code> and <code>⊑-env-conj-R2</code>. So by <code>⊔-intro</code> we have <code>δ₁ ⊔ δ₂ ⊢ M ↓ v₁ ⊔ v₂</code>. By <code>subst-⊔</code> we conclude that <code>δ ⊢ σ ↓ δ₁ ⊔ δ₂</code>.</p></li></ul><h3 id="single-substitution-reflects-denotations">Single substitution reflects denotations</h3><p>Most of the work is now behind us. We have proved that simultaneous substitution reflects denotations. Of course, β reduction uses single substitution, so we need a corollary that proves that single substitution reflects denotations. That is, given terms <code>N : (Γ , ★ ⊢ ★)</code> and <code>M : (Γ ⊢ ★)</code>, if <code>γ ⊢ N [ M ] ↓ w</code>, then <code>γ ⊢ M ↓ v</code> and <code>(γ , v) ⊢ N ↓ w</code> for some value <code>v</code>. We have <code>N [ M ] = subst (subst-zero M) N</code>.</p><p>We first prove a lemma about <code>subst-zero</code>, that if <code>δ ⊢ subst-zero M ↓ γ</code>, then <code>γ ⊑ (δ , w) × δ ⊢ M ↓ w</code> for some <code>w</code>.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-subst-zero-reflect"></a><a id="plfa_plfa-part3-Soundness-20093" href="../Soundness/#plfa_plfa-part3-Soundness-20093" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20112" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20114" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20116" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20117" href="../Soundness/#plfa_plfa-part3-Soundness-20117" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20118" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20120" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20121" href="../Soundness/#plfa_plfa-part3-Soundness-20121" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20123" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20125" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20129" href="../Soundness/#plfa_plfa-part3-Soundness-20117" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20130" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20132" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20133" href="../Soundness/#plfa_plfa-part3-Soundness-20133" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20135" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20137" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20141" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20142" href="../Soundness/#plfa_plfa-part3-Soundness-20117" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20144" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20146" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20147" class="Symbol">)}</a> <a id="plfa_plfa-part3-Soundness-20150" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20151" href="../Soundness/#plfa_plfa-part3-Soundness-20151" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20153" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20155" href="../Soundness/#plfa_plfa-part3-Soundness-20117" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20157" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20159" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20160" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20164" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20166" href="../Soundness/#plfa_plfa-part3-Soundness-20121" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20168" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">`⊢</a> <a id="plfa_plfa-part3-Soundness-20171" href="../Untyped/#plfa_plfa-part2-Untyped-7359" class="Function">subst-zero</a> <a id="plfa_plfa-part3-Soundness-20182" href="../Soundness/#plfa_plfa-part3-Soundness-20151" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20184" href="../Soundness/#plfa_plfa-part3-Soundness-3141" class="Function Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20186" href="../Soundness/#plfa_plfa-part3-Soundness-20133" class="Bound">γ</a>
    <a id="plfa_plfa-part3-Soundness-20192" class="Comment">----------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-20235" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-20237" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-20240" href="../Soundness/#plfa_plfa-part3-Soundness-20240" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-20242" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-20244" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-20250" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-20252" href="../Soundness/#plfa_plfa-part3-Soundness-20133" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20254" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20257" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20258" href="../Soundness/#plfa_plfa-part3-Soundness-20121" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20260" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20263" href="../Soundness/#plfa_plfa-part3-Soundness-20240" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-20264" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20266" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a> <a id="plfa_plfa-part3-Soundness-20268" href="../Soundness/#plfa_plfa-part3-Soundness-20121" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20270" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20272" href="../Soundness/#plfa_plfa-part3-Soundness-20151" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20274" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-20276" href="../Soundness/#plfa_plfa-part3-Soundness-20240" class="Bound">w</a>
<a id="plfa_plfa-part3-Soundness-20278" href="../Soundness/#plfa_plfa-part3-Soundness-20093" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-20297" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20298" class="Argument">δ</a> <a id="plfa_plfa-part3-Soundness-20300" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20302" href="../Soundness/#plfa_plfa-part3-Soundness-20302" class="Bound">δ</a><a id="plfa_plfa-part3-Soundness-20303" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20305" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20306" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-20308" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20310" href="../Soundness/#plfa_plfa-part3-Soundness-20310" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20311" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20313" href="../Soundness/#plfa_plfa-part3-Soundness-20313" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20317" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20319" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20321" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20326" href="../Soundness/#plfa_plfa-part3-Soundness-20310" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20328" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20330" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-20332" href="../Soundness/#plfa_plfa-part3-Soundness-20360" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20338" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20340" href="../Soundness/#plfa_plfa-part3-Soundness-20313" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20344" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a> <a id="plfa_plfa-part3-Soundness-20346" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-20348" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
  <a id="plfa_plfa-part3-Soundness-20352" class="Keyword">where</a>
  <a id="plfa_plfa-part3-Soundness-20360" href="../Soundness/#plfa_plfa-part3-Soundness-20360" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20366" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20368" href="../Soundness/#plfa_plfa-part3-Soundness-20310" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-20370" href="../Denotational/#plfa_plfa-part3-Denotational-7967" class="Function Operator">`⊑</a> <a id="plfa_plfa-part3-Soundness-20373" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20374" href="../Soundness/#plfa_plfa-part3-Soundness-20302" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20376" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-20379" href="../Denotational/#plfa_plfa-part3-Denotational-7596" class="Function">last</a> <a id="plfa_plfa-part3-Soundness-20384" href="../Soundness/#plfa_plfa-part3-Soundness-20310" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-20385" class="Symbol">)</a>
  <a id="plfa_plfa-part3-Soundness-20389" href="../Soundness/#plfa_plfa-part3-Soundness-20360" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20395" href="../Untyped/#plfa_plfa-part2-Untyped-3505" class="InductiveConstructor">Z</a>  <a id="plfa_plfa-part3-Soundness-20398" class="Symbol">=</a>  <a id="plfa_plfa-part3-Soundness-20401" href="../Denotational/#plfa_plfa-part3-Denotational-5469" class="Function">⊑-refl</a>
  <a id="plfa_plfa-part3-Soundness-20410" href="../Soundness/#plfa_plfa-part3-Soundness-20360" class="Function">lemma</a> <a id="plfa_plfa-part3-Soundness-20416" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20417" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20419" href="../Soundness/#plfa_plfa-part3-Soundness-20419" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20420" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-20422" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-20424" href="../Compositional/#plfa_plfa-part3-Compositional-9995" class="Function">var-inv</a> <a id="plfa_plfa-part3-Soundness-20432" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20433" href="../Soundness/#plfa_plfa-part3-Soundness-20313" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-20437" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-20438" href="../Untyped/#plfa_plfa-part2-Untyped-3550" class="InductiveConstructor Operator">S</a> <a id="plfa_plfa-part3-Soundness-20440" href="../Soundness/#plfa_plfa-part3-Soundness-20419" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-20441" class="Symbol">))</a>
</pre><p>We choose <code>w</code> to be the last value in <code>γ</code> and we obtain <code>δ ⊢ M ↓ w</code> by applying the premise to variable <code>Z</code>. Finally, to prove <code>γ ⊑ (δ , w)</code>, we prove a lemma by induction in the input variable. The base case is trivial because of our choice of <code>w</code>. In the induction case, <code>S x</code>, the premise <code>δ ⊢ subst-zero M ↓ γ</code> gives us <code>δ ⊢ x ↓ γ (S x)</code> and then using <code>var-inv</code> we conclude that <code>γ (S x) ⊑ (δ</code>, w) (S x)`.</p><p>Now to prove that substitution reflects denotations.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-substitution-reflect"></a><a id="plfa_plfa-part3-Soundness-20924" href="../Soundness/#plfa_plfa-part3-Soundness-20924" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-20945" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20947" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-20949" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20950" href="../Soundness/#plfa_plfa-part3-Soundness-20950" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20951" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20953" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20954" href="../Soundness/#plfa_plfa-part3-Soundness-20954" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-20956" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20958" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-20962" href="../Soundness/#plfa_plfa-part3-Soundness-20950" class="Bound">Δ</a><a id="plfa_plfa-part3-Soundness-20963" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20965" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20966" href="../Soundness/#plfa_plfa-part3-Soundness-20966" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-20968" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20970" href="../Soundness/#plfa_plfa-part3-Soundness-20950" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20972" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-20974" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-20976" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20978" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20979" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20981" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20982" href="../Soundness/#plfa_plfa-part3-Soundness-20982" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-20984" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-20986" href="../Soundness/#plfa_plfa-part3-Soundness-20950" class="Bound">Δ</a> <a id="plfa_plfa-part3-Soundness-20988" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-20990" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-20991" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-20993" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-20994" href="../Soundness/#plfa_plfa-part3-Soundness-20994" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-20995" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-20999" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21001" href="../Soundness/#plfa_plfa-part3-Soundness-20954" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21003" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21005" href="../Soundness/#plfa_plfa-part3-Soundness-20966" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21007" href="../Untyped/#plfa_plfa-part2-Untyped-7475" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-21009" href="../Soundness/#plfa_plfa-part3-Soundness-20982" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21011" href="../Untyped/#plfa_plfa-part2-Untyped-7475" class="Function Operator">]</a> <a id="plfa_plfa-part3-Soundness-21013" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21015" href="../Soundness/#plfa_plfa-part3-Soundness-20994" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-21021" class="Comment">------------------------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-21072" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21074" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">Σ[</a> <a id="plfa_plfa-part3-Soundness-21077" href="../Soundness/#plfa_plfa-part3-Soundness-21077" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21079" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">∈</a> <a id="plfa_plfa-part3-Soundness-21081" href="../Denotational/#plfa_plfa-part3-Denotational-3974" class="Datatype">Value</a> <a id="plfa_plfa-part3-Soundness-21087" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#916" class="Function">]</a> <a id="plfa_plfa-part3-Soundness-21089" href="../Soundness/#plfa_plfa-part3-Soundness-20954" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21091" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21093" href="../Soundness/#plfa_plfa-part3-Soundness-20982" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21095" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21097" href="../Soundness/#plfa_plfa-part3-Soundness-21077" class="Bound">w</a>  <a id="plfa_plfa-part3-Soundness-21100" href="https://agda.github.io/agda-stdlib/v1.3/Data.Product.html#1167" class="Function Operator">×</a>  <a id="plfa_plfa-part3-Soundness-21103" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21104" href="../Soundness/#plfa_plfa-part3-Soundness-20954" class="Bound">δ</a> <a id="plfa_plfa-part3-Soundness-21106" href="../Denotational/#plfa_plfa-part3-Denotational-7296" class="Function Operator">`,</a> <a id="plfa_plfa-part3-Soundness-21109" href="../Soundness/#plfa_plfa-part3-Soundness-21077" class="Bound">w</a><a id="plfa_plfa-part3-Soundness-21110" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21112" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21114" href="../Soundness/#plfa_plfa-part3-Soundness-20966" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21116" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21118" href="../Soundness/#plfa_plfa-part3-Soundness-20994" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21120" href="../Soundness/#plfa_plfa-part3-Soundness-20924" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21141" href="../Soundness/#plfa_plfa-part3-Soundness-21141" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21143" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21148" href="../Soundness/#plfa_plfa-part3-Soundness-15588" class="Function">subst-reflect</a> <a id="plfa_plfa-part3-Soundness-21162" href="../Soundness/#plfa_plfa-part3-Soundness-21141" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-21164" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="plfa_plfa-part3-Soundness-21169" class="Symbol">...</a>  <a id="plfa_plfa-part3-Soundness-21174" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21176" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21178" href="../Soundness/#plfa_plfa-part3-Soundness-21178" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21180" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21182" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21184" href="../Soundness/#plfa_plfa-part3-Soundness-21184" class="Bound">δσγ</a> <a id="plfa_plfa-part3-Soundness-21188" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21190" href="../Soundness/#plfa_plfa-part3-Soundness-21190" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21194" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21196" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21198" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21203" href="../Soundness/#plfa_plfa-part3-Soundness-20093" class="Function">subst-zero-reflect</a> <a id="plfa_plfa-part3-Soundness-21222" href="../Soundness/#plfa_plfa-part3-Soundness-21184" class="Bound">δσγ</a>
<a id="plfa_plfa-part3-Soundness-21226" class="Symbol">...</a>    <a id="plfa_plfa-part3-Soundness-21233" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21235" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21237" href="../Soundness/#plfa_plfa-part3-Soundness-21237" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21239" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21241" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21243" href="../Soundness/#plfa_plfa-part3-Soundness-21243" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21248" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21250" href="../Soundness/#plfa_plfa-part3-Soundness-21250" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21254" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21256" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21258" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21260" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21262" href="../Soundness/#plfa_plfa-part3-Soundness-21237" class="Bound">w</a> <a id="plfa_plfa-part3-Soundness-21264" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21266" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21268" href="../Soundness/#plfa_plfa-part3-Soundness-21250" class="Bound">δMw</a> <a id="plfa_plfa-part3-Soundness-21272" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21274" href="../Denotational/#plfa_plfa-part3-Denotational-25659" class="Function">⊑-env</a> <a id="plfa_plfa-part3-Soundness-21280" class="Bound">γNv</a> <a id="plfa_plfa-part3-Soundness-21284" href="../Soundness/#plfa_plfa-part3-Soundness-21243" class="Bound">ineq</a> <a id="plfa_plfa-part3-Soundness-21289" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21291" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><p>We apply the <code>subst-reflect</code> lemma to obtain <code>δ ⊢ subst-zero M ↓ γ</code> and <code>γ ⊢ N ↓ v</code> for some <code>γ</code>. Using the former, the <code>subst-zero-reflect</code> lemma gives us <code>γ ⊑ (δ , w)</code> and <code>δ ⊢ M ↓ w</code>. We conclude that <code>δ , w ⊢ N ↓ v</code> by applying the <code>⊑-env</code> lemma, using <code>γ ⊢ N ↓ v</code> and <code>γ ⊑ (δ , w)</code>.</p><h3 id="reduction-reflects-denotations-1">Reduction reflects denotations</h3><p>Now that we have proved that substitution reflects denotations, we can easily prove that reduction does too.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reflect-beta"></a><a id="plfa_plfa-part3-Soundness-21742" href="../Soundness/#plfa_plfa-part3-Soundness-21742" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21755" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21757" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-21759" href="../Soundness/#plfa_plfa-part3-Soundness-21759" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21760" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21762" href="../Soundness/#plfa_plfa-part3-Soundness-21762" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21764" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21766" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21770" href="../Soundness/#plfa_plfa-part3-Soundness-21759" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21771" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21773" href="../Soundness/#plfa_plfa-part3-Soundness-21773" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21775" href="../Soundness/#plfa_plfa-part3-Soundness-21775" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21776" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-21778" href="../Soundness/#plfa_plfa-part3-Soundness-21778" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21779" class="Symbol">}</a>
    <a id="plfa_plfa-part3-Soundness-21785" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21787" href="../Soundness/#plfa_plfa-part3-Soundness-21762" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21789" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21791" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21792" href="../Soundness/#plfa_plfa-part3-Soundness-21775" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21794" href="../Untyped/#plfa_plfa-part2-Untyped-7475" class="Function Operator">[</a> <a id="plfa_plfa-part3-Soundness-21796" href="../Soundness/#plfa_plfa-part3-Soundness-21773" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21798" href="../Untyped/#plfa_plfa-part2-Untyped-7475" class="Function Operator">]</a><a id="plfa_plfa-part3-Soundness-21799" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21801" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21803" href="../Soundness/#plfa_plfa-part3-Soundness-21778" class="Bound">v</a>
    <a id="plfa_plfa-part3-Soundness-21809" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21811" href="../Soundness/#plfa_plfa-part3-Soundness-21762" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21813" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21815" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21816" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-21818" href="../Soundness/#plfa_plfa-part3-Soundness-21775" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-21819" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21821" class="InductiveConstructor Operator">·</a> <a id="plfa_plfa-part3-Soundness-21823" href="../Soundness/#plfa_plfa-part3-Soundness-21773" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21825" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21827" href="../Soundness/#plfa_plfa-part3-Soundness-21778" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-21829" href="../Soundness/#plfa_plfa-part3-Soundness-21742" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-21842" href="../Soundness/#plfa_plfa-part3-Soundness-21842" class="Bound">d</a>
    <a id="plfa_plfa-part3-Soundness-21848" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-21853" href="../Soundness/#plfa_plfa-part3-Soundness-20924" class="Function">substitution-reflect</a> <a id="plfa_plfa-part3-Soundness-21874" href="../Soundness/#plfa_plfa-part3-Soundness-21842" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-21876" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-21880" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-21882" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21884" href="../Soundness/#plfa_plfa-part3-Soundness-21884" class="Bound">v₂′</a> <a id="plfa_plfa-part3-Soundness-21888" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21890" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-21892" href="../Soundness/#plfa_plfa-part3-Soundness-21892" class="Bound">d₁′</a> <a id="plfa_plfa-part3-Soundness-21896" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-21898" href="../Soundness/#plfa_plfa-part3-Soundness-21898" class="Bound">d₂′</a> <a id="plfa_plfa-part3-Soundness-21902" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21904" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-21906" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-21908" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-21915" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-21916" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-21924" href="../Soundness/#plfa_plfa-part3-Soundness-21898" class="Bound">d₂′</a><a id="plfa_plfa-part3-Soundness-21927" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-21929" href="../Soundness/#plfa_plfa-part3-Soundness-21892" class="Bound">d₁′</a>


<a id="plfa_plfa-part3-Soundness-reflect"></a><a id="plfa_plfa-part3-Soundness-21935" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-21943" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21945" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-21947" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21948" href="../Soundness/#plfa_plfa-part3-Soundness-21948" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21949" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21951" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21952" href="../Soundness/#plfa_plfa-part3-Soundness-21952" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21954" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-21956" href="../Denotational/#plfa_plfa-part3-Denotational-7135" class="Function">Env</a> <a id="plfa_plfa-part3-Soundness-21960" href="../Soundness/#plfa_plfa-part3-Soundness-21948" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-21961" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-21963" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-21964" href="../Soundness/#plfa_plfa-part3-Soundness-21964" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21966" href="../Soundness/#plfa_plfa-part3-Soundness-21966" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-21969" href="../Soundness/#plfa_plfa-part3-Soundness-21969" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21971" href="../Soundness/#plfa_plfa-part3-Soundness-21971" class="Bound">v</a><a id="plfa_plfa-part3-Soundness-21972" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-21976" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-21978" href="../Soundness/#plfa_plfa-part3-Soundness-21952" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-21980" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-21982" href="../Soundness/#plfa_plfa-part3-Soundness-21969" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-21984" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-21986" href="../Soundness/#plfa_plfa-part3-Soundness-21971" class="Bound">v</a>  <a id="plfa_plfa-part3-Soundness-21989" class="Symbol">→</a>  <a id="plfa_plfa-part3-Soundness-21992" href="../Soundness/#plfa_plfa-part3-Soundness-21964" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-21994" href="../Untyped/#plfa_plfa-part2-Untyped-9956" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-21997" href="../Soundness/#plfa_plfa-part3-Soundness-21966" class="Bound">M′</a>  <a id="plfa_plfa-part3-Soundness-22001" class="Symbol">→</a>   <a id="plfa_plfa-part3-Soundness-22005" href="../Soundness/#plfa_plfa-part3-Soundness-21966" class="Bound">M′</a> <a id="plfa_plfa-part3-Soundness-22008" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="plfa_plfa-part3-Soundness-22010" href="../Soundness/#plfa_plfa-part3-Soundness-21969" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-22016" class="Comment">---------------------------------</a>
  <a id="plfa_plfa-part3-Soundness-22052" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-22054" href="../Soundness/#plfa_plfa-part3-Soundness-21952" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-22056" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-22058" href="../Soundness/#plfa_plfa-part3-Soundness-21964" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-22060" href="../Denotational/#plfa_plfa-part3-Denotational-9217" class="Datatype Operator">↓</a> <a id="plfa_plfa-part3-Soundness-22062" href="../Soundness/#plfa_plfa-part3-Soundness-21971" class="Bound">v</a>
<a id="plfa_plfa-part3-Soundness-22064" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22072" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22076" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22077" href="../Untyped/#plfa_plfa-part2-Untyped-10006" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22080" href="../Soundness/#plfa_plfa-part3-Soundness-22080" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22081" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22083" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22086" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22094" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22098" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22099" href="../Untyped/#plfa_plfa-part2-Untyped-10096" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22102" href="../Soundness/#plfa_plfa-part3-Soundness-22102" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22103" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22105" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22108" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a><a id="plfa_plfa-part3-Soundness-22115" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22116" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22118" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22120" href="../Soundness/#plfa_plfa-part3-Soundness-22120" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22121" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-22123" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22124" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22127" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22128" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22130" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22132" href="../Soundness/#plfa_plfa-part3-Soundness-22132" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22133" class="Symbol">})</a> <a id="plfa_plfa-part3-Soundness-22136" href="../Untyped/#plfa_plfa-part2-Untyped-10186" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22138" href="../Soundness/#plfa_plfa-part3-Soundness-22138" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22145" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22150" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a><a id="plfa_plfa-part3-Soundness-22153" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-22154" class="Argument">γ</a> <a id="plfa_plfa-part3-Soundness-22156" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22158" href="../Soundness/#plfa_plfa-part3-Soundness-22120" class="Bound">γ</a><a id="plfa_plfa-part3-Soundness-22159" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-22161" class="Argument">x</a> <a id="plfa_plfa-part3-Soundness-22163" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22165" href="../Soundness/#plfa_plfa-part3-Soundness-22132" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-22166" class="Symbol">}</a>
<a id="plfa_plfa-part3-Soundness-22168" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22172" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22174" href="../Soundness/#plfa_plfa-part3-Soundness-22174" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22177" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22185" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22189" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22192" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22194" href="../Soundness/#plfa_plfa-part3-Soundness-21742" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22207" href="../Soundness/#plfa_plfa-part3-Soundness-22174" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22210" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22218" href="../Denotational/#plfa_plfa-part3-Denotational-9271" class="InductiveConstructor">var</a> <a id="plfa_plfa-part3-Soundness-22222" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22223" href="../Untyped/#plfa_plfa-part2-Untyped-10294" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22225" href="../Soundness/#plfa_plfa-part3-Soundness-22225" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22226" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22228" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22231" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22239" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22240" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22247" href="../Soundness/#plfa_plfa-part3-Soundness-22247" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22250" href="../Soundness/#plfa_plfa-part3-Soundness-22250" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22252" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22254" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22255" href="../Untyped/#plfa_plfa-part2-Untyped-10006" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22258" href="../Soundness/#plfa_plfa-part3-Soundness-22258" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22259" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22261" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22266" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22268" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22275" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22276" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22284" href="../Soundness/#plfa_plfa-part3-Soundness-22247" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22287" href="../Soundness/#plfa_plfa-part3-Soundness-22258" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22289" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22293" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22295" href="../Soundness/#plfa_plfa-part3-Soundness-22250" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22298" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22306" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22307" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22314" href="../Soundness/#plfa_plfa-part3-Soundness-22314" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22317" href="../Soundness/#plfa_plfa-part3-Soundness-22317" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22319" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22321" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22322" href="../Untyped/#plfa_plfa-part2-Untyped-10096" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22325" href="../Soundness/#plfa_plfa-part3-Soundness-22325" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22326" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22328" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22333" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22335" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22342" href="../Soundness/#plfa_plfa-part3-Soundness-22314" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22345" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22346" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22354" href="../Soundness/#plfa_plfa-part3-Soundness-22317" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22357" href="../Soundness/#plfa_plfa-part3-Soundness-22325" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22359" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22363" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22365" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22373" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22374" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22381" href="../Soundness/#plfa_plfa-part3-Soundness-22381" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22384" href="../Soundness/#plfa_plfa-part3-Soundness-22384" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22386" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22388" href="../Untyped/#plfa_plfa-part2-Untyped-10186" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22390" href="../Soundness/#plfa_plfa-part3-Soundness-22390" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22397" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22402" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22409" href="../Soundness/#plfa_plfa-part3-Soundness-22381" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22412" href="../Soundness/#plfa_plfa-part3-Soundness-22384" class="Bound">d₂</a>
<a id="plfa_plfa-part3-Soundness-22415" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22419" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22421" href="../Soundness/#plfa_plfa-part3-Soundness-22421" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22424" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22432" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22436" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22439" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22441" href="../Soundness/#plfa_plfa-part3-Soundness-21742" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22454" href="../Soundness/#plfa_plfa-part3-Soundness-22421" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22457" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22465" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22466" href="../Denotational/#plfa_plfa-part3-Denotational-9346" class="InductiveConstructor">↦-elim</a> <a id="plfa_plfa-part3-Soundness-22473" href="../Soundness/#plfa_plfa-part3-Soundness-22473" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22476" href="../Soundness/#plfa_plfa-part3-Soundness-22476" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22478" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22480" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22481" href="../Untyped/#plfa_plfa-part2-Untyped-10294" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22483" href="../Soundness/#plfa_plfa-part3-Soundness-22483" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22484" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22486" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22489" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22497" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22498" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22506" href="../Soundness/#plfa_plfa-part3-Soundness-22506" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22507" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22509" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22510" href="../Untyped/#plfa_plfa-part2-Untyped-10006" class="InductiveConstructor">ξ₁</a> <a id="plfa_plfa-part3-Soundness-22513" href="../Soundness/#plfa_plfa-part3-Soundness-22513" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22514" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22516" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22519" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22527" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22528" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22536" href="../Soundness/#plfa_plfa-part3-Soundness-22536" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22537" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22539" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22540" href="../Untyped/#plfa_plfa-part2-Untyped-10096" class="InductiveConstructor">ξ₂</a> <a id="plfa_plfa-part3-Soundness-22543" href="../Soundness/#plfa_plfa-part3-Soundness-22543" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22544" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22546" class="Symbol">()</a>
<a id="plfa_plfa-part3-Soundness-22549" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22557" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22558" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22566" href="../Soundness/#plfa_plfa-part3-Soundness-22566" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22567" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22569" href="../Untyped/#plfa_plfa-part2-Untyped-10186" class="InductiveConstructor">β</a> <a id="plfa_plfa-part3-Soundness-22571" href="../Soundness/#plfa_plfa-part3-Soundness-22571" class="Bound">mn</a>
    <a id="plfa_plfa-part3-Soundness-22578" class="Keyword">with</a> <a id="plfa_plfa-part3-Soundness-22583" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22591" href="../Soundness/#plfa_plfa-part3-Soundness-22566" class="Bound">d</a>
<a id="plfa_plfa-part3-Soundness-22593" class="Symbol">...</a> <a id="plfa_plfa-part3-Soundness-22597" class="Symbol">|</a> <a id="plfa_plfa-part3-Soundness-22599" href="../Soundness/#plfa_plfa-part3-Soundness-22599" class="Bound">d′</a> <a id="plfa_plfa-part3-Soundness-22602" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22610" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22614" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22617" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22619" href="../Soundness/#plfa_plfa-part3-Soundness-21742" class="Function">reflect-beta</a> <a id="plfa_plfa-part3-Soundness-22632" href="../Soundness/#plfa_plfa-part3-Soundness-22599" class="Bound">d′</a>
<a id="plfa_plfa-part3-Soundness-22635" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22643" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22644" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22652" href="../Soundness/#plfa_plfa-part3-Soundness-22652" class="Bound">d</a><a id="plfa_plfa-part3-Soundness-22653" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22655" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22656" href="../Untyped/#plfa_plfa-part2-Untyped-10294" class="InductiveConstructor">ζ</a> <a id="plfa_plfa-part3-Soundness-22658" href="../Soundness/#plfa_plfa-part3-Soundness-22658" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-22659" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22661" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="plfa_plfa-part3-Soundness-22666" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22668" href="../Denotational/#plfa_plfa-part3-Denotational-9468" class="InductiveConstructor">↦-intro</a> <a id="plfa_plfa-part3-Soundness-22676" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22677" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22685" href="../Soundness/#plfa_plfa-part3-Soundness-22652" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22687" href="../Soundness/#plfa_plfa-part3-Soundness-22658" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22689" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22693" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22695" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22703" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a> <a id="plfa_plfa-part3-Soundness-22711" href="../Soundness/#plfa_plfa-part3-Soundness-22711" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22713" href="../Soundness/#plfa_plfa-part3-Soundness-22713" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22716" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22718" href="../Denotational/#plfa_plfa-part3-Denotational-9580" class="InductiveConstructor">⊥-intro</a>
<a id="plfa_plfa-part3-Soundness-22726" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22734" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22735" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22743" href="../Soundness/#plfa_plfa-part3-Soundness-22743" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22746" href="../Soundness/#plfa_plfa-part3-Soundness-22746" class="Bound">d₂</a><a id="plfa_plfa-part3-Soundness-22748" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22750" href="../Soundness/#plfa_plfa-part3-Soundness-22750" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22752" href="../Soundness/#plfa_plfa-part3-Soundness-22752" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22755" class="Keyword">rewrite</a> <a id="plfa_plfa-part3-Soundness-22763" href="https://agda.github.io/agda-stdlib/v1.3/Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="plfa_plfa-part3-Soundness-22767" href="../Soundness/#plfa_plfa-part3-Soundness-22752" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22770" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-22775" href="../Denotational/#plfa_plfa-part3-Denotational-9647" class="InductiveConstructor">⊔-intro</a> <a id="plfa_plfa-part3-Soundness-22783" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22784" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22792" href="../Soundness/#plfa_plfa-part3-Soundness-22743" class="Bound">d₁</a> <a id="plfa_plfa-part3-Soundness-22795" href="../Soundness/#plfa_plfa-part3-Soundness-22750" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22797" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22801" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22803" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22804" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22812" href="../Soundness/#plfa_plfa-part3-Soundness-22746" class="Bound">d₂</a> <a id="plfa_plfa-part3-Soundness-22815" href="../Soundness/#plfa_plfa-part3-Soundness-22750" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22817" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-22821" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-22823" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22831" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22832" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22836" href="../Soundness/#plfa_plfa-part3-Soundness-22836" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22838" href="../Soundness/#plfa_plfa-part3-Soundness-22838" class="Bound">lt</a><a id="plfa_plfa-part3-Soundness-22840" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22842" href="../Soundness/#plfa_plfa-part3-Soundness-22842" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22844" href="../Soundness/#plfa_plfa-part3-Soundness-22844" class="Bound">mn</a> <a id="plfa_plfa-part3-Soundness-22847" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-22849" href="../Denotational/#plfa_plfa-part3-Denotational-9762" class="InductiveConstructor">sub</a> <a id="plfa_plfa-part3-Soundness-22853" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-22854" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-22862" href="../Soundness/#plfa_plfa-part3-Soundness-22836" class="Bound">d</a> <a id="plfa_plfa-part3-Soundness-22864" href="../Soundness/#plfa_plfa-part3-Soundness-22842" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-22866" href="../Soundness/#plfa_plfa-part3-Soundness-22844" class="Bound">mn</a><a id="plfa_plfa-part3-Soundness-22868" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-22870" href="../Soundness/#plfa_plfa-part3-Soundness-22838" class="Bound">lt</a>
</pre><h2 id="reduction-implies-denotational-equality">Reduction implies denotational equality</h2><p>We have proved that reduction both preserves and reflects denotations. Thus, reduction implies denotational equality.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-reduce-equal"></a><a id="plfa_plfa-part3-Soundness-23049" href="../Soundness/#plfa_plfa-part3-Soundness-23049" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23062" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23064" class="Symbol">∀</a> <a id="plfa_plfa-part3-Soundness-23066" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23067" href="../Soundness/#plfa_plfa-part3-Soundness-23067" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23068" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23070" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23071" href="../Soundness/#plfa_plfa-part3-Soundness-23071" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23073" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23075" href="../Soundness/#plfa_plfa-part3-Soundness-23067" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23077" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23079" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23080" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23082" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23083" href="../Soundness/#plfa_plfa-part3-Soundness-23083" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23085" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23087" href="../Soundness/#plfa_plfa-part3-Soundness-23067" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23089" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23091" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23092" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23096" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23098" href="../Soundness/#plfa_plfa-part3-Soundness-23071" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23100" href="../Untyped/#plfa_plfa-part2-Untyped-9956" class="Datatype Operator">—→</a> <a id="plfa_plfa-part3-Soundness-23103" href="../Soundness/#plfa_plfa-part3-Soundness-23083" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23109" class="Comment">---------</a>
  <a id="plfa_plfa-part3-Soundness-23121" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23123" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23125" href="../Soundness/#plfa_plfa-part3-Soundness-23071" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23127" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23129" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23131" href="../Soundness/#plfa_plfa-part3-Soundness-23083" class="Bound">N</a>
<a id="plfa_plfa-part3-Soundness-23133" href="../Soundness/#plfa_plfa-part3-Soundness-23049" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23146" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23147" href="../Soundness/#plfa_plfa-part3-Soundness-23147" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23148" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23150" href="../Soundness/#plfa_plfa-part3-Soundness-23150" class="Bound">M</a><a id="plfa_plfa-part3-Soundness-23151" class="Symbol">}{</a><a id="plfa_plfa-part3-Soundness-23153" href="../Soundness/#plfa_plfa-part3-Soundness-23153" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23154" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23156" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23158" href="../Soundness/#plfa_plfa-part3-Soundness-23158" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23160" href="../Soundness/#plfa_plfa-part3-Soundness-23160" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23162" class="Symbol">=</a>
    <a id="plfa_plfa-part3-Soundness-23168" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23170" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23173" href="../Soundness/#plfa_plfa-part3-Soundness-23173" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23175" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23177" href="../Soundness/#plfa_plfa-part3-Soundness-6572" class="Function">preserve</a> <a id="plfa_plfa-part3-Soundness-23186" href="../Soundness/#plfa_plfa-part3-Soundness-23173" class="Bound">m</a> <a id="plfa_plfa-part3-Soundness-23188" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">r</a><a id="plfa_plfa-part3-Soundness-23189" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23191" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23193" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23196" href="../Soundness/#plfa_plfa-part3-Soundness-23196" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23198" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23200" href="../Soundness/#plfa_plfa-part3-Soundness-21935" class="Function">reflect</a> <a id="plfa_plfa-part3-Soundness-23208" href="../Soundness/#plfa_plfa-part3-Soundness-23196" class="Bound">n</a> <a id="plfa_plfa-part3-Soundness-23210" href="../Soundness/#plfa_plfa-part3-Soundness-23156" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23212" href="https://agda.github.io/agda-stdlib/v1.3/Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="plfa_plfa-part3-Soundness-23216" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23218" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
</pre><p>We conclude with the <em>soundness property</em>, that multi-step reduction to a lambda abstraction implies denotational equivalence with a lambda abstraction.</p><pre class="Agda"><a id="plfa_plfa-part3-Soundness-soundness"></a><a id="plfa_plfa-part3-Soundness-23387" href="../Soundness/#plfa_plfa-part3-Soundness-23387" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23397" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23399" class="Symbol">∀{</a><a id="plfa_plfa-part3-Soundness-23401" href="../Soundness/#plfa_plfa-part3-Soundness-23401" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23402" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23404" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23405" href="../Soundness/#plfa_plfa-part3-Soundness-23405" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23407" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23409" href="../Soundness/#plfa_plfa-part3-Soundness-23401" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23411" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23413" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23414" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23416" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23417" href="../Soundness/#plfa_plfa-part3-Soundness-23417" class="Bound">N</a> <a id="plfa_plfa-part3-Soundness-23419" class="Symbol">:</a> <a id="plfa_plfa-part3-Soundness-23421" href="../Soundness/#plfa_plfa-part3-Soundness-23401" class="Bound">Γ</a> <a id="plfa_plfa-part3-Soundness-23423" href="../Untyped/#plfa_plfa-part2-Untyped-3131" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23425" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a> <a id="plfa_plfa-part3-Soundness-23427" href="../Untyped/#plfa_plfa-part2-Untyped-4246" class="Datatype Operator">⊢</a> <a id="plfa_plfa-part3-Soundness-23429" href="../Untyped/#plfa_plfa-part2-Untyped-2820" class="InductiveConstructor">★</a><a id="plfa_plfa-part3-Soundness-23430" class="Symbol">}</a>
  <a id="plfa_plfa-part3-Soundness-23434" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23436" href="../Soundness/#plfa_plfa-part3-Soundness-23405" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23438" href="../Untyped/#plfa_plfa-part2-Untyped-11088" class="Datatype Operator">—↠</a> <a id="plfa_plfa-part3-Soundness-23441" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23443" href="../Soundness/#plfa_plfa-part3-Soundness-23417" class="Bound">N</a>
    <a id="plfa_plfa-part3-Soundness-23449" class="Comment">-----------------</a>
  <a id="plfa_plfa-part3-Soundness-23469" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23471" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23473" href="../Soundness/#plfa_plfa-part3-Soundness-23405" class="Bound">M</a> <a id="plfa_plfa-part3-Soundness-23475" href="../Denotational/#plfa_plfa-part3-Denotational-17595" class="Function Operator">≃</a> <a id="plfa_plfa-part3-Soundness-23477" href="../Denotational/#plfa_plfa-part3-Denotational-17409" class="Function">ℰ</a> <a id="plfa_plfa-part3-Soundness-23479" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23480" class="InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23482" href="../Soundness/#plfa_plfa-part3-Soundness-23417" class="Bound">N</a><a id="plfa_plfa-part3-Soundness-23483" class="Symbol">)</a>
<a id="plfa_plfa-part3-Soundness-23485" href="../Soundness/#plfa_plfa-part3-Soundness-23387" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23495" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23496" class="DottedPattern Symbol">.(</a><a id="plfa_plfa-part3-Soundness-23498" href="../Untyped/#plfa_plfa-part2-Untyped-4334" class="DottedPattern InductiveConstructor Operator">ƛ</a> <a id="plfa_plfa-part3-Soundness-23500" class="DottedPattern Symbol">_)</a> <a id="plfa_plfa-part3-Soundness-23503" href="../Untyped/#plfa_plfa-part2-Untyped-11138" class="InductiveConstructor Operator">∎</a><a id="plfa_plfa-part3-Soundness-23504" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23506" href="../Soundness/#plfa_plfa-part3-Soundness-23506" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23508" href="../Soundness/#plfa_plfa-part3-Soundness-23508" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23510" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23512" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟨</a> <a id="plfa_plfa-part3-Soundness-23514" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23517" href="../Soundness/#plfa_plfa-part3-Soundness-23517" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23519" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23521" href="../Soundness/#plfa_plfa-part3-Soundness-23517" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23522" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23524" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">,</a> <a id="plfa_plfa-part3-Soundness-23526" class="Symbol">(λ</a> <a id="plfa_plfa-part3-Soundness-23529" href="../Soundness/#plfa_plfa-part3-Soundness-23529" class="Bound">x</a> <a id="plfa_plfa-part3-Soundness-23531" class="Symbol">→</a> <a id="plfa_plfa-part3-Soundness-23533" href="../Soundness/#plfa_plfa-part3-Soundness-23529" class="Bound">x</a><a id="plfa_plfa-part3-Soundness-23534" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23536" href="../Soundness/#plfa_plfa-part3-Soundness-1224" class="InductiveConstructor Operator">⟩</a>
<a id="plfa_plfa-part3-Soundness-23538" href="../Soundness/#plfa_plfa-part3-Soundness-23387" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23548" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23549" href="../Soundness/#plfa_plfa-part3-Soundness-23549" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23550" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23552" class="Symbol">(</a><a id="plfa_plfa-part3-Soundness-23553" href="../Soundness/#plfa_plfa-part3-Soundness-23553" class="Bound">L</a> <a id="plfa_plfa-part3-Soundness-23555" href="../Untyped/#plfa_plfa-part2-Untyped-11194" class="InductiveConstructor Operator">—→⟨</a> <a id="plfa_plfa-part3-Soundness-23559" href="../Soundness/#plfa_plfa-part3-Soundness-23559" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23561" href="../Untyped/#plfa_plfa-part2-Untyped-11194" class="InductiveConstructor Operator">⟩</a> <a id="plfa_plfa-part3-Soundness-23563" href="../Soundness/#plfa_plfa-part3-Soundness-23563" class="Bound">M—↠N</a><a id="plfa_plfa-part3-Soundness-23567" class="Symbol">)</a> <a id="plfa_plfa-part3-Soundness-23569" href="../Soundness/#plfa_plfa-part3-Soundness-23569" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23571" href="../Soundness/#plfa_plfa-part3-Soundness-23571" class="Bound">v</a> <a id="plfa_plfa-part3-Soundness-23573" class="Symbol">=</a>
   <a id="plfa_plfa-part3-Soundness-23578" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23582" href="../Soundness/#plfa_plfa-part3-Soundness-23582" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23585" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23587" href="../Soundness/#plfa_plfa-part3-Soundness-23387" class="Function">soundness</a> <a id="plfa_plfa-part3-Soundness-23597" href="../Soundness/#plfa_plfa-part3-Soundness-23563" class="Bound">M—↠N</a> <a id="plfa_plfa-part3-Soundness-23602" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23608" class="Keyword">let</a> <a id="plfa_plfa-part3-Soundness-23612" href="../Soundness/#plfa_plfa-part3-Soundness-23612" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23614" class="Symbol">=</a> <a id="plfa_plfa-part3-Soundness-23616" href="../Soundness/#plfa_plfa-part3-Soundness-23049" class="Function">reduce-equal</a> <a id="plfa_plfa-part3-Soundness-23629" href="../Soundness/#plfa_plfa-part3-Soundness-23559" class="Bound">r</a> <a id="plfa_plfa-part3-Soundness-23631" class="Keyword">in</a>
   <a id="plfa_plfa-part3-Soundness-23637" href="../Denotational/#plfa_plfa-part3-Denotational-18004" class="Function">≃-trans</a> <a id="plfa_plfa-part3-Soundness-23645" class="Symbol">{</a><a id="plfa_plfa-part3-Soundness-23646" href="../Soundness/#plfa_plfa-part3-Soundness-23549" class="Bound">Γ</a><a id="plfa_plfa-part3-Soundness-23647" class="Symbol">}</a> <a id="plfa_plfa-part3-Soundness-23649" href="../Soundness/#plfa_plfa-part3-Soundness-23612" class="Bound">e</a> <a id="plfa_plfa-part3-Soundness-23651" href="../Soundness/#plfa_plfa-part3-Soundness-23582" class="Bound">ih</a> <a id="plfa_plfa-part3-Soundness-23654" href="../Soundness/#plfa_plfa-part3-Soundness-23569" class="Bound">γ</a> <a id="plfa_plfa-part3-Soundness-23656" href="../Soundness/#plfa_plfa-part3-Soundness-23571" class="Bound">v</a>
</pre><h2 id="unicode">Unicode</h2><p>This chapter uses the following unicode:</p><pre><code>≟  U+225F  QUESTIONED EQUAL TO (\?=)</code></pre></div><nav class="pager"><ul class="pagination"><li><a class="pagelink" href="../Compositional/">Prev</a></li><li class="separator">•</li><li><a class="pagelink" href="https://github.com/plfa/plfa.github.io/blob/dev/src/plfa/part3/Soundness.lagda.md">Source</a></li><li class="separator">•</li><li><a class="pagelink" href="../Adequacy/">Next</a></li><li class="separator">•</li></ul></nav></article></div></main><footer class="site-footer h-card"><data class="u-url" href="../"></data><div class="wrapper"><h2 class="footer-heading">Programming Language Foundations in Agda</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Philip Wadler</li><li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wadler" title="wadler"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  wadler</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Wen Kokke</li><li><a class="u-email" href="mailto:me@wen.works">me@wen.works</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  wenkokke</a></li><li><a rel="me" href="https://twitter.com/wenkokke" title="wenkokke"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#twitter"></use></svg>  wenkokke</a></li></ul></div><div class="footer-col footer-col-3"></div></div><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li class="p-name">Jeremy G. Siek</li><li><a class="u-email" href="mailto:jsiek@indiana.edu">jsiek@indiana.edu</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jsiek" title="jsiek"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#github"></use></svg>  jsiek</a></li><li><a rel="me" href="https://twitter.com/jeremysiek" title="jeremysiek"><svg class="svg-icon grey"><use xlink:href="../assets/minima-social-icons.svg#twitter"></use></svg>  jeremysiek</a></li></ul></div><div class="footer-col footer-col-3"></div></div>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></div></footer></body></html>